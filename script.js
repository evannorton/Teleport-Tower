(()=>{var Xo=Object.defineProperty;var ad=e=>Xo(e,"__esModule",{value:!0}),h=(e,i)=>Xo(e,"name",{value:i,configurable:!0});var Rl=(e,i)=>()=>(e&&(i=e(e=0)),i);var R=(e,i)=>()=>(i||e((i={exports:{}}).exports,i),i.exports),ld=(e,i)=>{ad(e);for(var t in i)Xo(e,t,{get:i[t],enumerable:!0})};var Sl=R((jx,wl)=>{"use strict";function ud(e){var i=this.constructor;return this.then(function(t){return i.resolve(e()).then(function(){return t})},function(t){return i.resolve(e()).then(function(){return i.reject(t)})})}h(ud,"finallyConstructor");function hd(e){var i=this;return new i(function(t,r){if(!(e&&typeof e.length!="undefined"))return r(new TypeError(typeof e+" "+e+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var o=Array.prototype.slice.call(e);if(o.length===0)return t([]);var n=o.length;function s(l,u){if(u&&(typeof u=="object"||typeof u=="function")){var p=u.then;if(typeof p=="function"){p.call(u,function(f){s(l,f)},function(f){o[l]={status:"rejected",reason:f},--n==0&&t(o)});return}}o[l]={status:"fulfilled",value:u},--n==0&&t(o)}h(s,"res");for(var a=0;a<o.length;a++)s(a,o[a])})}h(hd,"allSettled");var pd=setTimeout;function Il(e){return Boolean(e&&typeof e.length!="undefined")}h(Il,"isArray");function fd(){}h(fd,"noop");function cd(e,i){return function(){e.apply(i,arguments)}}h(cd,"bind");function he(e){if(!(this instanceof he))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Pl(e,this)}h(he,"Promise");function Al(e,i){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(i);return}e._handled=!0,he._immediateFn(function(){var t=e._state===1?i.onFulfilled:i.onRejected;if(t===null){(e._state===1?jo:si)(i.promise,e._value);return}var r;try{r=t(e._value)}catch(o){si(i.promise,o);return}jo(i.promise,r)})}h(Al,"handle");function jo(e,i){try{if(i===e)throw new TypeError("A promise cannot be resolved with itself.");if(i&&(typeof i=="object"||typeof i=="function")){var t=i.then;if(i instanceof he){e._state=3,e._value=i,Vo(e);return}else if(typeof t=="function"){Pl(cd(t,i),e);return}}e._state=1,e._value=i,Vo(e)}catch(r){si(e,r)}}h(jo,"resolve");function si(e,i){e._state=2,e._value=i,Vo(e)}h(si,"reject");function Vo(e){e._state===2&&e._deferreds.length===0&&he._immediateFn(function(){e._handled||he._unhandledRejectionFn(e._value)});for(var i=0,t=e._deferreds.length;i<t;i++)Al(e,e._deferreds[i]);e._deferreds=null}h(Vo,"finale");function dd(e,i,t){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof i=="function"?i:null,this.promise=t}h(dd,"Handler");function Pl(e,i){var t=!1;try{e(function(r){t||(t=!0,jo(i,r))},function(r){t||(t=!0,si(i,r))})}catch(r){if(t)return;t=!0,si(i,r)}}h(Pl,"doResolve");he.prototype.catch=function(e){return this.then(null,e)};he.prototype.then=function(e,i){var t=new this.constructor(fd);return Al(this,new dd(e,i,t)),t};he.prototype.finally=ud;he.all=function(e){return new he(function(i,t){if(!Il(e))return t(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return i([]);var o=r.length;function n(a,l){try{if(l&&(typeof l=="object"||typeof l=="function")){var u=l.then;if(typeof u=="function"){u.call(l,function(p){n(a,p)},t);return}}r[a]=l,--o==0&&i(r)}catch(p){t(p)}}h(n,"res");for(var s=0;s<r.length;s++)n(s,r[s])})};he.allSettled=hd;he.resolve=function(e){return e&&typeof e=="object"&&e.constructor===he?e:new he(function(i){i(e)})};he.reject=function(e){return new he(function(i,t){t(e)})};he.race=function(e){return new he(function(i,t){if(!Il(e))return t(new TypeError("Promise.race accepts an array"));for(var r=0,o=e.length;r<o;r++)he.resolve(e[r]).then(i,t)})};he._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){pd(e,0)};he._unhandledRejectionFn=h(function(i){typeof console!="undefined"&&console&&console.warn("Possible Unhandled Promise Rejection:",i)},"_unhandledRejectionFn");wl.exports=he});var Nl=R((Vx,Cl)=>{"use strict";var Ol=Object.getOwnPropertySymbols,vd=Object.prototype.hasOwnProperty,md=Object.prototype.propertyIsEnumerable;function yd(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}h(yd,"toObject");function _d(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var i={},t=0;t<10;t++)i["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(i).map(function(n){return i[n]});if(r.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(n){o[n]=n}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}h(_d,"shouldUseNative");Cl.exports=_d()?Object.assign:function(e,i){for(var t,r=yd(e),o,n=1;n<arguments.length;n++){t=Object(arguments[n]);for(var s in t)vd.call(t,s)&&(r[s]=t[s]);if(Ol){o=Ol(t);for(var a=0;a<o.length;a++)md.call(t,o[a])&&(r[o[a]]=t[o[a]])}}return r}});var Ll=R(()=>{"use strict";function Ml(e){return e&&typeof e=="object"&&"default"in e?e.default:e}h(Ml,"_interopDefault");var bd=Ml(Sl()),gd=Ml(Nl());self.Promise||(self.Promise=bd);Object.assign||(Object.assign=gd);var Td=16;Date.now&&Date.prototype.getTime||(Date.now=h(function(){return new Date().getTime()},"now"));self.performance&&self.performance.now||(Fl=Date.now(),self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-Fl});var Fl,qo=Date.now(),Ul=["ms","moz","webkit","o"];for(dr=0;dr<Ul.length&&!self.requestAnimationFrame;++dr)vr=Ul[dr],self.requestAnimationFrame=self[vr+"RequestAnimationFrame"],self.cancelAnimationFrame=self[vr+"CancelAnimationFrame"]||self[vr+"CancelRequestAnimationFrame"];var vr,dr;self.requestAnimationFrame||(self.requestAnimationFrame=function(e){if(typeof e!="function")throw new TypeError(e+"is not a function");var i=Date.now(),t=Td+qo-i;return t<0&&(t=0),qo=i,self.setTimeout(function(){qo=Date.now(),e(performance.now())},t)});self.cancelAnimationFrame||(self.cancelAnimationFrame=function(e){return clearTimeout(e)});Math.sign||(Math.sign=h(function(i){return i=Number(i),i===0||isNaN(i)?i:i>0?1:-1},"mathSign"));Number.isInteger||(Number.isInteger=h(function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i},"numberIsInteger"));self.ArrayBuffer||(self.ArrayBuffer=Array);self.Float32Array||(self.Float32Array=Array);self.Uint32Array||(self.Uint32Array=Array);self.Uint16Array||(self.Uint16Array=Array);self.Uint8Array||(self.Uint8Array=Array);self.Int32Array||(self.Int32Array=Array)});var Ko=R(zo=>{"use strict";zo.__esModule=!0;var Yo=/iPhone/i,Dl=/iPod/i,Bl=/iPad/i,Gl=/\biOS-universal(?:.+)Mac\b/i,Wo=/\bAndroid(?:.+)Mobile\b/i,kl=/Android/i,Mt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,mr=/Silk/i,Ke=/Windows Phone/i,Hl=/\bWindows(?:.+)ARM\b/i,Xl=/BlackBerry/i,jl=/BB10/i,Vl=/Opera Mini/i,ql=/\b(CriOS|Chrome)(?:.+)Mobile/i,Yl=/Mobile(?:.+)Firefox\b/i,Wl=h(function(e){return typeof e!="undefined"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream=="undefined"},"isAppleTabletOnIos13");function xd(e){return function(i){return i.test(e)}}h(xd,"createMatch");function Ed(e){var i={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator!="undefined"?i={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?i.userAgent=e:e&&e.userAgent&&(i={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var t=i.userAgent,r=t.split("[FBAN");typeof r[1]!="undefined"&&(t=r[0]),r=t.split("Twitter"),typeof r[1]!="undefined"&&(t=r[0]);var o=xd(t),n={apple:{phone:o(Yo)&&!o(Ke),ipod:o(Dl),tablet:!o(Yo)&&(o(Bl)||Wl(i))&&!o(Ke),universal:o(Gl),device:(o(Yo)||o(Dl)||o(Bl)||o(Gl)||Wl(i))&&!o(Ke)},amazon:{phone:o(Mt),tablet:!o(Mt)&&o(mr),device:o(Mt)||o(mr)},android:{phone:!o(Ke)&&o(Mt)||!o(Ke)&&o(Wo),tablet:!o(Ke)&&!o(Mt)&&!o(Wo)&&(o(mr)||o(kl)),device:!o(Ke)&&(o(Mt)||o(mr)||o(Wo)||o(kl))||o(/\bokhttp\b/i)},windows:{phone:o(Ke),tablet:o(Hl),device:o(Ke)||o(Hl)},other:{blackberry:o(Xl),blackberry10:o(jl),opera:o(Vl),firefox:o(Yl),chrome:o(ql),device:o(Xl)||o(jl)||o(Vl)||o(Yl)||o(ql)},any:!1,phone:!1,tablet:!1};return n.any=n.apple.device||n.android.device||n.windows.device||n.other.device,n.phone=n.apple.phone||n.android.phone||n.windows.phone,n.tablet=n.apple.tablet||n.android.tablet||n.windows.tablet,n}h(Ed,"isMobile");zo.default=Ed});var zl=R(ai=>{"use strict";function Rd(e){for(var i in e)ai.hasOwnProperty(i)||(ai[i]=e[i])}h(Rd,"__export");ai.__esModule=!0;Rd(Ko());var Id=Ko();ai.default=Id.default});var Se=R(yr=>{"use strict";Object.defineProperty(yr,"__esModule",{value:!0});function Ad(e){return e&&typeof e=="object"&&"default"in e?e.default:e}h(Ad,"_interopDefault");var Pd=Ad(zl()),ft=Pd(self.navigator);function wd(e){var i=!0;if(ft.tablet||ft.phone){if(ft.apple.device){var t=navigator.userAgent.match(/OS (\d+)_(\d+)?/);if(t){var r=parseInt(t[1],10);r<11&&(i=!1)}}if(ft.android.device){var t=navigator.userAgent.match(/Android\s([0-9.]*)/);if(t){var r=parseInt(t[1],10);r<7&&(i=!1)}}}return i?e:4}h(wd,"maxRecommendedTextures");function Sd(){return!ft.apple.device}h(Sd,"canUploadSameBuffer");var Kl;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Kl||(Kl={}));var Zl;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Zl||(Zl={}));var $l;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})($l||($l={}));var Jl;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Jl||(Jl={}));var Ql;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Ql||(Ql={}));var eu;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(eu||(eu={}));var tu;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(tu||(tu={}));var iu;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(iu||(iu={}));var ru;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(ru||(ru={}));var Zo;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Zo||(Zo={}));var $o;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})($o||($o={}));var Jo;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Jo||(Jo={}));var ou;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(ou||(ou={}));var nu;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(nu||(nu={}));var Qo;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Qo||(Qo={}));var li;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(li||(li={}));var su;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(su||(su={}));var en;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(en||(en={}));var au;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(au||(au={}));var Od={MIPMAP_TEXTURES:Jo.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:en.NONE,SPRITE_MAX_TEXTURES:wd(32),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:Qo.AUTO,GC_MAX_IDLE:60*60,GC_MAX_CHECK_COUNT:60*10,WRAP_MODE:$o.CLAMP,SCALE_MODE:Zo.LINEAR,PRECISION_VERTEX:li.HIGH,PRECISION_FRAGMENT:ft.apple.device?li.HIGH:li.MEDIUM,CAN_UPLOAD_SAME_BUFFER:Sd(),CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};yr.isMobile=ft;yr.settings=Od});var uu=R((Zx,tn)=>{"use strict";var Cd=Object.prototype.hasOwnProperty,Re="~";function ui(){}h(ui,"Events");Object.create&&(ui.prototype=Object.create(null),new ui().__proto__||(Re=!1));function Nd(e,i,t){this.fn=e,this.context=i,this.once=t||!1}h(Nd,"EE");function lu(e,i,t,r,o){if(typeof t!="function")throw new TypeError("The listener must be a function");var n=new Nd(t,r||e,o),s=Re?Re+i:i;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],n]:e._events[s].push(n):(e._events[s]=n,e._eventsCount++),e}h(lu,"addListener");function _r(e,i){--e._eventsCount==0?e._events=new ui:delete e._events[i]}h(_r,"clearEvent");function xe(){this._events=new ui,this._eventsCount=0}h(xe,"EventEmitter");xe.prototype.eventNames=h(function(){var i=[],t,r;if(this._eventsCount===0)return i;for(r in t=this._events)Cd.call(t,r)&&i.push(Re?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},"eventNames");xe.prototype.listeners=h(function(i){var t=Re?Re+i:i,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,n=r.length,s=new Array(n);o<n;o++)s[o]=r[o].fn;return s},"listeners");xe.prototype.listenerCount=h(function(i){var t=Re?Re+i:i,r=this._events[t];return r?r.fn?1:r.length:0},"listenerCount");xe.prototype.emit=h(function(i,t,r,o,n,s){var a=Re?Re+i:i;if(!this._events[a])return!1;var l=this._events[a],u=arguments.length,p,f;if(l.fn){switch(l.once&&this.removeListener(i,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,o),!0;case 5:return l.fn.call(l.context,t,r,o,n),!0;case 6:return l.fn.call(l.context,t,r,o,n,s),!0}for(f=1,p=new Array(u-1);f<u;f++)p[f-1]=arguments[f];l.fn.apply(l.context,p)}else{var c=l.length,d;for(f=0;f<c;f++)switch(l[f].once&&this.removeListener(i,l[f].fn,void 0,!0),u){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,t);break;case 3:l[f].fn.call(l[f].context,t,r);break;case 4:l[f].fn.call(l[f].context,t,r,o);break;default:if(!p)for(d=1,p=new Array(u-1);d<u;d++)p[d-1]=arguments[d];l[f].fn.apply(l[f].context,p)}}return!0},"emit");xe.prototype.on=h(function(i,t,r){return lu(this,i,t,r,!1)},"on");xe.prototype.once=h(function(i,t,r){return lu(this,i,t,r,!0)},"once");xe.prototype.removeListener=h(function(i,t,r,o){var n=Re?Re+i:i;if(!this._events[n])return this;if(!t)return _r(this,n),this;var s=this._events[n];if(s.fn)s.fn===t&&(!o||s.once)&&(!r||s.context===r)&&_r(this,n);else{for(var a=0,l=[],u=s.length;a<u;a++)(s[a].fn!==t||o&&!s[a].once||r&&s[a].context!==r)&&l.push(s[a]);l.length?this._events[n]=l.length===1?l[0]:l:_r(this,n)}return this},"removeListener");xe.prototype.removeAllListeners=h(function(i){var t;return i?(t=Re?Re+i:i,this._events[t]&&_r(this,t)):(this._events=new ui,this._eventsCount=0),this},"removeAllListeners");xe.prototype.off=xe.prototype.removeListener;xe.prototype.addListener=xe.prototype.on;xe.prefixed=Re;xe.EventEmitter=xe;typeof tn!="undefined"&&(tn.exports=xe)});var du=R(($x,sn)=>{"use strict";sn.exports=br;sn.exports.default=br;function br(e,i,t){t=t||2;var r=i&&i.length,o=r?i[0]*t:e.length,n=hu(e,0,o,t,!0),s=[];if(!n||n.next===n.prev)return s;var a,l,u,p,f,c,d;if(r&&(n=Dd(e,i,n,t)),e.length>80*t){a=u=e[0],l=p=e[1];for(var v=t;v<o;v+=t)f=e[v],c=e[v+1],f<a&&(a=f),c<l&&(l=c),f>u&&(u=f),c>p&&(p=c);d=Math.max(u-a,p-l),d=d!==0?1/d:0}return hi(n,s,t,a,l,d),s}h(br,"earcut");function hu(e,i,t,r,o){var n,s;if(o===nn(e,i,t,r)>0)for(n=i;n<t;n+=r)s=cu(n,e[n],e[n+1],s);else for(n=t-r;n>=i;n-=r)s=cu(n,e[n],e[n+1],s);return s&&gr(s,s.next)&&(fi(s),s=s.next),s}h(hu,"linkedList");function it(e,i){if(!e)return e;i||(i=e);var t=e,r;do if(r=!1,!t.steiner&&(gr(t,t.next)||ue(t.prev,t,t.next)===0)){if(fi(t),t=i=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==i);return i}h(it,"filterPoints");function hi(e,i,t,r,o,n,s){if(!!e){!s&&n&&Xd(e,r,o,n);for(var a=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,n?Fd(e,r,o,n):Md(e)){i.push(l.i/t),i.push(e.i/t),i.push(u.i/t),fi(e),e=u.next,a=u.next;continue}if(e=u,e===a){s?s===1?(e=Ud(it(e),i,t),hi(e,i,t,r,o,n,2)):s===2&&Ld(e,i,t,r,o,n):hi(it(e),i,t,r,o,n,1);break}}}}h(hi,"earcutLinked");function Md(e){var i=e.prev,t=e,r=e.next;if(ue(i,t,r)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(Ft(i.x,i.y,t.x,t.y,r.x,r.y,o.x,o.y)&&ue(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}h(Md,"isEar");function Fd(e,i,t,r){var o=e.prev,n=e,s=e.next;if(ue(o,n,s)>=0)return!1;for(var a=o.x<n.x?o.x<s.x?o.x:s.x:n.x<s.x?n.x:s.x,l=o.y<n.y?o.y<s.y?o.y:s.y:n.y<s.y?n.y:s.y,u=o.x>n.x?o.x>s.x?o.x:s.x:n.x>s.x?n.x:s.x,p=o.y>n.y?o.y>s.y?o.y:s.y:n.y>s.y?n.y:s.y,f=rn(a,l,i,t,r),c=rn(u,p,i,t,r),d=e.prevZ,v=e.nextZ;d&&d.z>=f&&v&&v.z<=c;){if(d!==e.prev&&d!==e.next&&Ft(o.x,o.y,n.x,n.y,s.x,s.y,d.x,d.y)&&ue(d.prev,d,d.next)>=0||(d=d.prevZ,v!==e.prev&&v!==e.next&&Ft(o.x,o.y,n.x,n.y,s.x,s.y,v.x,v.y)&&ue(v.prev,v,v.next)>=0))return!1;v=v.nextZ}for(;d&&d.z>=f;){if(d!==e.prev&&d!==e.next&&Ft(o.x,o.y,n.x,n.y,s.x,s.y,d.x,d.y)&&ue(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=c;){if(v!==e.prev&&v!==e.next&&Ft(o.x,o.y,n.x,n.y,s.x,s.y,v.x,v.y)&&ue(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}h(Fd,"isEarHashed");function Ud(e,i,t){var r=e;do{var o=r.prev,n=r.next.next;!gr(o,n)&&pu(o,r,r.next,n)&&pi(o,n)&&pi(n,o)&&(i.push(o.i/t),i.push(r.i/t),i.push(n.i/t),fi(r),fi(r.next),r=e=n),r=r.next}while(r!==e);return it(r)}h(Ud,"cureLocalIntersections");function Ld(e,i,t,r,o,n){var s=e;do{for(var a=s.next.next;a!==s.prev;){if(s.i!==a.i&&qd(s,a)){var l=fu(s,a);s=it(s,s.next),l=it(l,l.next),hi(s,i,t,r,o,n),hi(l,i,t,r,o,n);return}a=a.next}s=s.next}while(s!==e)}h(Ld,"splitEarcut");function Dd(e,i,t,r){var o=[],n,s,a,l,u;for(n=0,s=i.length;n<s;n++)a=i[n]*r,l=n<s-1?i[n+1]*r:e.length,u=hu(e,a,l,r,!1),u===u.next&&(u.steiner=!0),o.push(Vd(u));for(o.sort(Bd),n=0;n<o.length;n++)t=Gd(o[n],t),t=it(t,t.next);return t}h(Dd,"eliminateHoles");function Bd(e,i){return e.x-i.x}h(Bd,"compareX");function Gd(e,i){var t=kd(e,i);if(!t)return i;var r=fu(t,e),o=it(t,t.next);return it(r,r.next),i===t?o:i}h(Gd,"eliminateHole");function kd(e,i){var t=i,r=e.x,o=e.y,n=-1/0,s;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){var a=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(a<=r&&a>n){if(n=a,a===r){if(o===t.y)return t;if(o===t.next.y)return t.next}s=t.x<t.next.x?t:t.next}}t=t.next}while(t!==i);if(!s)return null;if(r===n)return s;var l=s,u=s.x,p=s.y,f=1/0,c;t=s;do r>=t.x&&t.x>=u&&r!==t.x&&Ft(o<p?r:n,o,u,p,o<p?n:r,o,t.x,t.y)&&(c=Math.abs(o-t.y)/(r-t.x),pi(t,e)&&(c<f||c===f&&(t.x>s.x||t.x===s.x&&Hd(s,t)))&&(s=t,f=c)),t=t.next;while(t!==l);return s}h(kd,"findHoleBridge");function Hd(e,i){return ue(e.prev,e,i.prev)<0&&ue(i.next,e,e.next)<0}h(Hd,"sectorContainsSector");function Xd(e,i,t,r){var o=e;do o.z===null&&(o.z=rn(o.x,o.y,i,t,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,jd(o)}h(Xd,"indexCurve");function jd(e){var i,t,r,o,n,s,a,l,u=1;do{for(t=e,e=null,n=null,s=0;t;){for(s++,r=t,a=0,i=0;i<u&&(a++,r=r.nextZ,!!r);i++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(o=t,t=t.nextZ,a--):(o=r,r=r.nextZ,l--),n?n.nextZ=o:e=o,o.prevZ=n,n=o;t=r}n.nextZ=null,u*=2}while(s>1);return e}h(jd,"sortLinked");function rn(e,i,t,r,o){return e=32767*(e-t)*o,i=32767*(i-r)*o,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e|i<<1}h(rn,"zOrder");function Vd(e){var i=e,t=e;do(i.x<t.x||i.x===t.x&&i.y<t.y)&&(t=i),i=i.next;while(i!==e);return t}h(Vd,"getLeftmost");function Ft(e,i,t,r,o,n,s,a){return(o-s)*(i-a)-(e-s)*(n-a)>=0&&(e-s)*(r-a)-(t-s)*(i-a)>=0&&(t-s)*(n-a)-(o-s)*(r-a)>=0}h(Ft,"pointInTriangle");function qd(e,i){return e.next.i!==i.i&&e.prev.i!==i.i&&!Yd(e,i)&&(pi(e,i)&&pi(i,e)&&Wd(e,i)&&(ue(e.prev,e,i.prev)||ue(e,i.prev,i))||gr(e,i)&&ue(e.prev,e,e.next)>0&&ue(i.prev,i,i.next)>0)}h(qd,"isValidDiagonal");function ue(e,i,t){return(i.y-e.y)*(t.x-i.x)-(i.x-e.x)*(t.y-i.y)}h(ue,"area");function gr(e,i){return e.x===i.x&&e.y===i.y}h(gr,"equals");function pu(e,i,t,r){var o=xr(ue(e,i,t)),n=xr(ue(e,i,r)),s=xr(ue(t,r,e)),a=xr(ue(t,r,i));return!!(o!==n&&s!==a||o===0&&Tr(e,t,i)||n===0&&Tr(e,r,i)||s===0&&Tr(t,e,r)||a===0&&Tr(t,i,r))}h(pu,"intersects");function Tr(e,i,t){return i.x<=Math.max(e.x,t.x)&&i.x>=Math.min(e.x,t.x)&&i.y<=Math.max(e.y,t.y)&&i.y>=Math.min(e.y,t.y)}h(Tr,"onSegment");function xr(e){return e>0?1:e<0?-1:0}h(xr,"sign");function Yd(e,i){var t=e;do{if(t.i!==e.i&&t.next.i!==e.i&&t.i!==i.i&&t.next.i!==i.i&&pu(t,t.next,e,i))return!0;t=t.next}while(t!==e);return!1}h(Yd,"intersectsPolygon");function pi(e,i){return ue(e.prev,e,e.next)<0?ue(e,i,e.next)>=0&&ue(e,e.prev,i)>=0:ue(e,i,e.prev)<0||ue(e,e.next,i)<0}h(pi,"locallyInside");function Wd(e,i){var t=e,r=!1,o=(e.x+i.x)/2,n=(e.y+i.y)/2;do t.y>n!=t.next.y>n&&t.next.y!==t.y&&o<(t.next.x-t.x)*(n-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==e);return r}h(Wd,"middleInside");function fu(e,i){var t=new on(e.i,e.x,e.y),r=new on(i.i,i.x,i.y),o=e.next,n=i.prev;return e.next=i,i.prev=e,t.next=o,o.prev=t,r.next=t,t.prev=r,n.next=r,r.prev=n,r}h(fu,"splitPolygon");function cu(e,i,t,r){var o=new on(e,i,t);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}h(cu,"insertNode");function fi(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}h(fi,"removeNode");function on(e,i,t){this.i=e,this.x=i,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}h(on,"Node");br.deviation=function(e,i,t,r){var o=i&&i.length,n=o?i[0]*t:e.length,s=Math.abs(nn(e,0,n,t));if(o)for(var a=0,l=i.length;a<l;a++){var u=i[a]*t,p=a<l-1?i[a+1]*t:e.length;s-=Math.abs(nn(e,u,p,t))}var f=0;for(a=0;a<r.length;a+=3){var c=r[a]*t,d=r[a+1]*t,v=r[a+2]*t;f+=Math.abs((e[c]-e[v])*(e[d+1]-e[c+1])-(e[c]-e[d])*(e[v+1]-e[c+1]))}return s===0&&f===0?0:Math.abs((f-s)/s)};function nn(e,i,t,r){for(var o=0,n=i,s=t-r;n<t;n+=r)o+=(e[s]-e[n])*(e[n+1]+e[s+1]),s=n;return o}h(nn,"signedArea");br.flatten=function(e){for(var i=e[0][0].length,t={vertices:[],holes:[],dimensions:i},r=0,o=0;o<e.length;o++){for(var n=0;n<e[o].length;n++)for(var s=0;s<i;s++)t.vertices.push(e[o][n][s]);o>0&&(r+=e[o-1].length,t.holes.push(r))}return t}});var vu=R((Ut,Lt)=>{(function(e){var i=typeof Ut=="object"&&Ut&&!Ut.nodeType&&Ut,t=typeof Lt=="object"&&Lt&&!Lt.nodeType&&Lt,r=typeof global=="object"&&global;(r.global===r||r.window===r||r.self===r)&&(e=r);var o,n=2147483647,s=36,a=1,l=26,u=38,p=700,f=72,c=128,d="-",v=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,g={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},T=s-a,x=Math.floor,I=String.fromCharCode,b;function E(C){throw RangeError(g[C])}h(E,"error");function O(C,P){for(var V=C.length,K=[];V--;)K[V]=P(C[V]);return K}h(O,"map");function F(C,P){var V=C.split("@"),K="";V.length>1&&(K=V[0]+"@",C=V[1]),C=C.replace(y,".");var Q=C.split("."),ne=O(Q,P).join(".");return K+ne}h(F,"mapDomain");function A(C){for(var P=[],V=0,K=C.length,Q,ne;V<K;)Q=C.charCodeAt(V++),Q>=55296&&Q<=56319&&V<K?(ne=C.charCodeAt(V++),(ne&64512)==56320?P.push(((Q&1023)<<10)+(ne&1023)+65536):(P.push(Q),V--)):P.push(Q);return P}h(A,"ucs2decode");function w(C){return O(C,function(P){var V="";return P>65535&&(P-=65536,V+=I(P>>>10&1023|55296),P=56320|P&1023),V+=I(P),V}).join("")}h(w,"ucs2encode");function B(C){return C-48<10?C-22:C-65<26?C-65:C-97<26?C-97:s}h(B,"basicToDigit");function U(C,P){return C+22+75*(C<26)-((P!=0)<<5)}h(U,"digitToBasic");function W(C,P,V){var K=0;for(C=V?x(C/p):C>>1,C+=x(C/P);C>T*l>>1;K+=s)C=x(C/T);return x(K+(T+1)*C/(C+u))}h(W,"adapt");function ie(C){var P=[],V=C.length,K,Q=0,ne=c,re=f,me,de,ve,be,$,se,k,ce,ye;for(me=C.lastIndexOf(d),me<0&&(me=0),de=0;de<me;++de)C.charCodeAt(de)>=128&&E("not-basic"),P.push(C.charCodeAt(de));for(ve=me>0?me+1:0;ve<V;){for(be=Q,$=1,se=s;ve>=V&&E("invalid-input"),k=B(C.charCodeAt(ve++)),(k>=s||k>x((n-Q)/$))&&E("overflow"),Q+=k*$,ce=se<=re?a:se>=re+l?l:se-re,!(k<ce);se+=s)ye=s-ce,$>x(n/ye)&&E("overflow"),$*=ye;K=P.length+1,re=W(Q-be,K,be==0),x(Q/K)>n-ne&&E("overflow"),ne+=x(Q/K),Q%=K,P.splice(Q++,0,ne)}return w(P)}h(ie,"decode");function M(C){var P,V,K,Q,ne,re,me,de,ve,be,$,se=[],k,ce,ye,Y;for(C=A(C),k=C.length,P=c,V=0,ne=f,re=0;re<k;++re)$=C[re],$<128&&se.push(I($));for(K=Q=se.length,Q&&se.push(d);K<k;){for(me=n,re=0;re<k;++re)$=C[re],$>=P&&$<me&&(me=$);for(ce=K+1,me-P>x((n-V)/ce)&&E("overflow"),V+=(me-P)*ce,P=me,re=0;re<k;++re)if($=C[re],$<P&&++V>n&&E("overflow"),$==P){for(de=V,ve=s;be=ve<=ne?a:ve>=ne+l?l:ve-ne,!(de<be);ve+=s)Y=de-be,ye=s-be,se.push(I(U(be+Y%ye,0))),de=x(Y/ye);se.push(I(U(de,0))),ne=W(V,ce,K==Q),V=0,++K}++V,++P}return se.join("")}h(M,"encode");function N(C){return F(C,function(P){return v.test(P)?ie(P.slice(4).toLowerCase()):P})}h(N,"toUnicode");function X(C){return F(C,function(P){return m.test(P)?"xn--"+M(P):P})}if(h(X,"toASCII"),o={version:"1.3.2",ucs2:{decode:A,encode:w},decode:ie,encode:M,toASCII:X,toUnicode:N},typeof define=="function"&&typeof define.amd=="object"&&define.amd)define("punycode",function(){return o});else if(i&&t)if(Lt.exports==i)t.exports=o;else for(b in o)o.hasOwnProperty(b)&&(i[b]=o[b]);else e.punycode=o})(Ut)});var yu=R((Jx,mu)=>{"use strict";mu.exports={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}}});var bu=R((Qx,_u)=>{"use strict";function zd(e,i){return Object.prototype.hasOwnProperty.call(e,i)}h(zd,"hasOwnProperty");_u.exports=function(e,i,t,r){i=i||"&",t=t||"=";var o={};if(typeof e!="string"||e.length===0)return o;var n=/\+/g;e=e.split(i);var s=1e3;r&&typeof r.maxKeys=="number"&&(s=r.maxKeys);var a=e.length;s>0&&a>s&&(a=s);for(var l=0;l<a;++l){var u=e[l].replace(n,"%20"),p=u.indexOf(t),f,c,d,v;p>=0?(f=u.substr(0,p),c=u.substr(p+1)):(f=u,c=""),d=decodeURIComponent(f),v=decodeURIComponent(c),zd(o,d)?Array.isArray(o[d])?o[d].push(v):o[d]=[o[d],v]:o[d]=v}return o}});var Tu=R((e2,gu)=>{"use strict";var ci=h(function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},"stringifyPrimitive");gu.exports=function(e,i,t,r){return i=i||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(o){var n=encodeURIComponent(ci(o))+t;return Array.isArray(e[o])?e[o].map(function(s){return n+encodeURIComponent(ci(s))}).join(i):n+encodeURIComponent(ci(e[o]))}).join(i):r?encodeURIComponent(ci(r))+t+encodeURIComponent(ci(e)):""}});var xu=R(di=>{"use strict";di.decode=di.parse=bu();di.encode=di.stringify=Tu()});var Au=R(Bt=>{"use strict";var Kd=vu(),Ve=yu();Bt.parse=vi;Bt.resolve=nv;Bt.resolveObject=sv;Bt.format=ov;Bt.Url=Ne;function Ne(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}h(Ne,"Url");var Zd=/^([a-z0-9.+-]+:)/i,$d=/:[0-9]*$/,Jd=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Qd=["<",">",'"',"`"," ","\r",`
`,"	"],ev=["{","}","|","\\","^","`"].concat(Qd),an=["'"].concat(ev),Eu=["%","/","?",";","#"].concat(an),Ru=["/","?","#"],tv=255,Iu=/^[+a-z0-9A-Z_-]{0,63}$/,iv=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,rv={javascript:!0,"javascript:":!0},ln={javascript:!0,"javascript:":!0},Dt={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},un=xu();function vi(e,i,t){if(e&&Ve.isObject(e)&&e instanceof Ne)return e;var r=new Ne;return r.parse(e,i,t),r}h(vi,"urlParse");Ne.prototype.parse=function(e,i,t){if(!Ve.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e.indexOf("?"),o=r!==-1&&r<e.indexOf("#")?"?":"#",n=e.split(o),s=/\\/g;n[0]=n[0].replace(s,"/"),e=n.join(o);var a=e;if(a=a.trim(),!t&&e.split("#").length===1){var l=Jd.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],i?this.query=un.parse(this.search.substr(1)):this.query=this.search.substr(1)):i&&(this.search="",this.query={}),this}var u=Zd.exec(a);if(u){u=u[0];var p=u.toLowerCase();this.protocol=p,a=a.substr(u.length)}if(t||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=a.substr(0,2)==="//";f&&!(u&&ln[u])&&(a=a.substr(2),this.slashes=!0)}if(!ln[u]&&(f||u&&!Dt[u])){for(var c=-1,d=0;d<Ru.length;d++){var v=a.indexOf(Ru[d]);v!==-1&&(c===-1||v<c)&&(c=v)}var m,y;c===-1?y=a.lastIndexOf("@"):y=a.lastIndexOf("@",c),y!==-1&&(m=a.slice(0,y),a=a.slice(y+1),this.auth=decodeURIComponent(m)),c=-1;for(var d=0;d<Eu.length;d++){var v=a.indexOf(Eu[d]);v!==-1&&(c===-1||v<c)&&(c=v)}c===-1&&(c=a.length),this.host=a.slice(0,c),a=a.slice(c),this.parseHost(),this.hostname=this.hostname||"";var g=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!g)for(var T=this.hostname.split(/\./),d=0,x=T.length;d<x;d++){var I=T[d];if(!!I&&!I.match(Iu)){for(var b="",E=0,O=I.length;E<O;E++)I.charCodeAt(E)>127?b+="x":b+=I[E];if(!b.match(Iu)){var F=T.slice(0,d),A=T.slice(d+1),w=I.match(iv);w&&(F.push(w[1]),A.unshift(w[2])),A.length&&(a="/"+A.join(".")+a),this.hostname=F.join(".");break}}}this.hostname.length>tv?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=Kd.toASCII(this.hostname));var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!rv[p])for(var d=0,x=an.length;d<x;d++){var W=an[d];if(a.indexOf(W)!==-1){var ie=encodeURIComponent(W);ie===W&&(ie=escape(W)),a=a.split(W).join(ie)}}var M=a.indexOf("#");M!==-1&&(this.hash=a.substr(M),a=a.slice(0,M));var N=a.indexOf("?");if(N!==-1?(this.search=a.substr(N),this.query=a.substr(N+1),i&&(this.query=un.parse(this.query)),a=a.slice(0,N)):i&&(this.search="",this.query={}),a&&(this.pathname=a),Dt[p]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",X=this.search||"";this.path=B+X}return this.href=this.format(),this};function ov(e){return Ve.isString(e)&&(e=vi(e)),e instanceof Ne?e.format():Ne.prototype.format.call(e)}h(ov,"urlFormat");Ne.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var i=this.protocol||"",t=this.pathname||"",r=this.hash||"",o=!1,n="";this.host?o=e+this.host:this.hostname&&(o=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&Ve.isObject(this.query)&&Object.keys(this.query).length&&(n=un.stringify(this.query));var s=this.search||n&&"?"+n||"";return i&&i.substr(-1)!==":"&&(i+=":"),this.slashes||(!i||Dt[i])&&o!==!1?(o="//"+(o||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):o||(o=""),r&&r.charAt(0)!=="#"&&(r="#"+r),s&&s.charAt(0)!=="?"&&(s="?"+s),t=t.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),s=s.replace("#","%23"),i+o+t+s+r};function nv(e,i){return vi(e,!1,!0).resolve(i)}h(nv,"urlResolve");Ne.prototype.resolve=function(e){return this.resolveObject(vi(e,!1,!0)).format()};function sv(e,i){return e?vi(e,!1,!0).resolveObject(i):i}h(sv,"urlResolveObject");Ne.prototype.resolveObject=function(e){if(Ve.isString(e)){var i=new Ne;i.parse(e,!1,!0),e=i}for(var t=new Ne,r=Object.keys(this),o=0;o<r.length;o++){var n=r[o];t[n]=this[n]}if(t.hash=e.hash,e.href==="")return t.href=t.format(),t;if(e.slashes&&!e.protocol){for(var s=Object.keys(e),a=0;a<s.length;a++){var l=s[a];l!=="protocol"&&(t[l]=e[l])}return Dt[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(e.protocol&&e.protocol!==t.protocol){if(!Dt[e.protocol]){for(var u=Object.keys(e),p=0;p<u.length;p++){var f=u[p];t[f]=e[f]}return t.href=t.format(),t}if(t.protocol=e.protocol,!e.host&&!ln[e.protocol]){for(var x=(e.pathname||"").split("/");x.length&&!(e.host=x.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),t.pathname=x.join("/")}else t.pathname=e.pathname;if(t.search=e.search,t.query=e.query,t.host=e.host||"",t.auth=e.auth,t.hostname=e.hostname||e.host,t.port=e.port,t.pathname||t.search){var c=t.pathname||"",d=t.search||"";t.path=c+d}return t.slashes=t.slashes||e.slashes,t.href=t.format(),t}var v=t.pathname&&t.pathname.charAt(0)==="/",m=e.host||e.pathname&&e.pathname.charAt(0)==="/",y=m||v||t.host&&e.pathname,g=y,T=t.pathname&&t.pathname.split("/")||[],x=e.pathname&&e.pathname.split("/")||[],I=t.protocol&&!Dt[t.protocol];if(I&&(t.hostname="",t.port=null,t.host&&(T[0]===""?T[0]=t.host:T.unshift(t.host)),t.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(x[0]===""?x[0]=e.host:x.unshift(e.host)),e.host=null),y=y&&(x[0]===""||T[0]==="")),m)t.host=e.host||e.host===""?e.host:t.host,t.hostname=e.hostname||e.hostname===""?e.hostname:t.hostname,t.search=e.search,t.query=e.query,T=x;else if(x.length)T||(T=[]),T.pop(),T=T.concat(x),t.search=e.search,t.query=e.query;else if(!Ve.isNullOrUndefined(e.search)){if(I){t.hostname=t.host=T.shift();var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return t.search=e.search,t.query=e.query,(!Ve.isNull(t.pathname)||!Ve.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!T.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var E=T.slice(-1)[0],O=(t.host||e.host||T.length>1)&&(E==="."||E==="..")||E==="",F=0,A=T.length;A>=0;A--)E=T[A],E==="."?T.splice(A,1):E===".."?(T.splice(A,1),F++):F&&(T.splice(A,1),F--);if(!y&&!g)for(;F--;F)T.unshift("..");y&&T[0]!==""&&(!T[0]||T[0].charAt(0)!=="/")&&T.unshift(""),O&&T.join("/").substr(-1)!=="/"&&T.push("");var w=T[0]===""||T[0]&&T[0].charAt(0)==="/";if(I){t.hostname=t.host=w?"":T.length?T.shift():"";var b=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;b&&(t.auth=b.shift(),t.host=t.hostname=b.shift())}return y=y||t.host&&T.length,y&&!w&&T.unshift(""),T.length?t.pathname=T.join("/"):(t.pathname=null,t.path=null),(!Ve.isNull(t.pathname)||!Ve.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=e.auth||t.auth,t.slashes=t.slashes||e.slashes,t.href=t.format(),t};Ne.prototype.parseHost=function(){var e=this.host,i=$d.exec(e);i&&(i=i[0],i!==":"&&(this.port=i.substr(1)),e=e.substr(0,e.length-i.length)),e&&(this.hostname=e)}});var Le=R(H=>{"use strict";Object.defineProperty(H,"__esModule",{value:!0});(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(H.ENV||(H.ENV={}));(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(H.RENDERER_TYPE||(H.RENDERER_TYPE={}));(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(H.BUFFER_BITS||(H.BUFFER_BITS={}));(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(H.BLEND_MODES||(H.BLEND_MODES={}));(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(H.DRAW_MODES||(H.DRAW_MODES={}));(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(H.FORMATS||(H.FORMATS={}));(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(H.TARGETS||(H.TARGETS={}));(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(H.TYPES||(H.TYPES={}));(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(H.SAMPLER_TYPES||(H.SAMPLER_TYPES={}));(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(H.SCALE_MODES||(H.SCALE_MODES={}));(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(H.WRAP_MODES||(H.WRAP_MODES={}));(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(H.MIPMAP_MODES||(H.MIPMAP_MODES={}));(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(H.ALPHA_MODES||(H.ALPHA_MODES={}));(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(H.CLEAR_MODES||(H.CLEAR_MODES={}));(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(H.GC_MODES||(H.GC_MODES={}));(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(H.PRECISION||(H.PRECISION={}));(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(H.MASK_TYPES||(H.MASK_TYPES={}));(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(H.MSAA_QUALITY||(H.MSAA_QUALITY={}));(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(H.BUFFER_TYPE||(H.BUFFER_TYPE={}))});var ge=R(j=>{"use strict";Object.defineProperty(j,"__esModule",{value:!0});function Pu(e){return e&&typeof e=="object"&&"default"in e?e.default:e}h(Pu,"_interopDefault");var Gt=Se(),av=Pu(uu()),lv=Pu(du()),hn=Au(),Me=Le(),wu={parse:hn.parse,format:hn.format,resolve:hn.resolve};Gt.settings.RETINA_PREFIX=/@([0-9\.]+)x/;Gt.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var pn=!1,Su="6.1.3";function uv(){pn=!0}h(uv,"skipHello");function hv(e){var i;if(!pn){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=[`
 %c %c %c PixiJS `+Su+" - \u2730 "+e+` \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 

`,"background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(i=self.console).log.apply(i,t)}else self.console&&self.console.log("PixiJS "+Su+" - "+e+" - http://www.pixijs.com/");pn=!0}}h(hv,"sayHello");var fn;function pv(){return typeof fn=="undefined"&&(fn=h(function(){var i={stencil:!0,failIfMajorPerformanceCaveat:Gt.settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),o=!!(r&&r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,o}catch{return!1}},"supported")()),fn}h(pv,"isWebGLSupported");var fv="#f0f8ff",cv="#faebd7",dv="#00ffff",vv="#7fffd4",mv="#f0ffff",yv="#f5f5dc",_v="#ffe4c4",bv="#000000",gv="#ffebcd",Tv="#0000ff",xv="#8a2be2",Ev="#a52a2a",Rv="#deb887",Iv="#5f9ea0",Av="#7fff00",Pv="#d2691e",wv="#ff7f50",Sv="#6495ed",Ov="#fff8dc",Cv="#dc143c",Nv="#00ffff",Mv="#00008b",Fv="#008b8b",Uv="#b8860b",Lv="#a9a9a9",Dv="#006400",Bv="#a9a9a9",Gv="#bdb76b",kv="#8b008b",Hv="#556b2f",Xv="#ff8c00",jv="#9932cc",Vv="#8b0000",qv="#e9967a",Yv="#8fbc8f",Wv="#483d8b",zv="#2f4f4f",Kv="#2f4f4f",Zv="#00ced1",$v="#9400d3",Jv="#ff1493",Qv="#00bfff",e0="#696969",t0="#696969",i0="#1e90ff",r0="#b22222",o0="#fffaf0",n0="#228b22",s0="#ff00ff",a0="#dcdcdc",l0="#f8f8ff",u0="#daa520",h0="#ffd700",p0="#808080",f0="#008000",c0="#adff2f",d0="#808080",v0="#f0fff0",m0="#ff69b4",y0="#cd5c5c",_0="#4b0082",b0="#fffff0",g0="#f0e68c",T0="#fff0f5",x0="#e6e6fa",E0="#7cfc00",R0="#fffacd",I0="#add8e6",A0="#f08080",P0="#e0ffff",w0="#fafad2",S0="#d3d3d3",O0="#90ee90",C0="#d3d3d3",N0="#ffb6c1",M0="#ffa07a",F0="#20b2aa",U0="#87cefa",L0="#778899",D0="#778899",B0="#b0c4de",G0="#ffffe0",k0="#00ff00",H0="#32cd32",X0="#faf0e6",j0="#ff00ff",V0="#800000",q0="#66cdaa",Y0="#0000cd",W0="#ba55d3",z0="#9370db",K0="#3cb371",Z0="#7b68ee",$0="#00fa9a",J0="#48d1cc",Q0="#c71585",em="#191970",tm="#f5fffa",im="#ffe4e1",rm="#ffe4b5",om="#ffdead",nm="#000080",sm="#fdf5e6",am="#808000",lm="#6b8e23",um="#ffa500",hm="#ff4500",pm="#da70d6",fm="#eee8aa",cm="#98fb98",dm="#afeeee",vm="#db7093",mm="#ffefd5",ym="#ffdab9",_m="#cd853f",bm="#ffc0cb",gm="#dda0dd",Tm="#b0e0e6",xm="#800080",Em="#663399",Rm="#ff0000",Im="#bc8f8f",Am="#4169e1",Pm="#8b4513",wm="#fa8072",Sm="#f4a460",Om="#2e8b57",Cm="#fff5ee",Nm="#a0522d",Mm="#c0c0c0",Fm="#87ceeb",Um="#6a5acd",Lm="#708090",Dm="#708090",Bm="#fffafa",Gm="#00ff7f",km="#4682b4",Hm="#d2b48c",Xm="#008080",jm="#d8bfd8",Vm="#ff6347",qm="#40e0d0",Ym="#ee82ee",Wm="#f5deb3",zm="#ffffff",Km="#f5f5f5",Zm="#ffff00",$m="#9acd32",Jm={aliceblue:fv,antiquewhite:cv,aqua:dv,aquamarine:vv,azure:mv,beige:yv,bisque:_v,black:bv,blanchedalmond:gv,blue:Tv,blueviolet:xv,brown:Ev,burlywood:Rv,cadetblue:Iv,chartreuse:Av,chocolate:Pv,coral:wv,cornflowerblue:Sv,cornsilk:Ov,crimson:Cv,cyan:Nv,darkblue:Mv,darkcyan:Fv,darkgoldenrod:Uv,darkgray:Lv,darkgreen:Dv,darkgrey:Bv,darkkhaki:Gv,darkmagenta:kv,darkolivegreen:Hv,darkorange:Xv,darkorchid:jv,darkred:Vv,darksalmon:qv,darkseagreen:Yv,darkslateblue:Wv,darkslategray:zv,darkslategrey:Kv,darkturquoise:Zv,darkviolet:$v,deeppink:Jv,deepskyblue:Qv,dimgray:e0,dimgrey:t0,dodgerblue:i0,firebrick:r0,floralwhite:o0,forestgreen:n0,fuchsia:s0,gainsboro:a0,ghostwhite:l0,goldenrod:u0,gold:h0,gray:p0,green:f0,greenyellow:c0,grey:d0,honeydew:v0,hotpink:m0,indianred:y0,indigo:_0,ivory:b0,khaki:g0,lavenderblush:T0,lavender:x0,lawngreen:E0,lemonchiffon:R0,lightblue:I0,lightcoral:A0,lightcyan:P0,lightgoldenrodyellow:w0,lightgray:S0,lightgreen:O0,lightgrey:C0,lightpink:N0,lightsalmon:M0,lightseagreen:F0,lightskyblue:U0,lightslategray:L0,lightslategrey:D0,lightsteelblue:B0,lightyellow:G0,lime:k0,limegreen:H0,linen:X0,magenta:j0,maroon:V0,mediumaquamarine:q0,mediumblue:Y0,mediumorchid:W0,mediumpurple:z0,mediumseagreen:K0,mediumslateblue:Z0,mediumspringgreen:$0,mediumturquoise:J0,mediumvioletred:Q0,midnightblue:em,mintcream:tm,mistyrose:im,moccasin:rm,navajowhite:om,navy:nm,oldlace:sm,olive:am,olivedrab:lm,orange:um,orangered:hm,orchid:pm,palegoldenrod:fm,palegreen:cm,paleturquoise:dm,palevioletred:vm,papayawhip:mm,peachpuff:ym,peru:_m,pink:bm,plum:gm,powderblue:Tm,purple:xm,rebeccapurple:Em,red:Rm,rosybrown:Im,royalblue:Am,saddlebrown:Pm,salmon:wm,sandybrown:Sm,seagreen:Om,seashell:Cm,sienna:Nm,silver:Mm,skyblue:Fm,slateblue:Um,slategray:Lm,slategrey:Dm,snow:Bm,springgreen:Gm,steelblue:km,tan:Hm,teal:Xm,thistle:jm,tomato:Vm,turquoise:qm,violet:Ym,wheat:Wm,white:zm,whitesmoke:Km,yellow:Zm,yellowgreen:$m};function Qm(e,i){return i===void 0&&(i=[]),i[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(e&255)/255,i}h(Qm,"hex2rgb");function ey(e){var i=e.toString(16);return i="000000".substr(0,6-i.length)+i,"#"+i}h(ey,"hex2string");function ty(e){return typeof e=="string"&&(e=Jm[e.toLowerCase()]||e,e[0]==="#"&&(e=e.substr(1))),parseInt(e,16)}h(ty,"string2hex");function iy(e){return(e[0]*255<<16)+(e[1]*255<<8)+(e[2]*255|0)}h(iy,"rgb2hex");function ry(){for(var e=[],i=[],t=0;t<32;t++)e[t]=t,i[t]=t;e[Me.BLEND_MODES.NORMAL_NPM]=Me.BLEND_MODES.NORMAL,e[Me.BLEND_MODES.ADD_NPM]=Me.BLEND_MODES.ADD,e[Me.BLEND_MODES.SCREEN_NPM]=Me.BLEND_MODES.SCREEN,i[Me.BLEND_MODES.NORMAL]=Me.BLEND_MODES.NORMAL_NPM,i[Me.BLEND_MODES.ADD]=Me.BLEND_MODES.ADD_NPM,i[Me.BLEND_MODES.SCREEN]=Me.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(i),r.push(e),r}h(ry,"mapPremultipliedBlendModes");var Ou=ry();function oy(e,i){return Ou[i?1:0][e]}h(oy,"correctBlendMode");function ny(e,i,t,r){return t=t||new Float32Array(4),r||r===void 0?(t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i):(t[0]=e[0],t[1]=e[1],t[2]=e[2]),t[3]=i,t}h(ny,"premultiplyRgba");function sy(e,i){if(i===1)return(i*255<<24)+e;if(i===0)return 0;var t=e>>16&255,r=e>>8&255,o=e&255;return t=t*i+.5|0,r=r*i+.5|0,o=o*i+.5|0,(i*255<<24)+(t<<16)+(r<<8)+o}h(sy,"premultiplyTint");function ay(e,i,t,r){return t=t||new Float32Array(4),t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,(r||r===void 0)&&(t[0]*=i,t[1]*=i,t[2]*=i),t[3]=i,t}h(ay,"premultiplyTintToRgba");function ly(e,i){i===void 0&&(i=null);var t=e*6;if(i=i||new Uint16Array(t),i.length!==t)throw new Error("Out buffer length is incorrect, got "+i.length+" and expected "+t);for(var r=0,o=0;r<t;r+=6,o+=4)i[r+0]=o+0,i[r+1]=o+1,i[r+2]=o+2,i[r+3]=o+0,i[r+4]=o+2,i[r+5]=o+3;return i}h(ly,"createIndicesForQuads");function Cu(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}h(Cu,"getBufferType");var uy={Float32Array,Uint32Array,Int32Array,Uint8Array};function hy(e,i){for(var t=0,r=0,o={},n=0;n<e.length;n++)r+=i[n],t+=e[n].length;for(var s=new ArrayBuffer(t*4),a=null,l=0,n=0;n<e.length;n++){var u=i[n],p=e[n],f=Cu(p);o[f]||(o[f]=new uy[f](s)),a=o[f];for(var c=0;c<p.length;c++){var d=(c/u|0)*r+l,v=c%u;a[d+v]=p[c]}l+=u}return new Float32Array(s)}h(hy,"interleaveTypedArrays");function py(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}h(py,"nextPow2");function fy(e){return!(e&e-1)&&!!e}h(fy,"isPow2");function cy(e){var i=(e>65535?1:0)<<4;e>>>=i;var t=(e>255?1:0)<<3;return e>>>=t,i|=t,t=(e>15?1:0)<<2,e>>>=t,i|=t,t=(e>3?1:0)<<1,e>>>=t,i|=t,i|e>>1}h(cy,"log2");function dy(e,i,t){var r=e.length,o;if(!(i>=r||t===0)){t=i+t>r?r-i:t;var n=r-t;for(o=i;o<n;++o)e[o]=e[o+t];e.length=n}}h(dy,"removeItems");function vy(e){return e===0?0:e<0?-1:1}h(vy,"sign");var my=0;function yy(){return++my}h(yy,"uid");var Nu={};function _y(e,i,t){if(t===void 0&&(t=3),!Nu[i]){var r=new Error().stack;typeof r=="undefined"?console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e):(r=r.split(`
`).splice(t).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",i+`
Deprecated since v`+e),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",i+`
Deprecated since v`+e),console.warn(r))),Nu[i]=!0}}h(_y,"deprecation");var by={},mi=Object.create(null),yi=Object.create(null);function gy(){var e;for(e in mi)mi[e].destroy();for(e in yi)yi[e].destroy()}h(gy,"destroyTextureCache");function Ty(){var e;for(e in mi)delete mi[e];for(e in yi)delete yi[e]}h(Ty,"clearTextureCache");var xy=function(){function e(i,t,r){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||Gt.settings.RESOLUTION,this.resize(i,t)}return h(e,"CanvasRenderTarget"),e.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},e.prototype.resize=function(i,t){this.canvas.width=Math.round(i*this.resolution),this.canvas.height=Math.round(t*this.resolution)},e.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.canvas.width},set:function(i){this.canvas.width=Math.round(i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.canvas.height},set:function(i){this.canvas.height=Math.round(i)},enumerable:!1,configurable:!0}),e}();function Ey(e){var i=e.width,t=e.height,r=e.getContext("2d"),o=r.getImageData(0,0,i,t),n=o.data,s=n.length,a={top:null,left:null,right:null,bottom:null},l=null,u,p,f;for(u=0;u<s;u+=4)n[u+3]!==0&&(p=u/4%i,f=~~(u/4/i),a.top===null&&(a.top=f),(a.left===null||p<a.left)&&(a.left=p),(a.right===null||a.right<p)&&(a.right=p+1),(a.bottom===null||a.bottom<f)&&(a.bottom=f));return a.top!==null&&(i=a.right-a.left,t=a.bottom-a.top+1,l=r.getImageData(a.left,a.top,i,t)),{height:t,width:i,data:l}}h(Ey,"trimCanvas");var Mu=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Ry(e){var i=Mu.exec(e);if(i)return{mediaType:i[1]?i[1].toLowerCase():void 0,subType:i[2]?i[2].toLowerCase():void 0,charset:i[3]?i[3].toLowerCase():void 0,encoding:i[4]?i[4].toLowerCase():void 0,data:i[5]}}h(Ry,"decomposeDataUri");var Er;function Iy(e,i){if(i===void 0&&(i=self.location),e.indexOf("data:")===0)return"";i=i||self.location,Er||(Er=document.createElement("a")),Er.href=e;var t=wu.parse(Er.href),r=!t.port&&i.port===""||t.port===i.port;return t.hostname!==i.hostname||!r||t.protocol!==i.protocol?"anonymous":""}h(Iy,"determineCrossOrigin");function Ay(e,i){var t=Gt.settings.RETINA_PREFIX.exec(e);return t?parseFloat(t[1]):i!==void 0?i:1}h(Ay,"getResolutionOfUrl");Object.defineProperty(j,"isMobile",{enumerable:!0,get:function(){return Gt.isMobile}});j.EventEmitter=av;j.earcut=lv;j.BaseTextureCache=yi;j.CanvasRenderTarget=xy;j.DATA_URI=Mu;j.ProgramCache=by;j.TextureCache=mi;j.clearTextureCache=Ty;j.correctBlendMode=oy;j.createIndicesForQuads=ly;j.decomposeDataUri=Ry;j.deprecation=_y;j.destroyTextureCache=gy;j.determineCrossOrigin=Iy;j.getBufferType=Cu;j.getResolutionOfUrl=Ay;j.hex2rgb=Qm;j.hex2string=ey;j.interleaveTypedArrays=hy;j.isPow2=fy;j.isWebGLSupported=pv;j.log2=cy;j.nextPow2=py;j.premultiplyBlendMode=Ou;j.premultiplyRgba=ny;j.premultiplyTint=sy;j.premultiplyTintToRgba=ay;j.removeItems=dy;j.rgb2hex=iy;j.sayHello=hv;j.sign=vy;j.skipHello=uv;j.string2hex=ty;j.trimCanvas=Ey;j.uid=yy;j.url=wu});var _e=R(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});var Fu=Math.PI*2,Py=180/Math.PI,wy=Math.PI/180;(function(e){e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC"})(pe.SHAPES||(pe.SHAPES={}));var cn=function(){function e(i,t,r,o){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),o===void 0&&(o=0),this.x=Number(i),this.y=Number(t),this.width=Number(r),this.height=Number(o),this.type=pe.SHAPES.RECT}return h(e,"Rectangle"),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(e,"EMPTY",{get:function(){return new e(0,0,0,0)},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copyFrom=function(i){return this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this},e.prototype.copyTo=function(i){return i.x=this.x,i.y=this.y,i.width=this.width,i.height=this.height,i},e.prototype.contains=function(i,t){return this.width<=0||this.height<=0?!1:i>=this.x&&i<this.x+this.width&&t>=this.y&&t<this.y+this.height},e.prototype.pad=function(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),this.x-=i,this.y-=t,this.width+=i*2,this.height+=t*2,this},e.prototype.fit=function(i){var t=Math.max(this.x,i.x),r=Math.min(this.x+this.width,i.x+i.width),o=Math.max(this.y,i.y),n=Math.min(this.y+this.height,i.y+i.height);return this.x=t,this.width=Math.max(r-t,0),this.y=o,this.height=Math.max(n-o,0),this},e.prototype.ceil=function(i,t){i===void 0&&(i=1),t===void 0&&(t=.001);var r=Math.ceil((this.x+this.width-t)*i)/i,o=Math.ceil((this.y+this.height-t)*i)/i;return this.x=Math.floor((this.x+t)*i)/i,this.y=Math.floor((this.y+t)*i)/i,this.width=r-this.x,this.height=o-this.y,this},e.prototype.enlarge=function(i){var t=Math.min(this.x,i.x),r=Math.max(this.x+this.width,i.x+i.width),o=Math.min(this.y,i.y),n=Math.max(this.y+this.height,i.y+i.height);return this.x=t,this.width=r-t,this.y=o,this.height=n-o,this},e.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Sy=function(){function e(i,t,r){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),this.x=i,this.y=t,this.radius=r,this.type=pe.SHAPES.CIRC}return h(e,"Circle"),e.prototype.clone=function(){return new e(this.x,this.y,this.radius)},e.prototype.contains=function(i,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,o=this.x-i,n=this.y-t;return o*=o,n*=n,o+n<=r},e.prototype.getBounds=function(){return new cn(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)},e.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},e}(),Oy=function(){function e(i,t,r,o){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),o===void 0&&(o=0),this.x=i,this.y=t,this.width=r,this.height=o,this.type=pe.SHAPES.ELIP}return h(e,"Ellipse"),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.contains=function(i,t){if(this.width<=0||this.height<=0)return!1;var r=(i-this.x)/this.width,o=(t-this.y)/this.height;return r*=r,o*=o,r+o<=1},e.prototype.getBounds=function(){return new cn(this.x-this.width,this.y-this.height,this.width,this.height)},e.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},e}(),Cy=function(){function e(){for(var i=arguments,t=[],r=0;r<arguments.length;r++)t[r]=i[r];var o=Array.isArray(t[0])?t[0]:t;if(typeof o[0]!="number"){for(var n=[],s=0,a=o.length;s<a;s++)n.push(o[s].x,o[s].y);o=n}this.points=o,this.type=pe.SHAPES.POLY,this.closeStroke=!0}return h(e,"Polygon"),e.prototype.clone=function(){var i=this.points.slice(),t=new e(i);return t.closeStroke=this.closeStroke,t},e.prototype.contains=function(i,t){for(var r=!1,o=this.points.length/2,n=0,s=o-1;n<o;s=n++){var a=this.points[n*2],l=this.points[n*2+1],u=this.points[s*2],p=this.points[s*2+1],f=l>t!=p>t&&i<(u-a)*((t-l)/(p-l))+a;f&&(r=!r)}return r},e.prototype.toString=function(){return"[@pixi/math:Polygon"+("closeStroke="+this.closeStroke)+("points="+this.points.reduce(function(i,t){return i+", "+t},"")+"]")},e}(),Ny=function(){function e(i,t,r,o,n){i===void 0&&(i=0),t===void 0&&(t=0),r===void 0&&(r=0),o===void 0&&(o=0),n===void 0&&(n=20),this.x=i,this.y=t,this.width=r,this.height=o,this.radius=n,this.type=pe.SHAPES.RREC}return h(e,"RoundedRectangle"),e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height,this.radius)},e.prototype.contains=function(i,t){if(this.width<=0||this.height<=0)return!1;if(i>=this.x&&i<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||i>=this.x+this.radius&&i<=this.x+this.width-this.radius)return!0;var r=i-(this.x+this.radius),o=t-(this.y+this.radius),n=this.radius*this.radius;if(r*r+o*o<=n||(r=i-(this.x+this.width-this.radius),r*r+o*o<=n)||(o=t-(this.y+this.height-this.radius),r*r+o*o<=n)||(r=i-(this.x+this.radius),r*r+o*o<=n))return!0}return!1},e.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+("width="+this.width+" height="+this.height+" radius="+this.radius+"]")},e}(),dn=function(){function e(i,t){i===void 0&&(i=0),t===void 0&&(t=0),this.x=0,this.y=0,this.x=i,this.y=t}return h(e,"Point"),e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.copyFrom=function(i){return this.set(i.x,i.y),this},e.prototype.copyTo=function(i){return i.set(this.x,this.y),i},e.prototype.equals=function(i){return i.x===this.x&&i.y===this.y},e.prototype.set=function(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),this.x=i,this.y=t,this},e.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},e}(),_i=function(){function e(i,t,r,o){r===void 0&&(r=0),o===void 0&&(o=0),this._x=r,this._y=o,this.cb=i,this.scope=t}return h(e,"ObservablePoint"),e.prototype.clone=function(i,t){return i===void 0&&(i=this.cb),t===void 0&&(t=this.scope),new e(i,t,this._x,this._y)},e.prototype.set=function(i,t){return i===void 0&&(i=0),t===void 0&&(t=i),(this._x!==i||this._y!==t)&&(this._x=i,this._y=t,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(i){return(this._x!==i.x||this._y!==i.y)&&(this._x=i.x,this._y=i.y,this.cb.call(this.scope)),this},e.prototype.copyTo=function(i){return i.set(this._x,this._y),i},e.prototype.equals=function(i){return i.x===this._x&&i.y===this._y},e.prototype.toString=function(){return"[@pixi/math:ObservablePoint x="+0+" y="+0+" scope="+this.scope+"]"},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(i){this._x!==i&&(this._x=i,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(i){this._y!==i&&(this._y=i,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),e}(),Rr=function(){function e(i,t,r,o,n,s){i===void 0&&(i=1),t===void 0&&(t=0),r===void 0&&(r=0),o===void 0&&(o=1),n===void 0&&(n=0),s===void 0&&(s=0),this.array=null,this.a=i,this.b=t,this.c=r,this.d=o,this.tx=n,this.ty=s}return h(e,"Matrix"),e.prototype.fromArray=function(i){this.a=i[0],this.b=i[1],this.c=i[3],this.d=i[4],this.tx=i[2],this.ty=i[5]},e.prototype.set=function(i,t,r,o,n,s){return this.a=i,this.b=t,this.c=r,this.d=o,this.tx=n,this.ty=s,this},e.prototype.toArray=function(i,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return i?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r},e.prototype.apply=function(i,t){t=t||new dn;var r=i.x,o=i.y;return t.x=this.a*r+this.c*o+this.tx,t.y=this.b*r+this.d*o+this.ty,t},e.prototype.applyInverse=function(i,t){t=t||new dn;var r=1/(this.a*this.d+this.c*-this.b),o=i.x,n=i.y;return t.x=this.d*r*o+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*n+-this.b*r*o+(-this.ty*this.a+this.tx*this.b)*r,t},e.prototype.translate=function(i,t){return this.tx+=i,this.ty+=t,this},e.prototype.scale=function(i,t){return this.a*=i,this.d*=t,this.c*=i,this.b*=t,this.tx*=i,this.ty*=t,this},e.prototype.rotate=function(i){var t=Math.cos(i),r=Math.sin(i),o=this.a,n=this.c,s=this.tx;return this.a=o*t-this.b*r,this.b=o*r+this.b*t,this.c=n*t-this.d*r,this.d=n*r+this.d*t,this.tx=s*t-this.ty*r,this.ty=s*r+this.ty*t,this},e.prototype.append=function(i){var t=this.a,r=this.b,o=this.c,n=this.d;return this.a=i.a*t+i.b*o,this.b=i.a*r+i.b*n,this.c=i.c*t+i.d*o,this.d=i.c*r+i.d*n,this.tx=i.tx*t+i.ty*o+this.tx,this.ty=i.tx*r+i.ty*n+this.ty,this},e.prototype.setTransform=function(i,t,r,o,n,s,a,l,u){return this.a=Math.cos(a+u)*n,this.b=Math.sin(a+u)*n,this.c=-Math.sin(a-l)*s,this.d=Math.cos(a-l)*s,this.tx=i-(r*this.a+o*this.c),this.ty=t-(r*this.b+o*this.d),this},e.prototype.prepend=function(i){var t=this.tx;if(i.a!==1||i.b!==0||i.c!==0||i.d!==1){var r=this.a,o=this.c;this.a=r*i.a+this.b*i.c,this.b=r*i.b+this.b*i.d,this.c=o*i.a+this.d*i.c,this.d=o*i.b+this.d*i.d}return this.tx=t*i.a+this.ty*i.c+i.tx,this.ty=t*i.b+this.ty*i.d+i.ty,this},e.prototype.decompose=function(i){var t=this.a,r=this.b,o=this.c,n=this.d,s=i.pivot,a=-Math.atan2(-o,n),l=Math.atan2(r,t),u=Math.abs(a+l);return u<1e-5||Math.abs(Fu-u)<1e-5?(i.rotation=l,i.skew.x=i.skew.y=0):(i.rotation=0,i.skew.x=a,i.skew.y=l),i.scale.x=Math.sqrt(t*t+r*r),i.scale.y=Math.sqrt(o*o+n*n),i.position.x=this.tx+(s.x*t+s.y*o),i.position.y=this.ty+(s.x*r+s.y*n),i},e.prototype.invert=function(){var i=this.a,t=this.b,r=this.c,o=this.d,n=this.tx,s=i*o-t*r;return this.a=o/s,this.b=-t/s,this.c=-r/s,this.d=i/s,this.tx=(r*this.ty-o*n)/s,this.ty=-(i*this.ty-t*n)/s,this},e.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},e.prototype.clone=function(){var i=new e;return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},e.prototype.copyTo=function(i){return i.a=this.a,i.b=this.b,i.c=this.c,i.d=this.d,i.tx=this.tx,i.ty=this.ty,i},e.prototype.copyFrom=function(i){return this.a=i.a,this.b=i.b,this.c=i.c,this.d=i.d,this.tx=i.tx,this.ty=i.ty,this},e.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(e,"IDENTITY",{get:function(){return new e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"TEMP_MATRIX",{get:function(){return new e},enumerable:!1,configurable:!0}),e}(),ct=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],dt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],mt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],vn=[],Uu=[],Ir=Math.sign;function My(){for(var e=0;e<16;e++){var i=[];vn.push(i);for(var t=0;t<16;t++)for(var r=Ir(ct[e]*ct[t]+vt[e]*dt[t]),o=Ir(dt[e]*ct[t]+mt[e]*dt[t]),n=Ir(ct[e]*vt[t]+vt[e]*mt[t]),s=Ir(dt[e]*vt[t]+mt[e]*mt[t]),a=0;a<16;a++)if(ct[a]===r&&dt[a]===o&&vt[a]===n&&mt[a]===s){i.push(a);break}}for(var e=0;e<16;e++){var l=new Rr;l.set(ct[e],dt[e],vt[e],mt[e],0,0),Uu.push(l)}}h(My,"init");My();var De={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return ct[e]},uY:function(e){return dt[e]},vX:function(e){return vt[e]},vY:function(e){return mt[e]},inv:function(e){return e&8?e&15:-e&7},add:function(e,i){return vn[e][i]},sub:function(e,i){return vn[e][De.inv(i)]},rotate180:function(e){return e^4},isVertical:function(e){return(e&3)==2},byDirection:function(e,i){return Math.abs(e)*2<=Math.abs(i)?i>=0?De.S:De.N:Math.abs(i)*2<=Math.abs(e)?e>0?De.E:De.W:i>0?e>0?De.SE:De.SW:e>0?De.NE:De.NW},matrixAppendRotationInv:function(e,i,t,r){t===void 0&&(t=0),r===void 0&&(r=0);var o=Uu[De.inv(i)];o.tx=t,o.ty=r,e.append(o)}},Fy=function(){function e(){this.worldTransform=new Rr,this.localTransform=new Rr,this.position=new _i(this.onChange,this,0,0),this.scale=new _i(this.onChange,this,1,1),this.pivot=new _i(this.onChange,this,0,0),this.skew=new _i(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return h(e,"Transform"),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},e.prototype.toString=function(){return"[@pixi/math:Transform "+("position=("+this.position.x+", "+this.position.y+") ")+("rotation="+this.rotation+" ")+("scale=("+this.scale.x+", "+this.scale.y+") ")+("skew=("+this.skew.x+", "+this.skew.y+") ")+"]"},e.prototype.updateLocalTransform=function(){var i=this.localTransform;this._localID!==this._currentLocalID&&(i.a=this._cx*this.scale.x,i.b=this._sx*this.scale.x,i.c=this._cy*this.scale.y,i.d=this._sy*this.scale.y,i.tx=this.position.x-(this.pivot.x*i.a+this.pivot.y*i.c),i.ty=this.position.y-(this.pivot.x*i.b+this.pivot.y*i.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(i){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==i._worldID){var r=i.worldTransform,o=this.worldTransform;o.a=t.a*r.a+t.b*r.c,o.b=t.a*r.b+t.b*r.d,o.c=t.c*r.a+t.d*r.c,o.d=t.c*r.b+t.d*r.d,o.tx=t.tx*r.a+t.ty*r.c+r.tx,o.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=i._worldID,this._worldID++}},e.prototype.setFromMatrix=function(i){i.decompose(this),this._localID++},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(i){this._rotation!==i&&(this._rotation=i,this.updateSkew())},enumerable:!1,configurable:!0}),e.IDENTITY=new e,e}();pe.Circle=Sy;pe.DEG_TO_RAD=wy;pe.Ellipse=Oy;pe.Matrix=Rr;pe.ObservablePoint=_i;pe.PI_2=Fu;pe.Point=dn;pe.Polygon=Cy;pe.RAD_TO_DEG=Py;pe.Rectangle=cn;pe.RoundedRectangle=Ny;pe.Transform=Fy;pe.groupD8=De});var Ae=R(kt=>{"use strict";Object.defineProperty(kt,"__esModule",{value:!0});var Lu=Se(),yt=_e(),Ar=ge();Lu.settings.SORTABLE_CHILDREN=!1;var mn=function(){function e(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return h(e,"Bounds"),e.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},e.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},e.prototype.getRectangle=function(i){return this.minX>this.maxX||this.minY>this.maxY?yt.Rectangle.EMPTY:(i=i||new yt.Rectangle(0,0,1,1),i.x=this.minX,i.y=this.minY,i.width=this.maxX-this.minX,i.height=this.maxY-this.minY,i)},e.prototype.addPoint=function(i){this.minX=Math.min(this.minX,i.x),this.maxX=Math.max(this.maxX,i.x),this.minY=Math.min(this.minY,i.y),this.maxY=Math.max(this.maxY,i.y)},e.prototype.addPointMatrix=function(i,t){var r=i.a,o=i.b,n=i.c,s=i.d,a=i.tx,l=i.ty,u=r*t.x+n*t.y+a,p=o*t.x+s*t.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,p),this.maxY=Math.max(this.maxY,p)},e.prototype.addQuad=function(i){var t=this.minX,r=this.minY,o=this.maxX,n=this.maxY,s=i[0],a=i[1];t=s<t?s:t,r=a<r?a:r,o=s>o?s:o,n=a>n?a:n,s=i[2],a=i[3],t=s<t?s:t,r=a<r?a:r,o=s>o?s:o,n=a>n?a:n,s=i[4],a=i[5],t=s<t?s:t,r=a<r?a:r,o=s>o?s:o,n=a>n?a:n,s=i[6],a=i[7],t=s<t?s:t,r=a<r?a:r,o=s>o?s:o,n=a>n?a:n,this.minX=t,this.minY=r,this.maxX=o,this.maxY=n},e.prototype.addFrame=function(i,t,r,o,n){this.addFrameMatrix(i.worldTransform,t,r,o,n)},e.prototype.addFrameMatrix=function(i,t,r,o,n){var s=i.a,a=i.b,l=i.c,u=i.d,p=i.tx,f=i.ty,c=this.minX,d=this.minY,v=this.maxX,m=this.maxY,y=s*t+l*r+p,g=a*t+u*r+f;c=y<c?y:c,d=g<d?g:d,v=y>v?y:v,m=g>m?g:m,y=s*o+l*r+p,g=a*o+u*r+f,c=y<c?y:c,d=g<d?g:d,v=y>v?y:v,m=g>m?g:m,y=s*t+l*n+p,g=a*t+u*n+f,c=y<c?y:c,d=g<d?g:d,v=y>v?y:v,m=g>m?g:m,y=s*o+l*n+p,g=a*o+u*n+f,c=y<c?y:c,d=g<d?g:d,v=y>v?y:v,m=g>m?g:m,this.minX=c,this.minY=d,this.maxX=v,this.maxY=m},e.prototype.addVertexData=function(i,t,r){for(var o=this.minX,n=this.minY,s=this.maxX,a=this.maxY,l=t;l<r;l+=2){var u=i[l],p=i[l+1];o=u<o?u:o,n=p<n?p:n,s=u>s?u:s,a=p>a?p:a}this.minX=o,this.minY=n,this.maxX=s,this.maxY=a},e.prototype.addVertices=function(i,t,r,o){this.addVerticesMatrix(i.worldTransform,t,r,o)},e.prototype.addVerticesMatrix=function(i,t,r,o,n,s){n===void 0&&(n=0),s===void 0&&(s=n);for(var a=i.a,l=i.b,u=i.c,p=i.d,f=i.tx,c=i.ty,d=this.minX,v=this.minY,m=this.maxX,y=this.maxY,g=r;g<o;g+=2){var T=t[g],x=t[g+1],I=a*T+u*x+f,b=p*x+l*T+c;d=Math.min(d,I-n),m=Math.max(m,I+n),v=Math.min(v,b-s),y=Math.max(y,b+s)}this.minX=d,this.minY=v,this.maxX=m,this.maxY=y},e.prototype.addBounds=function(i){var t=this.minX,r=this.minY,o=this.maxX,n=this.maxY;this.minX=i.minX<t?i.minX:t,this.minY=i.minY<r?i.minY:r,this.maxX=i.maxX>o?i.maxX:o,this.maxY=i.maxY>n?i.maxY:n},e.prototype.addBoundsMask=function(i,t){var r=i.minX>t.minX?i.minX:t.minX,o=i.minY>t.minY?i.minY:t.minY,n=i.maxX<t.maxX?i.maxX:t.maxX,s=i.maxY<t.maxY?i.maxY:t.maxY;if(r<=n&&o<=s){var a=this.minX,l=this.minY,u=this.maxX,p=this.maxY;this.minX=r<a?r:a,this.minY=o<l?o:l,this.maxX=n>u?n:u,this.maxY=s>p?s:p}},e.prototype.addBoundsMatrix=function(i,t){this.addFrameMatrix(t,i.minX,i.minY,i.maxX,i.maxY)},e.prototype.addBoundsArea=function(i,t){var r=i.minX>t.x?i.minX:t.x,o=i.minY>t.y?i.minY:t.y,n=i.maxX<t.x+t.width?i.maxX:t.x+t.width,s=i.maxY<t.y+t.height?i.maxY:t.y+t.height;if(r<=n&&o<=s){var a=this.minX,l=this.minY,u=this.maxX,p=this.maxY;this.minX=r<a?r:a,this.minY=o<l?o:l,this.maxX=n>u?n:u,this.maxY=s>p?s:p}},e.prototype.pad=function(i,t){i===void 0&&(i=0),t===void 0&&(t=i),this.isEmpty()||(this.minX-=i,this.maxX+=i,this.minY-=t,this.maxY+=t)},e.prototype.addFramePad=function(i,t,r,o,n,s){i-=n,t-=s,r+=n,o+=s,this.minX=this.minX<i?this.minX:i,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>o?this.maxY:o},e}();var yn=h(function(e,i){return yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},yn(e,i)},"extendStatics");function _n(e,i){yn(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(_n,"__extends");var bi=function(e){_n(i,e);function i(){var t=e.call(this)||this;return t.tempDisplayObjectParent=null,t.transform=new yt.Transform,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t._lastSortedIndex=0,t._zIndex=0,t.filterArea=null,t.filters=null,t._enabledFilters=null,t._bounds=new mn,t._localBounds=null,t._boundsID=0,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t.isSprite=!1,t.isMask=!1,t}return h(i,"DisplayObject"),i.mixin=function(t){for(var r=Object.keys(t),o=0;o<r.length;++o){var n=r[o];Object.defineProperty(i.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},Object.defineProperty(i.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),i.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},i.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},i.prototype.getBounds=function(t,r){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new yt.Rectangle),r=this._boundsRect),this._bounds.getRectangle(r)},i.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new yt.Rectangle),t=this._localBoundsRect),this._localBounds||(this._localBounds=new mn);var r=this.transform,o=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var n=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=o,this.transform=r,this._bounds=n,this._bounds.updateID+=this._boundsID-s,a},i.prototype.toGlobal=function(t,r,o){return o===void 0&&(o=!1),o||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,r)},i.prototype.toLocal=function(t,r,o,n){return r&&(t=r.toGlobal(t,o,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,o)},i.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},i.prototype.setTransform=function(t,r,o,n,s,a,l,u,p){return t===void 0&&(t=0),r===void 0&&(r=0),o===void 0&&(o=1),n===void 0&&(n=1),s===void 0&&(s=0),a===void 0&&(a=0),l===void 0&&(l=0),u===void 0&&(u=0),p===void 0&&(p=0),this.position.x=t,this.position.y=r,this.scale.x=o||1,this.scale.y=n||1,this.rotation=s,this.skew.x=a,this.skew.y=l,this.pivot.x=u,this.pivot.y=p,this},i.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this._mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(i.prototype,"_tempDisplayObjectParent",{get:function(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new Du),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),i.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},i.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(i.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"angle",{get:function(){return this.transform.rotation*yt.RAD_TO_DEG},set:function(t){this.transform.rotation=t*yt.DEG_TO_RAD},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mask",{get:function(){return this._mask},set:function(t){if(this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!0,r.isMask=!1}if(this._mask=t,this._mask){var r=this._mask.maskObject||this._mask;r.renderable=!1,r.isMask=!0}},enumerable:!1,configurable:!0}),i}(Ar.EventEmitter),Du=function(e){_n(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.sortDirty=null,t}return h(i,"TemporaryDisplayObject"),i}(bi);bi.prototype.displayObjectUpdateTransform=bi.prototype.updateTransform;function Uy(e,i){return e.zIndex===i.zIndex?e._lastSortedIndex-i._lastSortedIndex:e.zIndex-i.zIndex}h(Uy,"sortChildren");var bn=function(e){_n(i,e);function i(){var t=e.call(this)||this;return t.children=[],t.sortableChildren=Lu.settings.SORTABLE_CHILDREN,t.sortDirty=!1,t}return h(i,"Container"),i.prototype.onChildrenChange=function(t){},i.prototype.addChild=function(){for(var t=arguments,r=[],o=0;o<arguments.length;o++)r[o]=t[o];if(r.length>1)for(var n=0;n<r.length;n++)this.addChild(r[n]);else{var s=r[0];s.parent&&s.parent.removeChild(s),s.parent=this,this.sortDirty=!0,s.transform._parentID=-1,this.children.push(s),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",s,this,this.children.length-1),s.emit("added",this)}return r[0]},i.prototype.addChildAt=function(t,r){if(r<0||r>this.children.length)throw new Error(t+"addChildAt: The index "+r+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(r,0,t),this._boundsID++,this.onChildrenChange(r),t.emit("added",this),this.emit("childAdded",t,this,r),t},i.prototype.swapChildren=function(t,r){if(t!==r){var o=this.getChildIndex(t),n=this.getChildIndex(r);this.children[o]=r,this.children[n]=t,this.onChildrenChange(o<n?o:n)}},i.prototype.getChildIndex=function(t){var r=this.children.indexOf(t);if(r===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return r},i.prototype.setChildIndex=function(t,r){if(r<0||r>=this.children.length)throw new Error("The index "+r+" supplied is out of bounds "+this.children.length);var o=this.getChildIndex(t);Ar.removeItems(this.children,o,1),this.children.splice(r,0,t),this.onChildrenChange(r)},i.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},i.prototype.removeChild=function(){for(var t=arguments,r=[],o=0;o<arguments.length;o++)r[o]=t[o];if(r.length>1)for(var n=0;n<r.length;n++)this.removeChild(r[n]);else{var s=r[0],a=this.children.indexOf(s);if(a===-1)return null;s.parent=null,s.transform._parentID=-1,Ar.removeItems(this.children,a,1),this._boundsID++,this.onChildrenChange(a),s.emit("removed",this),this.emit("childRemoved",s,this,a)}return r[0]},i.prototype.removeChildAt=function(t){var r=this.getChildAt(t);return r.parent=null,r.transform._parentID=-1,Ar.removeItems(this.children,t,1),this._boundsID++,this.onChildrenChange(t),r.emit("removed",this),this.emit("childRemoved",r,this,t),r},i.prototype.removeChildren=function(t,r){t===void 0&&(t=0),r===void 0&&(r=this.children.length);var o=t,n=r,s=n-o,a;if(s>0&&s<=n){a=this.children.splice(o,s);for(var l=0;l<a.length;++l)a[l].parent=null,a[l].transform&&(a[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var l=0;l<a.length;++l)a[l].emit("removed",this),this.emit("childRemoved",a[l],this,l);return a}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},i.prototype.sortChildren=function(){for(var t=!1,r=0,o=this.children.length;r<o;++r){var n=this.children[r];n._lastSortedIndex=r,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(Uy),this.sortDirty=!1},i.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,r=this.children.length;t<r;++t){var o=this.children[t];o.visible&&o.updateTransform()}},i.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var r=this.children[t];if(!(!r.visible||!r.renderable))if(r.calculateBounds(),r._mask){var o=r._mask.maskObject||r._mask;o.calculateBounds(),this._bounds.addBoundsMask(r._bounds,o._bounds)}else r.filterArea?this._bounds.addBoundsArea(r._bounds,r.filterArea):this._bounds.addBounds(r._bounds)}this._bounds.updateID=this._boundsID},i.prototype.getLocalBounds=function(t,r){r===void 0&&(r=!1);var o=e.prototype.getLocalBounds.call(this,t);if(!r)for(var n=0,s=this.children.length;n<s;++n){var a=this.children[n];a.visible&&a.updateTransform()}return o},i.prototype._calculateBounds=function(){},i.prototype.render=function(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var r=0,o=this.children.length;r<o;++r)this.children[r].render(t)}},i.prototype.renderAdvanced=function(t){t.batch.flush();var r=this.filters,o=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<r.length;n++)r[n].enabled&&this._enabledFilters.push(r[n]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}o&&t.mask.push(this,this._mask),this._render(t);for(var n=0,s=this.children.length;n<s;n++)this.children[n].render(t);t.batch.flush(),o&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},i.prototype._render=function(t){},i.prototype.destroy=function(t){e.prototype.destroy.call(this),this.sortDirty=!1;var r=typeof t=="boolean"?t:t&&t.children,o=this.removeChildren(0,this.children.length);if(r)for(var n=0;n<o.length;++n)o[n].destroy(t)},Object.defineProperty(i.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var r=this.getLocalBounds().width;r!==0?this.scale.x=t/r:this.scale.x=1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var r=this.getLocalBounds().height;r!==0?this.scale.y=t/r:this.scale.y=1,this._height=t},enumerable:!1,configurable:!0}),i}(bi);bn.prototype.containerUpdateTransform=bn.prototype.updateTransform;kt.Bounds=mn;kt.Container=bn;kt.DisplayObject=bi;kt.TemporaryDisplayObject=Du});var Hu=R(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});var Ly=Ae(),Pr=ge(),Bu={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};Ly.DisplayObject.mixin(Bu);var Dy=9,wr=100,By=0,Gy=0,Gu=2,ku=1,ky=-1e3,Hy=-1e3,Xy=2,jy=function(){function e(i){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Pr.isMobile.tablet||Pr.isMobile.phone)&&this.createTouchHook();var t=document.createElement("div");t.style.width=wr+"px",t.style.height=wr+"px",t.style.position="absolute",t.style.top=By+"px",t.style.left=Gy+"px",t.style.zIndex=Gu.toString(),this.div=t,this.renderer=i,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return h(e,"AccessibilityManager"),Object.defineProperty(e.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),e.prototype.createTouchHook=function(){var i=this,t=document.createElement("button");t.style.width=ku+"px",t.style.height=ku+"px",t.style.position="absolute",t.style.top=ky+"px",t.style.left=Hy+"px",t.style.zIndex=Xy.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",function(){i._isMobileAccessibility=!0,i.activate(),i.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t},e.prototype.destroyTouchHook=function(){!this._hookDiv||(document.body.removeChild(this._hookDiv),this._hookDiv=null)},e.prototype.activate=function(){var i;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(i=this.renderer.view.parentNode)===null||i===void 0||i.appendChild(this.div))},e.prototype.deactivate=function(){var i;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(i=this.div.parentNode)===null||i===void 0||i.removeChild(this.div))},e.prototype.updateAccessibleObjects=function(i){if(!(!i.visible||!i.accessibleChildren)){i.accessible&&i.interactive&&(i._accessibleActive||this.addChild(i),i.renderId=this.renderId);for(var t=i.children,r=0;r<t.length;r++)this.updateAccessibleObjects(t[r])}},e.prototype.update=function(){var i=performance.now();if(!(Pr.isMobile.android.device&&i<this.androidUpdateCount)&&(this.androidUpdateCount=i+this.androidUpdateFrequency,!!this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),r=t.left,o=t.top,n=t.width,s=t.height,a=this.renderer,l=a.width,u=a.height,p=a.resolution,f=n/l*p,c=s/u*p,d=this.div;d.style.left=r+"px",d.style.top=o+"px",d.style.width=l+"px",d.style.height=u+"px";for(var v=0;v<this.children.length;v++){var m=this.children[v];if(m.renderId!==this.renderId)m._accessibleActive=!1,Pr.removeItems(this.children,v,1),this.div.removeChild(m._accessibleDiv),this.pool.push(m._accessibleDiv),m._accessibleDiv=null,v--;else{d=m._accessibleDiv;var y=m.hitArea,g=m.worldTransform;m.hitArea?(d.style.left=(g.tx+y.x*g.a)*f+"px",d.style.top=(g.ty+y.y*g.d)*c+"px",d.style.width=y.width*g.a*f+"px",d.style.height=y.height*g.d*c+"px"):(y=m.getBounds(),this.capHitArea(y),d.style.left=y.x*f+"px",d.style.top=y.y*c+"px",d.style.width=y.width*f+"px",d.style.height=y.height*c+"px",d.title!==m.accessibleTitle&&m.accessibleTitle!==null&&(d.title=m.accessibleTitle),d.getAttribute("aria-label")!==m.accessibleHint&&m.accessibleHint!==null&&d.setAttribute("aria-label",m.accessibleHint)),(m.accessibleTitle!==d.title||m.tabIndex!==d.tabIndex)&&(d.title=m.accessibleTitle,d.tabIndex=m.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},e.prototype.updateDebugHTML=function(i){i.innerHTML="type: "+i.type+"</br> title : "+i.title+"</br> tabIndex: "+i.tabIndex},e.prototype.capHitArea=function(i){i.x<0&&(i.width+=i.x,i.x=0),i.y<0&&(i.height+=i.y,i.y=0);var t=this.renderer,r=t.width,o=t.height;i.x+i.width>r&&(i.width=r-i.x),i.y+i.height>o&&(i.height=o-i.y)},e.prototype.addChild=function(i){var t=this.pool.pop();t||(t=document.createElement("button"),t.style.width=wr+"px",t.style.height=wr+"px",t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=Gu.toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=i.accessiblePointerEvents,t.type=i.accessibleType,i.accessibleTitle&&i.accessibleTitle!==null?t.title=i.accessibleTitle:(!i.accessibleHint||i.accessibleHint===null)&&(t.title="displayObject "+i.tabIndex),i.accessibleHint&&i.accessibleHint!==null&&t.setAttribute("aria-label",i.accessibleHint),this.debug&&this.updateDebugHTML(t),i._accessibleActive=!0,i._accessibleDiv=t,t.displayObject=i,this.children.push(i),this.div.appendChild(i._accessibleDiv),i._accessibleDiv.tabIndex=i.tabIndex},e.prototype._onClick=function(i){var t=this.renderer.plugins.interaction,r=i.target.displayObject,o=t.eventData;t.dispatchEvent(r,"click",o),t.dispatchEvent(r,"pointertap",o),t.dispatchEvent(r,"tap",o)},e.prototype._onFocus=function(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","assertive");var t=this.renderer.plugins.interaction,r=i.target.displayObject,o=t.eventData;t.dispatchEvent(r,"mouseover",o)},e.prototype._onFocusOut=function(i){i.target.getAttribute("aria-live")||i.target.setAttribute("aria-live","polite");var t=this.renderer.plugins.interaction,r=i.target.displayObject,o=t.eventData;t.dispatchEvent(r,"mouseout",o)},e.prototype._onKeyDown=function(i){i.keyCode===Dy&&this.activate()},e.prototype._onMouseMove=function(i){i.movementX===0&&i.movementY===0||this.deactivate()},e.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},e}();Sr.AccessibilityManager=jy;Sr.accessibleTarget=Bu});var Ht=R(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});var gi=Se();gi.settings.TARGET_FPMS=.06;(function(e){e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY"})(Ze.UPDATE_PRIORITY||(Ze.UPDATE_PRIORITY={}));var gn=function(){function e(i,t,r,o){t===void 0&&(t=null),r===void 0&&(r=0),o===void 0&&(o=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=i,this.context=t,this.priority=r,this.once=o}return h(e,"TickerListener"),e.prototype.match=function(i,t){return t===void 0&&(t=null),this.fn===i&&this.context===t},e.prototype.emit=function(i){this.fn&&(this.context?this.fn.call(this.context,i):this.fn(i));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t},e.prototype.connect=function(i){this.previous=i,i.next&&(i.next.previous=this),this.next=i.next,i.next=this},e.prototype.destroy=function(i){i===void 0&&(i=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=i?null:t,this.previous=null,t},e}(),Tn=function(){function e(){var i=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new gn(null,null,1/0),this.deltaMS=1/gi.settings.TARGET_FPMS,this.elapsedMS=1/gi.settings.TARGET_FPMS,this._tick=function(t){i._requestId=null,i.started&&(i.update(t),i.started&&i._requestId===null&&i._head.next&&(i._requestId=requestAnimationFrame(i._tick)))}}return h(e,"Ticker"),e.prototype._requestIfNeeded=function(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},e.prototype._cancelIfNeeded=function(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)},e.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},e.prototype.add=function(i,t,r){return r===void 0&&(r=Ze.UPDATE_PRIORITY.NORMAL),this._addListener(new gn(i,t,r))},e.prototype.addOnce=function(i,t,r){return r===void 0&&(r=Ze.UPDATE_PRIORITY.NORMAL),this._addListener(new gn(i,t,r,!0))},e.prototype._addListener=function(i){var t=this._head.next,r=this._head;if(!t)i.connect(r);else{for(;t;){if(i.priority>t.priority){i.connect(r);break}r=t,t=t.next}i.previous||i.connect(r)}return this._startIfPossible(),this},e.prototype.remove=function(i,t){for(var r=this._head.next;r;)r.match(i,t)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(e.prototype,"count",{get:function(){if(!this._head)return 0;for(var i=0,t=this._head;t=t.next;)i++;return i},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},e.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},e.prototype.destroy=function(){if(!this._protected){this.stop();for(var i=this._head.next;i;)i=i.destroy(!0);this._head.destroy(),this._head=null}},e.prototype.update=function(i){i===void 0&&(i=performance.now());var t;if(i>this.lastTime){if(t=this.elapsedMS=i-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=i-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=i-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*gi.settings.TARGET_FPMS;for(var o=this._head,n=o.next;n;)n=n.emit(this.deltaTime);o.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=i},Object.defineProperty(e.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(i){var t=Math.min(this.maxFPS,i),r=Math.min(Math.max(0,t)/1e3,gi.settings.TARGET_FPMS);this._maxElapsedMS=1/r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(i){if(i===0)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,i);this._minElapsedMS=1/(t/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(e,"shared",{get:function(){if(!e._shared){var i=e._shared=new e;i.autoStart=!0,i._protected=!0}return e._shared},enumerable:!1,configurable:!0}),Object.defineProperty(e,"system",{get:function(){if(!e._system){var i=e._system=new e;i.autoStart=!0,i._protected=!0}return e._system},enumerable:!1,configurable:!0}),e}(),Vy=function(){function e(){}return h(e,"TickerPlugin"),e.init=function(i){var t=this;i=Object.assign({autoStart:!0,sharedTicker:!1},i),Object.defineProperty(this,"ticker",{set:function(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Ze.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=i.sharedTicker?Tn.shared:new Tn,i.autoStart&&this.start()},e.destroy=function(){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}},e}();Ze.Ticker=Tn;Ze.TickerPlugin=Vy});var Yu=R(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});var Xu=_e(),xn=Ht(),ju=Ae(),qy=ge(),En=function(){function e(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new Xu.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return h(e,"InteractionData"),Object.defineProperty(e.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),e.prototype.getLocalPosition=function(i,t,r){return i.worldTransform.applyInverse(r||this.global,t)},e.prototype.copyEvent=function(i){"isPrimary"in i&&i.isPrimary&&(this.isPrimary=!0),this.button="button"in i&&i.button;var t="buttons"in i&&i.buttons;this.buttons=Number.isInteger(t)?t:"which"in i&&i.which,this.width="width"in i&&i.width,this.height="height"in i&&i.height,this.tiltX="tiltX"in i&&i.tiltX,this.tiltY="tiltY"in i&&i.tiltY,this.pointerType="pointerType"in i&&i.pointerType,this.pressure="pressure"in i&&i.pressure,this.rotationAngle="rotationAngle"in i&&i.rotationAngle,this.twist="twist"in i&&i.twist||0,this.tangentialPressure="tangentialPressure"in i&&i.tangentialPressure||0},e.prototype.reset=function(){this.isPrimary=!1},e}();var Rn=h(function(e,i){return Rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Rn(e,i)},"extendStatics");function Yy(e,i){Rn(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(Yy,"__extends");var Vu=function(){function e(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return h(e,"InteractionEvent"),e.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},e.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},e}(),Or=function(){function e(i){this._pointerId=i,this._flags=e.FLAGS.NONE}return h(e,"InteractionTrackingData"),e.prototype._doSet=function(i,t){t?this._flags=this._flags|i:this._flags=this._flags&~i},Object.defineProperty(e.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"flags",{get:function(){return this._flags},set:function(i){this._flags=i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"none",{get:function(){return this._flags===e.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"over",{get:function(){return(this._flags&e.FLAGS.OVER)!=0},set:function(i){this._doSet(e.FLAGS.OVER,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightDown",{get:function(){return(this._flags&e.FLAGS.RIGHT_DOWN)!=0},set:function(i){this._doSet(e.FLAGS.RIGHT_DOWN,i)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftDown",{get:function(){return(this._flags&e.FLAGS.LEFT_DOWN)!=0},set:function(i){this._doSet(e.FLAGS.LEFT_DOWN,i)},enumerable:!1,configurable:!0}),e.FLAGS=Object.freeze({NONE:0,OVER:1<<0,LEFT_DOWN:1<<1,RIGHT_DOWN:1<<2}),e}(),Wy=function(){function e(){this._tempPoint=new Xu.Point}return h(e,"TreeSearch"),e.prototype.recursiveFindHit=function(i,t,r,o,n){if(!t||!t.visible)return!1;var s=i.data.global;n=t.interactive||n;var a=!1,l=n,u=!0;if(t.hitArea?(o&&(t.worldTransform.applyInverse(s,this._tempPoint),t.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?a=!0:(o=!1,u=!1)),l=!1):t._mask&&o&&(t._mask.containsPoint&&t._mask.containsPoint(s)||(o=!1)),u&&t.interactiveChildren&&t.children)for(var p=t.children,f=p.length-1;f>=0;f--){var c=p[f],d=this.recursiveFindHit(i,c,r,o,l);if(d){if(!c.parent)continue;l=!1,d&&(i.target&&(o=!1),a=!0)}}return n&&(o&&!i.target&&!t.hitArea&&t.containsPoint&&t.containsPoint(s)&&(a=!0),t.interactive&&(a&&!i.target&&(i.target=t),r&&r(i,t,!!a))),a},e.prototype.findHit=function(i,t,r,o){this.recursiveFindHit(i,t,r,o,!1)},e}(),qu={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return this.cursor==="pointer"},set buttonMode(e){e?this.cursor="pointer":this.cursor==="pointer"&&(this.cursor=null)},cursor:null,get trackedPointers(){return this._trackedPointers===void 0&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};ju.DisplayObject.mixin(qu);var Cr=1,Nr={target:null,data:{global:null}},zy=function(e){Yy(i,e);function i(t,r){var o=e.call(this)||this;return r=r||{},o.renderer=t,o.autoPreventDefault=r.autoPreventDefault!==void 0?r.autoPreventDefault:!0,o.interactionFrequency=r.interactionFrequency||10,o.mouse=new En,o.mouse.identifier=Cr,o.mouse.global.set(-999999),o.activeInteractionData={},o.activeInteractionData[Cr]=o.mouse,o.interactionDataPool=[],o.eventData=new Vu,o.interactionDOMElement=null,o.moveWhenInside=!1,o.eventsAdded=!1,o.tickerAdded=!1,o.mouseOverRenderer=!("PointerEvent"in self),o.supportsTouchEvents="ontouchstart"in self,o.supportsPointerEvents=!!self.PointerEvent,o.onPointerUp=o.onPointerUp.bind(o),o.processPointerUp=o.processPointerUp.bind(o),o.onPointerCancel=o.onPointerCancel.bind(o),o.processPointerCancel=o.processPointerCancel.bind(o),o.onPointerDown=o.onPointerDown.bind(o),o.processPointerDown=o.processPointerDown.bind(o),o.onPointerMove=o.onPointerMove.bind(o),o.processPointerMove=o.processPointerMove.bind(o),o.onPointerOut=o.onPointerOut.bind(o),o.processPointerOverOut=o.processPointerOverOut.bind(o),o.onPointerOver=o.onPointerOver.bind(o),o.cursorStyles={default:"inherit",pointer:"pointer"},o.currentCursorMode=null,o.cursor=null,o.resolution=1,o.delayedEvents=[],o.search=new Wy,o._tempDisplayObject=new ju.TemporaryDisplayObject,o._eventListenerOptions={capture:!0,passive:!1},o._useSystemTicker=r.useSystemTicker!==void 0?r.useSystemTicker:!0,o.setTargetElement(o.renderer.view,o.renderer.resolution),o}return h(i,"InteractionManager"),Object.defineProperty(i.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),i.prototype.hitTest=function(t,r){return Nr.target=null,Nr.data.global=t,r||(r=this.lastObjectRendered),this.processInteractive(Nr,r,null,!0),Nr.target},i.prototype.setTargetElement=function(t,r){r===void 0&&(r=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents(),this.addTickerListener()},i.prototype.addTickerListener=function(){this.tickerAdded||!this.interactionDOMElement||!this._useSystemTicker||(xn.Ticker.system.add(this.tickerUpdate,this,xn.UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)},i.prototype.removeTickerListener=function(){!this.tickerAdded||(xn.Ticker.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},i.prototype.addEvents=function(){if(!(this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},i.prototype.removeEvents=function(){if(!(!this.eventsAdded||!this.interactionDOMElement)){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},i.prototype.tickerUpdate=function(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())},i.prototype.update=function(){if(!!this.interactionDOMElement){if(this._didMove){this._didMove=!1;return}this.cursor=null;for(var t in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var r=this.activeInteractionData[t];if(r.originalEvent&&r.pointerType!=="touch"){var o=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(o,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},i.prototype.setCursorMode=function(t){t=t||"default";var r=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(r=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var o=this.cursorStyles[t];if(o)switch(typeof o){case"string":r&&(this.interactionDOMElement.style.cursor=o);break;case"function":o(t);break;case"object":r&&Object.assign(this.interactionDOMElement.style,o);break}else r&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},i.prototype.dispatchEvent=function(t,r,o){(!o.stopPropagationHint||t===o.stopsPropagatingAt)&&(o.currentTarget=t,o.type=r,t.emit(r,o),t[r]&&t[r](o))},i.prototype.delayDispatchEvent=function(t,r,o){this.delayedEvents.push({displayObject:t,eventString:r,eventData:o})},i.prototype.mapPositionToPoint=function(t,r,o){var n;this.interactionDOMElement.parentElement?n=this.interactionDOMElement.getBoundingClientRect():n={x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var s=1/this.resolution;t.x=(r-n.left)*(this.interactionDOMElement.width/n.width)*s,t.y=(o-n.top)*(this.interactionDOMElement.height/n.height)*s},i.prototype.processInteractive=function(t,r,o,n){var s=this.search.findHit(t,r,o,n),a=this.delayedEvents;if(!a.length)return s;t.stopPropagationHint=!1;var l=a.length;this.delayedEvents=[];for(var u=0;u<l;u++){var p=a[u],f=p.displayObject,c=p.eventString,d=p.eventData;d.stopsPropagatingAt===f&&(d.stopPropagationHint=!0),this.dispatchEvent(f,c,d)}return s},i.prototype.onPointerDown=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);if(this.autoPreventDefault&&r[0].isNormalized){var o=t.cancelable||!("cancelable"in t);o&&t.preventDefault()}for(var n=r.length,s=0;s<n;s++){var a=r[s],l=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(u.data.originalEvent=t,this.processInteractive(u,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",u),a.pointerType==="touch")this.emit("touchstart",u);else if(a.pointerType==="mouse"||a.pointerType==="pen"){var p=a.button===2;this.emit(p?"rightdown":"mousedown",this.eventData)}}}},i.prototype.processPointerDown=function(t,r,o){var n=t.data,s=t.data.identifier;if(o){if(r.trackedPointers[s]||(r.trackedPointers[s]=new Or(s)),this.dispatchEvent(r,"pointerdown",t),n.pointerType==="touch")this.dispatchEvent(r,"touchstart",t);else if(n.pointerType==="mouse"||n.pointerType==="pen"){var a=n.button===2;a?r.trackedPointers[s].rightDown=!0:r.trackedPointers[s].leftDown=!0,this.dispatchEvent(r,a?"rightdown":"mousedown",t)}}},i.prototype.onPointerComplete=function(t,r,o){for(var n=this.normalizeToPointerData(t),s=n.length,a=t.target!==this.interactionDOMElement?"outside":"",l=0;l<s;l++){var u=n[l],p=this.getInteractionDataForPointerId(u),f=this.configureInteractionEventForDOMEvent(this.eventData,u,p);if(f.data.originalEvent=t,this.processInteractive(f,this.lastObjectRendered,o,r||!a),this.emit(r?"pointercancel":"pointerup"+a,f),u.pointerType==="mouse"||u.pointerType==="pen"){var c=u.button===2;this.emit(c?"rightup"+a:"mouseup"+a,f)}else u.pointerType==="touch"&&(this.emit(r?"touchcancel":"touchend"+a,f),this.releaseInteractionDataForPointerId(u.pointerId))}},i.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!0,this.processPointerCancel)},i.prototype.processPointerCancel=function(t,r){var o=t.data,n=t.data.identifier;r.trackedPointers[n]!==void 0&&(delete r.trackedPointers[n],this.dispatchEvent(r,"pointercancel",t),o.pointerType==="touch"&&this.dispatchEvent(r,"touchcancel",t))},i.prototype.onPointerUp=function(t){this.supportsTouchEvents&&t.pointerType==="touch"||this.onPointerComplete(t,!1,this.processPointerUp)},i.prototype.processPointerUp=function(t,r,o){var n=t.data,s=t.data.identifier,a=r.trackedPointers[s],l=n.pointerType==="touch",u=n.pointerType==="mouse"||n.pointerType==="pen",p=!1;if(u){var f=n.button===2,c=Or.FLAGS,d=f?c.RIGHT_DOWN:c.LEFT_DOWN,v=a!==void 0&&a.flags&d;o?(this.dispatchEvent(r,f?"rightup":"mouseup",t),v&&(this.dispatchEvent(r,f?"rightclick":"click",t),p=!0)):v&&this.dispatchEvent(r,f?"rightupoutside":"mouseupoutside",t),a&&(f?a.rightDown=!1:a.leftDown=!1)}o?(this.dispatchEvent(r,"pointerup",t),l&&this.dispatchEvent(r,"touchend",t),a&&((!u||p)&&this.dispatchEvent(r,"pointertap",t),l&&(this.dispatchEvent(r,"tap",t),a.over=!1))):a&&(this.dispatchEvent(r,"pointerupoutside",t),l&&this.dispatchEvent(r,"touchendoutside",t)),a&&a.none&&delete r.trackedPointers[s]},i.prototype.onPointerMove=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t);(r[0].pointerType==="mouse"||r[0].pointerType==="pen")&&(this._didMove=!0,this.cursor=null);for(var o=r.length,n=0;n<o;n++){var s=r[n],a=this.getInteractionDataForPointerId(s),l=this.configureInteractionEventForDOMEvent(this.eventData,s,a);l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",l),s.pointerType==="touch"&&this.emit("touchmove",l),(s.pointerType==="mouse"||s.pointerType==="pen")&&this.emit("mousemove",l)}r[0].pointerType==="mouse"&&this.setCursorMode(this.cursor)}},i.prototype.processPointerMove=function(t,r,o){var n=t.data,s=n.pointerType==="touch",a=n.pointerType==="mouse"||n.pointerType==="pen";a&&this.processPointerOverOut(t,r,o),(!this.moveWhenInside||o)&&(this.dispatchEvent(r,"pointermove",t),s&&this.dispatchEvent(r,"touchmove",t),a&&this.dispatchEvent(r,"mousemove",t))},i.prototype.onPointerOut=function(t){if(!(this.supportsTouchEvents&&t.pointerType==="touch")){var r=this.normalizeToPointerData(t),o=r[0];o.pointerType==="mouse"&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var n=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,n);s.data.originalEvent=o,this.processInteractive(s,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",s),o.pointerType==="mouse"||o.pointerType==="pen"?this.emit("mouseout",s):this.releaseInteractionDataForPointerId(n.identifier)}},i.prototype.processPointerOverOut=function(t,r,o){var n=t.data,s=t.data.identifier,a=n.pointerType==="mouse"||n.pointerType==="pen",l=r.trackedPointers[s];o&&!l&&(l=r.trackedPointers[s]=new Or(s)),l!==void 0&&(o&&this.mouseOverRenderer?(l.over||(l.over=!0,this.delayDispatchEvent(r,"pointerover",t),a&&this.delayDispatchEvent(r,"mouseover",t)),a&&this.cursor===null&&(this.cursor=r.cursor)):l.over&&(l.over=!1,this.dispatchEvent(r,"pointerout",this.eventData),a&&this.dispatchEvent(r,"mouseout",t),l.none&&delete r.trackedPointers[s]))},i.prototype.onPointerOver=function(t){var r=this.normalizeToPointerData(t),o=r[0],n=this.getInteractionDataForPointerId(o),s=this.configureInteractionEventForDOMEvent(this.eventData,o,n);s.data.originalEvent=o,o.pointerType==="mouse"&&(this.mouseOverRenderer=!0),this.emit("pointerover",s),(o.pointerType==="mouse"||o.pointerType==="pen")&&this.emit("mouseover",s)},i.prototype.getInteractionDataForPointerId=function(t){var r=t.pointerId,o;return r===Cr||t.pointerType==="mouse"?o=this.mouse:this.activeInteractionData[r]?o=this.activeInteractionData[r]:(o=this.interactionDataPool.pop()||new En,o.identifier=r,this.activeInteractionData[r]=o),o.copyEvent(t),o},i.prototype.releaseInteractionDataForPointerId=function(t){var r=this.activeInteractionData[t];r&&(delete this.activeInteractionData[t],r.reset(),this.interactionDataPool.push(r))},i.prototype.configureInteractionEventForDOMEvent=function(t,r,o){return t.data=o,this.mapPositionToPoint(o.global,r.clientX,r.clientY),r.pointerType==="touch"&&(r.globalX=o.global.x,r.globalY=o.global.y),o.originalEvent=r,t.reset(),t},i.prototype.normalizeToPointerData=function(t){var r=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var o=0,n=t.changedTouches.length;o<n;o++){var s=t.changedTouches[o];typeof s.button=="undefined"&&(s.button=t.touches.length?1:0),typeof s.buttons=="undefined"&&(s.buttons=t.touches.length?1:0),typeof s.isPrimary=="undefined"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width=="undefined"&&(s.width=s.radiusX||1),typeof s.height=="undefined"&&(s.height=s.radiusY||1),typeof s.tiltX=="undefined"&&(s.tiltX=0),typeof s.tiltY=="undefined"&&(s.tiltY=0),typeof s.pointerType=="undefined"&&(s.pointerType="touch"),typeof s.pointerId=="undefined"&&(s.pointerId=s.identifier||0),typeof s.pressure=="undefined"&&(s.pressure=s.force||.5),typeof s.twist=="undefined"&&(s.twist=0),typeof s.tangentialPressure=="undefined"&&(s.tangentialPressure=0),typeof s.layerX=="undefined"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY=="undefined"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,r.push(s)}else if(!self.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof self.PointerEvent))){var a=t;typeof a.isPrimary=="undefined"&&(a.isPrimary=!0),typeof a.width=="undefined"&&(a.width=1),typeof a.height=="undefined"&&(a.height=1),typeof a.tiltX=="undefined"&&(a.tiltX=0),typeof a.tiltY=="undefined"&&(a.tiltY=0),typeof a.pointerType=="undefined"&&(a.pointerType="mouse"),typeof a.pointerId=="undefined"&&(a.pointerId=Cr),typeof a.pressure=="undefined"&&(a.pressure=.5),typeof a.twist=="undefined"&&(a.twist=0),typeof a.tangentialPressure=="undefined"&&(a.tangentialPressure=0),a.isNormalized=!0,r.push(a)}else r.push(t);return r},i.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},i}(qy.EventEmitter);_t.InteractionData=En;_t.InteractionEvent=Vu;_t.InteractionManager=zy;_t.InteractionTrackingData=Or;_t.interactiveTarget=qu});var An=R(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});var Mr=function(){function e(i){this.items=[],this._name=i,this._aliasCount=0}return h(e,"Runner"),e.prototype.emit=function(i,t,r,o,n,s,a,l){if(arguments.length>8)throw new Error("max arguments reached");var u=this,p=u.name,f=u.items;this._aliasCount++;for(var c=0,d=f.length;c<d;c++)f[c][p](i,t,r,o,n,s,a,l);return f===this.items&&this._aliasCount--,this},e.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},e.prototype.add=function(i){return i[this._name]&&(this.ensureNonAliasedItems(),this.remove(i),this.items.push(i)),this},e.prototype.remove=function(i){var t=this.items.indexOf(i);return t!==-1&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this},e.prototype.contains=function(i){return this.items.indexOf(i)!==-1},e.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},e.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(e.prototype,"empty",{get:function(){return this.items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),e}();Object.defineProperties(Mr.prototype,{dispatch:{value:Mr.prototype.emit},run:{value:Mr.prototype.emit}});In.Runner=Mr});var ae=R(S=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0});var Z=Se(),_=Le(),L=ge(),Oe=An(),Xt=Ht(),G=_e();Z.settings.PREFER_ENV=L.isMobile.any?_.ENV.WEBGL:_.ENV.WEBGL2;Z.settings.STRICT_TEXTURE_CACHE=!1;var Ti=[];function Fr(e,i){if(!e)return null;var t="";if(typeof e=="string"){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(t=r[1].toLowerCase())}for(var o=Ti.length-1;o>=0;--o){var n=Ti[o];if(n.test&&n.test(e,t))return new n(e,i)}throw new Error("Unrecognized source type to auto-detect Resource")}h(Fr,"autoDetectResource");var Pn=h(function(e,i){return Pn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Pn(e,i)},"extendStatics");function oe(e,i){Pn(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(oe,"__extends");var wn=h(function(){return wn=Object.assign||h(function(i){for(var t=arguments,r,o=1,n=arguments.length;o<n;o++){r=t[o];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])}return i},"__assign"),wn.apply(this,arguments)},"__assign");function Ky(e,i){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&i.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)i.indexOf(r[o])<0&&(t[r[o]]=e[r[o]]);return t}h(Ky,"__rest");var bt=function(){function e(i,t){i===void 0&&(i=0),t===void 0&&(t=0),this._width=i,this._height=t,this.destroyed=!1,this.internal=!1,this.onResize=new Oe.Runner("setRealSize"),this.onUpdate=new Oe.Runner("update"),this.onError=new Oe.Runner("onError")}return h(e,"Resource"),e.prototype.bind=function(i){this.onResize.add(i),this.onUpdate.add(i),this.onError.add(i),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},e.prototype.unbind=function(i){this.onResize.remove(i),this.onUpdate.remove(i),this.onError.remove(i)},e.prototype.resize=function(i,t){(i!==this._width||t!==this._height)&&(this._width=i,this._height=t,this.onResize.emit(i,t))},Object.defineProperty(e.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),e.prototype.update=function(){this.destroyed||this.onUpdate.emit()},e.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),e.prototype.style=function(i,t,r){return!1},e.prototype.dispose=function(){},e.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},e.test=function(i,t){return!1},e}(),xi=function(e){oe(i,e);function i(t,r){var o=this,n=r||{},s=n.width,a=n.height;if(!s||!a)throw new Error("BufferResource width or height invalid");return o=e.call(this,s,a)||this,o.data=t,o}return h(i,"BufferResource"),i.prototype.upload=function(t,r,o){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_.ALPHA_MODES.UNPACK);var s=r.realWidth,a=r.realHeight;return o.width===s&&o.height===a?n.texSubImage2D(r.target,0,0,0,s,a,r.format,o.type,this.data):(o.width=s,o.height=a,n.texImage2D(r.target,0,o.internalFormat,s,a,0,r.format,o.type,this.data)),!0},i.prototype.dispose=function(){this.data=null},i.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},i}(bt),Zy={scaleMode:_.SCALE_MODES.NEAREST,format:_.FORMATS.RGBA,alphaMode:_.ALPHA_MODES.NPM},Ee=function(e){oe(i,e);function i(t,r){t===void 0&&(t=null),r===void 0&&(r=null);var o=e.call(this)||this;r=r||{};var n=r.alphaMode,s=r.mipmap,a=r.anisotropicLevel,l=r.scaleMode,u=r.width,p=r.height,f=r.wrapMode,c=r.format,d=r.type,v=r.target,m=r.resolution,y=r.resourceOptions;return t&&!(t instanceof bt)&&(t=Fr(t,y),t.internal=!0),o.resolution=m||Z.settings.RESOLUTION,o.width=Math.round((u||0)*o.resolution)/o.resolution,o.height=Math.round((p||0)*o.resolution)/o.resolution,o._mipmap=s!==void 0?s:Z.settings.MIPMAP_TEXTURES,o.anisotropicLevel=a!==void 0?a:Z.settings.ANISOTROPIC_LEVEL,o._wrapMode=f||Z.settings.WRAP_MODE,o._scaleMode=l!==void 0?l:Z.settings.SCALE_MODE,o.format=c||_.FORMATS.RGBA,o.type=d||_.TYPES.UNSIGNED_BYTE,o.target=v||_.TARGETS.TEXTURE_2D,o.alphaMode=n!==void 0?n:_.ALPHA_MODES.UNPACK,o.uid=L.uid(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=u>0&&p>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(t),o}return h(i,"BaseTexture"),Object.defineProperty(i.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),i.prototype.setStyle=function(t,r){var o;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,o=!0),r!==void 0&&r!==this.mipmap&&(this.mipmap=r,o=!0),o&&this.dirtyStyleId++,this},i.prototype.setSize=function(t,r,o){return o=o||this.resolution,this.setRealSize(t*o,r*o,o)},i.prototype.setRealSize=function(t,r,o){return this.resolution=o||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(r)/this.resolution,this._refreshPOT(),this.update(),this},i.prototype._refreshPOT=function(){this.isPowerOfTwo=L.isPow2(this.realWidth)&&L.isPow2(this.realHeight)},i.prototype.setResolution=function(t){var r=this.resolution;return r===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*r)/t,this.height=Math.round(this.height*r)/t,this.emit("update",this)),this._refreshPOT(),this)},i.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},i.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},i.prototype.onError=function(t){this.emit("error",this,t)},i.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete L.BaseTextureCache[this.cacheId],delete L.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),i.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},i.prototype.dispose=function(){this.emit("dispose",this)},i.prototype.castToBaseTexture=function(){return this},i.from=function(t,r,o){o===void 0&&(o=Z.settings.STRICT_TEXTURE_CACHE);var n=typeof t=="string",s=null;if(n)s=t;else{if(!t._pixiId){var a=r&&r.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+L.uid()}s=t._pixiId}var l=L.BaseTextureCache[s];if(n&&o&&!l)throw new Error('The cacheId "'+s+'" does not exist in BaseTextureCache.');return l||(l=new i(t,r),l.cacheId=s,i.addToCache(l,s)),l},i.fromBuffer=function(t,r,o,n){t=t||new Float32Array(r*o*4);var s=new xi(t,{width:r,height:o}),a=t instanceof Float32Array?_.TYPES.FLOAT:_.TYPES.UNSIGNED_BYTE;return new i(s,Object.assign(Zy,n||{width:r,height:o,type:a}))},i.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),L.BaseTextureCache[r]&&console.warn("BaseTexture added to the cache with an id ["+r+"] that already had an entry"),L.BaseTextureCache[r]=t)},i.removeFromCache=function(t){if(typeof t=="string"){var r=L.BaseTextureCache[t];if(r){var o=r.textureCacheIds.indexOf(t);return o>-1&&r.textureCacheIds.splice(o,1),delete L.BaseTextureCache[t],r}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete L.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},i._globalBatch=0,i}(L.EventEmitter),Ur=function(e){oe(i,e);function i(t,r){var o=this,n=r||{},s=n.width,a=n.height;o=e.call(this,s,a)||this,o.items=[],o.itemDirtyIds=[];for(var l=0;l<t;l++){var u=new Ee;o.items.push(u),o.itemDirtyIds.push(-2)}return o.length=t,o._load=null,o.baseTexture=null,o}return h(i,"AbstractMultiResource"),i.prototype.initFromArray=function(t,r){for(var o=0;o<this.length;o++)!t[o]||(t[o].castToBaseTexture?this.addBaseTextureAt(t[o].castToBaseTexture(),o):t[o]instanceof bt?this.addResourceAt(t[o],o):this.addResourceAt(Fr(t[o],r),o))},i.prototype.dispose=function(){for(var t=0,r=this.length;t<r;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},i.prototype.addResourceAt=function(t,r){if(!this.items[r])throw new Error("Index "+r+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[r].setResource(t),this},i.prototype.bind=function(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");e.prototype.bind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=t,this.items[r].on("update",t.update,t)},i.prototype.unbind=function(t){e.prototype.unbind.call(this,t);for(var r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",t.update,t)},i.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.items.map(function(n){return n.resource}).filter(function(n){return n}),o=r.map(function(n){return n.load()});return this._load=Promise.all(o).then(function(){var n=t.items[0],s=n.realWidth,a=n.realHeight;return t.resize(s,a),Promise.resolve(t)}),this._load},i}(bt),Sn=function(e){oe(i,e);function i(t,r){var o=this,n=r||{},s=n.width,a=n.height,l,u;return Array.isArray(t)?(l=t,u=t.length):u=t,o=e.call(this,u,{width:s,height:a})||this,l&&o.initFromArray(l,r),o}return h(i,"ArrayResource"),i.prototype.addBaseTextureAt=function(t,r){if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this},i.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=_.TARGETS.TEXTURE_2D_ARRAY},i.prototype.upload=function(t,r,o){var n=this,s=n.length,a=n.itemDirtyIds,l=n.items,u=t.gl;o.dirtyId<0&&u.texImage3D(u.TEXTURE_2D_ARRAY,0,o.internalFormat,this._width,this._height,s,0,r.format,o.type,null);for(var p=0;p<s;p++){var f=l[p];a[p]<f.dirtyId&&(a[p]=f.dirtyId,f.valid&&u.texSubImage3D(u.TEXTURE_2D_ARRAY,0,0,0,p,f.resource.width,f.resource.height,1,r.format,o.type,f.resource.source))}return!0},i}(Ur),qe=function(e){oe(i,e);function i(t){var r=this,o=t,n=o.naturalWidth||o.videoWidth||o.width,s=o.naturalHeight||o.videoHeight||o.height;return r=e.call(this,n,s)||this,r.source=t,r.noSubImage=!1,r}return h(i,"BaseImageResource"),i.crossOrigin=function(t,r,o){o===void 0&&r.indexOf("data:")!==0?t.crossOrigin=L.determineCrossOrigin(r):o!==!1&&(t.crossOrigin=typeof o=="string"?o:"anonymous")},i.prototype.upload=function(t,r,o,n){var s=t.gl,a=r.realWidth,l=r.realHeight;return n=n||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_.ALPHA_MODES.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&o.width===a&&o.height===l?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,o.type,n):(o.width=a,o.height=l,s.texImage2D(r.target,0,o.internalFormat,r.format,o.type,n)),!0},i.prototype.update=function(){if(!this.destroyed){var t=this.source,r=t.naturalWidth||t.videoWidth||t.width,o=t.naturalHeight||t.videoHeight||t.height;this.resize(r,o),e.prototype.update.call(this)}},i.prototype.dispose=function(){this.source=null},i}(bt),Lr=function(e){oe(i,e);function i(t){return e.call(this,t)||this}return h(i,"CanvasResource"),i.test=function(t){var r=self.OffscreenCanvas;return r&&t instanceof r?!0:self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},i}(qe),On=function(e){oe(i,e);function i(t,r){var o=this,n=r||{},s=n.width,a=n.height,l=n.autoLoad,u=n.linkBaseTexture;if(t&&t.length!==i.SIDES)throw new Error("Invalid length. Got "+t.length+", expected 6");o=e.call(this,6,{width:s,height:a})||this;for(var p=0;p<i.SIDES;p++)o.items[p].target=_.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+p;return o.linkBaseTexture=u!==!1,t&&o.initFromArray(t,r),l!==!1&&o.load(),o}return h(i,"CubeResource"),i.prototype.bind=function(t){e.prototype.bind.call(this,t),t.target=_.TARGETS.TEXTURE_CUBE_MAP},i.prototype.addBaseTextureAt=function(t,r,o){if(o===void 0&&(o=this.linkBaseTexture),!this.items[r])throw new Error("Index "+r+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,r);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=_.TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+r,t.parentTextureArray=this.baseTexture,this.items[r]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[r]=t,this},i.prototype.upload=function(t,r,o){for(var n=this.itemDirtyIds,s=0;s<i.SIDES;s++){var a=this.items[s];n[s]<a.dirtyId&&(a.valid&&a.resource?(a.resource.upload(t,a,o),n[s]=a.dirtyId):n[s]<-1&&(t.gl.texImage2D(a.target,0,o.internalFormat,r.realWidth,r.realHeight,0,r.format,o.type,null),n[s]=-1))}return!0},i.test=function(t){return Array.isArray(t)&&t.length===i.SIDES},i.SIDES=6,i}(Ur),Dr=function(e){oe(i,e);function i(t,r){var o=this;if(r=r||{},!(t instanceof HTMLImageElement)){var n=new Image;qe.crossOrigin(n,t,r.crossorigin),n.src=t,t=n}return o=e.call(this,t)||this,!t.complete&&!!o._width&&!!o._height&&(o._width=0,o._height=0),o.url=t.src,o._process=null,o.preserveBitmap=!1,o.createBitmap=(r.createBitmap!==void 0?r.createBitmap:Z.settings.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,o.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,o.bitmap=null,o._load=null,r.autoLoad!==!1&&o.load(),o}return h(i,"ImageResource"),i.prototype.load=function(t){var r=this;return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise(function(o,n){var s=r.source;r.url=s.src;var a=h(function(){r.destroyed||(s.onload=null,s.onerror=null,r.resize(s.width,s.height),r._load=null,r.createBitmap?o(r.process()):o(r))},"completed");s.complete&&s.src?a():(s.onload=a,s.onerror=function(l){n(l),r.onError.emit(l)})}),this._load)},i.prototype.process=function(){var t=this,r=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!self.createImageBitmap)return Promise.resolve(this);var o=self.createImageBitmap,n=!r.crossOrigin||r.crossOrigin==="anonymous";return this._process=fetch(r.src,{mode:n?"cors":"no-cors"}).then(function(s){return s.blob()}).then(function(s){return o(s,0,0,r.width,r.height,{premultiplyAlpha:t.alphaMode===_.ALPHA_MODES.UNPACK?"premultiply":"none"})}).then(function(s){return t.destroyed?Promise.reject():(t.bitmap=s,t.update(),t._process=null,Promise.resolve(t))}),this._process},i.prototype.upload=function(t,r,o){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return e.prototype.upload.call(this,t,r,o);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(e.prototype.upload.call(this,t,r,o,this.bitmap),!this.preserveBitmap){var n=!0,s=r._glTextures;for(var a in s){var l=s[a];if(l!==o&&l.dirtyId!==r.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},i.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,e.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},i.test=function(t){return typeof t=="string"||t instanceof HTMLImageElement},i}(qe),Cn=function(e){oe(i,e);function i(t,r){var o=this;return r=r||{},o=e.call(this,document.createElement("canvas"))||this,o._width=0,o._height=0,o.svg=t,o.scale=r.scale||1,o._overrideWidth=r.width,o._overrideHeight=r.height,o._resolve=null,o._crossorigin=r.crossorigin,o._load=null,r.autoLoad!==!1&&o.load(),o}return h(i,"SVGResource"),i.prototype.load=function(){var t=this;return this._load?this._load:(this._load=new Promise(function(r){if(t._resolve=function(){t.resize(t.source.width,t.source.height),r(t)},/^\<svg/.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}),this._load)},i.prototype._loadSvg=function(){var t=this,r=new Image;qe.crossOrigin(r,this.svg,this._crossorigin),r.src=this.svg,r.onerror=function(o){!t._resolve||(r.onerror=null,t.onError.emit(o))},r.onload=function(){if(!!t._resolve){var o=r.width,n=r.height;if(!o||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var s=o*t.scale,a=n*t.scale;(t._overrideWidth||t._overrideHeight)&&(s=t._overrideWidth||t._overrideHeight/n*o,a=t._overrideHeight||t._overrideWidth/o*n),s=Math.round(s),a=Math.round(a);var l=t.source;l.width=s,l.height=a,l._pixiId="canvas_"+L.uid(),l.getContext("2d").drawImage(r,0,0,o,n,0,0,s,a),t._resolve(),t._resolve=null}}},i.getSize=function(t){var r=i.SVG_SIZE.exec(t),o={};return r&&(o[r[1]]=Math.round(parseFloat(r[3])),o[r[5]]=Math.round(parseFloat(r[7]))),o},i.prototype.dispose=function(){e.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},i.test=function(t,r){return r==="svg"||typeof t=="string"&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||typeof t=="string"&&i.SVG_XML.test(t)},i.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i}(qe),Nn=function(e){oe(i,e);function i(t,r){var o=this;if(r=r||{},!(t instanceof HTMLVideoElement)){var n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);var s=t[0].src||t[0];qe.crossOrigin(n,s,r.crossorigin);for(var a=0;a<t.length;++a){var l=document.createElement("source"),u=t[a],p=u.src,f=u.mime;p=p||t[a];var c=p.split("?").shift().toLowerCase(),d=c.substr(c.lastIndexOf(".")+1);f=f||i.MIME_TYPES[d]||"video/"+d,l.src=p,l.type=f,n.appendChild(l)}t=n}return o=e.call(this,t)||this,o.noSubImage=!0,o._autoUpdate=!0,o._isConnectedToTicker=!1,o._updateFPS=r.updateFPS||0,o._msToNextUpdate=0,o.autoPlay=r.autoPlay!==!1,o._load=null,o._resolve=null,o._onCanPlay=o._onCanPlay.bind(o),o._onError=o._onError.bind(o),r.autoLoad!==!1&&o.load(),o}return h(i,"VideoResource"),i.prototype.update=function(t){if(!this.destroyed){var r=Xt.Ticker.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-r),(!this._updateFPS||this._msToNextUpdate<=0)&&(e.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},i.prototype.load=function(){var t=this;if(this._load)return this._load;var r=this.source;return(r.readyState===r.HAVE_ENOUGH_DATA||r.readyState===r.HAVE_FUTURE_DATA)&&r.width&&r.height&&(r.complete=!0),r.addEventListener("play",this._onPlayStart.bind(this)),r.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(r.addEventListener("canplay",this._onCanPlay),r.addEventListener("canplaythrough",this._onCanPlay),r.addEventListener("error",this._onError,!0)),this._load=new Promise(function(o){t.valid?o(t):(t._resolve=o,r.load())}),this._load},i.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},i.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&t.paused===!1&&t.ended===!1&&t.readyState>2},i.prototype._isSourceReady=function(){var t=this.source;return t.readyState===3||t.readyState===4},i.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Xt.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0)},i.prototype._onPlayStop=function(){this._isConnectedToTicker&&(Xt.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1)},i.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var r=this.valid;this.resize(t.videoWidth,t.videoHeight),!r&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},i.prototype.dispose=function(){this._isConnectedToTicker&&(Xt.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1);var t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),e.prototype.dispose.call(this)},Object.defineProperty(i.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Xt.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Xt.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),i.test=function(t,r){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||i.TYPES.indexOf(r)>-1},i.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],i.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},i}(qe),Mn=function(e){oe(i,e);function i(t){return e.call(this,t)||this}return h(i,"ImageBitmapResource"),i.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},i}(qe);Ti.push(Dr,Mn,Lr,Nn,Cn,xi,On,Sn);var Wu={__proto__:null,Resource:bt,BaseImageResource:qe,INSTALLED:Ti,autoDetectResource:Fr,AbstractMultiResource:Ur,ArrayResource:Sn,BufferResource:xi,CanvasResource:Lr,CubeResource:On,ImageResource:Dr,SVGResource:Cn,VideoResource:Nn,ImageBitmapResource:Mn},$y=function(e){oe(i,e);function i(){return e!==null&&e.apply(this,arguments)||this}return h(i,"DepthResource"),i.prototype.upload=function(t,r,o){var n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===_.ALPHA_MODES.UNPACK);var s=r.realWidth,a=r.realHeight;return o.width===s&&o.height===a?n.texSubImage2D(r.target,0,0,0,s,a,r.format,o.type,this.data):(o.width=s,o.height=a,n.texImage2D(r.target,0,o.internalFormat,s,a,0,r.format,o.type,this.data)),!0},i}(xi),Br=function(){function e(i,t){this.width=Math.round(i||100),this.height=Math.round(t||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Oe.Runner("disposeFramebuffer"),this.multisample=_.MSAA_QUALITY.NONE}return h(e,"Framebuffer"),Object.defineProperty(e.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),e.prototype.addColorTexture=function(i,t){return i===void 0&&(i=0),this.colorTextures[i]=t||new Ee(null,{scaleMode:_.SCALE_MODES.NEAREST,resolution:1,mipmap:_.MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.addDepthTexture=function(i){return this.depthTexture=i||new Ee(new $y(null,{width:this.width,height:this.height}),{scaleMode:_.SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:_.MIPMAP_MODES.OFF,format:_.FORMATS.DEPTH_COMPONENT,type:_.TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},e.prototype.resize=function(i,t){if(i=Math.round(i),t=Math.round(t),!(i===this.width&&t===this.height)){this.width=i,this.height=t,this.dirtyId++,this.dirtySize++;for(var r=0;r<this.colorTextures.length;r++){var o=this.colorTextures[r],n=o.resolution;o.setSize(i/n,t/n)}if(this.depthTexture){var n=this.depthTexture.resolution;this.depthTexture.setSize(i/n,t/n)}}},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},e}(),Fn=function(e){oe(i,e);function i(t){var r=this;if(typeof t=="number"){var o=arguments[0],n=arguments[1],s=arguments[2],a=arguments[3];t={width:o,height:n,scaleMode:s,resolution:a}}return t.width=t.width||100,t.height=t.height||100,t.multisample=t.multisample!==void 0?t.multisample:_.MSAA_QUALITY.NONE,r=e.call(this,null,t)||this,r.mipmap=_.MIPMAP_MODES.OFF,r.valid=!0,r.clearColor=[0,0,0,0],r.framebuffer=new Br(r.realWidth,r.realHeight).addColorTexture(0,r),r.framebuffer.multisample=t.multisample,r.maskStack=[],r.filterStack=[{}],r}return h(i,"BaseRenderTexture"),i.prototype.resize=function(t,r){this.framebuffer.resize(t*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},i.prototype.dispose=function(){this.framebuffer.dispose(),e.prototype.dispose.call(this)},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},i}(Ee),Un=function(){function e(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return h(e,"TextureUvs"),e.prototype.set=function(i,t,r){var o=t.width,n=t.height;if(r){var s=i.width/2/o,a=i.height/2/n,l=i.x/o+s,u=i.y/n+a;r=G.groupD8.add(r,G.groupD8.NW),this.x0=l+s*G.groupD8.uX(r),this.y0=u+a*G.groupD8.uY(r),r=G.groupD8.add(r,2),this.x1=l+s*G.groupD8.uX(r),this.y1=u+a*G.groupD8.uY(r),r=G.groupD8.add(r,2),this.x2=l+s*G.groupD8.uX(r),this.y2=u+a*G.groupD8.uY(r),r=G.groupD8.add(r,2),this.x3=l+s*G.groupD8.uX(r),this.y3=u+a*G.groupD8.uY(r)}else this.x0=i.x/o,this.y0=i.y/n,this.x1=(i.x+i.width)/o,this.y1=i.y/n,this.x2=(i.x+i.width)/o,this.y2=(i.y+i.height)/n,this.x3=i.x/o,this.y3=(i.y+i.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},e.prototype.toString=function(){return"[@pixi/core:TextureUvs "+("x0="+this.x0+" y0="+this.y0+" ")+("x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" ")+("y2="+this.y2+" x3="+this.x3+" y3="+this.y3)+"]"},e}(),zu=new Un,Ye=function(e){oe(i,e);function i(t,r,o,n,s,a){var l=e.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new G.Rectangle(0,0,1,1)),t instanceof i&&(t=t.baseTexture),l.baseTexture=t,l._frame=r,l.trim=n,l.valid=!1,l._uvs=zu,l.uvMatrix=null,l.orig=o||r,l._rotate=Number(s||0),s===!0)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new G.Point(a.x,a.y):new G.Point(0,0),l._updateID=0,l.textureCacheIds=[],t.valid?l.noFrame?t.valid&&l.onBaseTextureUpdated(t):l.frame=r:t.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&t.on("update",l.onBaseTextureUpdated,l),l}return h(i,"Texture"),i.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},i.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},i.prototype.destroy=function(t){if(this.baseTexture){if(t){var r=this.baseTexture.resource;r&&r.url&&L.TextureCache[r.url]&&i.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,i.removeFromCache(this),this.textureCacheIds=null},i.prototype.clone=function(){var t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),o=new i(this.baseTexture,!this.noFrame&&t,r,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(o._frame=t),o},i.prototype.updateUvs=function(){this._uvs===zu&&(this._uvs=new Un),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},i.from=function(t,r,o){r===void 0&&(r={}),o===void 0&&(o=Z.settings.STRICT_TEXTURE_CACHE);var n=typeof t=="string",s=null;if(n)s=t;else{if(!t._pixiId){var a=r&&r.pixiIdPrefix||"pixiid";t._pixiId=a+"_"+L.uid()}s=t._pixiId}var l=L.TextureCache[s];if(n&&o&&!l)throw new Error('The cacheId "'+s+'" does not exist in TextureCache.');return l||(r.resolution||(r.resolution=L.getResolutionOfUrl(t)),l=new i(new Ee(t,r)),l.baseTexture.cacheId=s,Ee.addToCache(l.baseTexture,s),i.addToCache(l,s)),l},i.fromURL=function(t,r){var o=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),n=i.from(t,Object.assign({resourceOptions:o},r),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then(function(){return Promise.resolve(n)})},i.fromBuffer=function(t,r,o,n){return new i(Ee.fromBuffer(t,r,o,n))},i.fromLoader=function(t,r,o,n){var s=new Ee(t,Object.assign({scaleMode:Z.settings.SCALE_MODE,resolution:L.getResolutionOfUrl(r)},n)),a=s.resource;a instanceof Dr&&(a.url=r);var l=new i(s);return o||(o=r),Ee.addToCache(l.baseTexture,o),i.addToCache(l,o),o!==r&&(Ee.addToCache(l.baseTexture,r),i.addToCache(l,r)),l.baseTexture.valid?Promise.resolve(l):new Promise(function(u){l.baseTexture.once("loaded",function(){return u(l)})})},i.addToCache=function(t,r){r&&(t.textureCacheIds.indexOf(r)===-1&&t.textureCacheIds.push(r),L.TextureCache[r]&&console.warn("Texture added to the cache with an id ["+r+"] that already had an entry"),L.TextureCache[r]=t)},i.removeFromCache=function(t){if(typeof t=="string"){var r=L.TextureCache[t];if(r){var o=r.textureCacheIds.indexOf(t);return o>-1&&r.textureCacheIds.splice(o,1),delete L.TextureCache[t],r}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)L.TextureCache[t.textureCacheIds[n]]===t&&delete L.TextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(i.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var r=t.x,o=t.y,n=t.width,s=t.height,a=r+n>this.baseTexture.width,l=o+s>this.baseTexture.height;if(a||l){var u=a&&l?"and":"or",p="X: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.width,f="Y: "+o+" + "+s+" = "+(o+s)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+(p+" "+u+" "+f))}this.valid=n&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),i.prototype.castToBaseTexture=function(){return this.baseTexture},i}(L.EventEmitter);function Jy(){var e=document.createElement("canvas");e.width=16,e.height=16;var i=e.getContext("2d");return i.fillStyle="white",i.fillRect(0,0,16,16),new Ye(new Ee(new Lr(e)))}h(Jy,"createWhiteTexture");function Gr(e){e.destroy=h(function(){},"_emptyDestroy"),e.on=h(function(){},"_emptyOn"),e.once=h(function(){},"_emptyOnce"),e.emit=h(function(){},"_emptyEmit")}h(Gr,"removeAllHandlers");Ye.EMPTY=new Ye(new Ee);Gr(Ye.EMPTY);Gr(Ye.EMPTY.baseTexture);Ye.WHITE=Jy();Gr(Ye.WHITE);Gr(Ye.WHITE.baseTexture);var kr=function(e){oe(i,e);function i(t,r){var o=e.call(this,t,r)||this;return o.valid=!0,o.filterFrame=null,o.filterPoolKey=null,o.updateUvs(),o}return h(i,"RenderTexture"),Object.defineProperty(i.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),i.prototype.resize=function(t,r,o){o===void 0&&(o=!0);var n=this.baseTexture.resolution,s=Math.round(t*n)/n,a=Math.round(r*n)/n;this.valid=s>0&&a>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=a,o&&this.baseTexture.resize(s,a),this.updateUvs()},i.prototype.setResolution=function(t){var r=this.baseTexture;r.resolution!==t&&(r.setResolution(t),this.resize(r.width,r.height,!1))},i.create=function(t){for(var r=arguments,o=[],n=1;n<arguments.length;n++)o[n-1]=r[n];return typeof t=="number"&&(L.deprecation("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:o[0],scaleMode:o[1],resolution:o[2]}),new i(new Fn(t))},i}(Ye),Ku=function(){function e(i){this.texturePool={},this.textureOptions=i||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return h(e,"RenderTexturePool"),e.prototype.createTexture=function(i,t,r){r===void 0&&(r=_.MSAA_QUALITY.NONE);var o=new Fn(Object.assign({width:i,height:t,resolution:1,multisample:r},this.textureOptions));return new kr(o)},e.prototype.getOptimalTexture=function(i,t,r,o){r===void 0&&(r=1),o===void 0&&(o=_.MSAA_QUALITY.NONE);var n;i=Math.ceil(i*r),t=Math.ceil(t*r),!this.enableFullScreen||i!==this._pixelsWidth||t!==this._pixelsHeight?(i=L.nextPow2(i),t=L.nextPow2(t),n=((i&65535)<<16|t&65535)>>>0,o>1&&(n+=o*4294967296)):n=o>1?-o:-1,this.texturePool[n]||(this.texturePool[n]=[]);var s=this.texturePool[n].pop();return s||(s=this.createTexture(i,t,o)),s.filterPoolKey=n,s.setResolution(r),s},e.prototype.getFilterTexture=function(i,t,r){var o=this.getOptimalTexture(i.width,i.height,t||i.resolution,r||_.MSAA_QUALITY.NONE);return o.filterFrame=i.filterFrame,o},e.prototype.returnTexture=function(i){var t=i.filterPoolKey;i.filterFrame=null,this.texturePool[t].push(i)},e.prototype.returnFilterTexture=function(i){this.returnTexture(i)},e.prototype.clear=function(i){if(i=i!==!1,i)for(var t in this.texturePool){var r=this.texturePool[t];if(r)for(var o=0;o<r.length;o++)r[o].destroy(!0)}this.texturePool={}},e.prototype.setScreenSize=function(i){if(!(i.width===this._pixelsWidth&&i.height===this._pixelsHeight)){this.enableFullScreen=i.width>0&&i.height>0;for(var t in this.texturePool)if(Number(t)<0){var r=this.texturePool[t];if(r)for(var o=0;o<r.length;o++)r[o].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=i.width,this._pixelsHeight=i.height}},e.SCREEN_KEY=-1,e}(),Ln=function(){function e(i,t,r,o,n,s,a){t===void 0&&(t=0),r===void 0&&(r=!1),o===void 0&&(o=_.TYPES.FLOAT),this.buffer=i,this.size=t,this.normalized=r,this.type=o,this.stride=n,this.start=s,this.instance=a}return h(e,"Attribute"),e.prototype.destroy=function(){this.buffer=null},e.from=function(i,t,r,o,n){return new e(i,t,r,o,n)},e}(),Qy=0,Pe=function(){function e(i,t,r){t===void 0&&(t=!0),r===void 0&&(r=!1),this.data=i||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=t,this.id=Qy++,this.disposeRunner=new Oe.Runner("disposeBuffer")}return h(e,"Buffer"),e.prototype.update=function(i){i instanceof Array&&(i=new Float32Array(i)),this.data=i||this.data,this._updateID++},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(e.prototype,"index",{get:function(){return this.type===_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER},set:function(i){this.type=i?_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:_.BUFFER_TYPE.ARRAY_BUFFER},enumerable:!1,configurable:!0}),e.from=function(i){return i instanceof Array&&(i=new Float32Array(i)),new e(i)},e}(),e_={Float32Array,Uint32Array,Int32Array,Uint8Array};function t_(e,i){for(var t=0,r=0,o={},n=0;n<e.length;n++)r+=i[n],t+=e[n].length;for(var s=new ArrayBuffer(t*4),a=null,l=0,n=0;n<e.length;n++){var u=i[n],p=e[n],f=L.getBufferType(p);o[f]||(o[f]=new e_[f](s)),a=o[f];for(var c=0;c<p.length;c++){var d=(c/u|0)*r+l,v=c%u;a[d+v]=p[c]}l+=u}return new Float32Array(s)}h(t_,"interleaveTypedArrays");var Zu={5126:4,5123:2,5121:1},i_=0,r_={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Hr=function(){function e(i,t){i===void 0&&(i=[]),t===void 0&&(t={}),this.buffers=i,this.indexBuffer=null,this.attributes=t,this.glVertexArrayObjects={},this.id=i_++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Oe.Runner("disposeGeometry"),this.refCount=0}return h(e,"Geometry"),e.prototype.addAttribute=function(i,t,r,o,n,s,a,l){if(r===void 0&&(r=0),o===void 0&&(o=!1),l===void 0&&(l=!1),!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Pe||(t instanceof Array&&(t=new Float32Array(t)),t=new Pe(t));var u=i.split("|");if(u.length>1){for(var p=0;p<u.length;p++)this.addAttribute(u[p],t,r,o,n);return this}var f=this.buffers.indexOf(t);return f===-1&&(this.buffers.push(t),f=this.buffers.length-1),this.attributes[i]=new Ln(f,r,o,n,s,a,l),this.instanced=this.instanced||l,this},e.prototype.getAttribute=function(i){return this.attributes[i]},e.prototype.getBuffer=function(i){return this.buffers[this.getAttribute(i).buffer]},e.prototype.addIndex=function(i){return i instanceof Pe||(i instanceof Array&&(i=new Uint16Array(i)),i=new Pe(i)),i.type=_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=i,this.buffers.indexOf(i)===-1&&this.buffers.push(i),this},e.prototype.getIndex=function(){return this.indexBuffer},e.prototype.interleave=function(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;var i=[],t=[],r=new Pe,o;for(o in this.attributes){var n=this.attributes[o],s=this.buffers[n.buffer];i.push(s.data),t.push(n.size*Zu[n.type]/4),n.buffer=0}for(r.data=t_(i,t),o=0;o<this.buffers.length;o++)this.buffers[o]!==this.indexBuffer&&this.buffers[o].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},e.prototype.getSize=function(){for(var i in this.attributes){var t=this.attributes[i],r=this.buffers[t.buffer];return r.data.length/(t.stride/4||t.size)}return 0},e.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},e.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},e.prototype.clone=function(){for(var i=new e,t=0;t<this.buffers.length;t++)i.buffers[t]=new Pe(this.buffers[t].data.slice(0));for(var t in this.attributes){var r=this.attributes[t];i.attributes[t]=new Ln(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(i.indexBuffer=i.buffers[this.buffers.indexOf(this.indexBuffer)],i.indexBuffer.type=_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),i},e.merge=function(i){for(var t=new e,r=[],o=[],n=[],s,a=0;a<i.length;a++){s=i[a];for(var l=0;l<s.buffers.length;l++)o[l]=o[l]||0,o[l]+=s.buffers[l].data.length,n[l]=0}for(var a=0;a<s.buffers.length;a++)r[a]=new r_[L.getBufferType(s.buffers[a].data)](o[a]),t.buffers[a]=new Pe(r[a]);for(var a=0;a<i.length;a++){s=i[a];for(var l=0;l<s.buffers.length;l++)r[l].set(s.buffers[l].data,n[l]),n[l]+=s.buffers[l].data.length}if(t.attributes=s.attributes,s.indexBuffer){t.indexBuffer=t.buffers[s.buffers.indexOf(s.indexBuffer)],t.indexBuffer.type=_.BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;for(var u=0,p=0,f=0,c=0,a=0;a<s.buffers.length;a++)if(s.buffers[a]!==s.indexBuffer){c=a;break}for(var a in s.attributes){var d=s.attributes[a];(d.buffer|0)===c&&(p+=d.size*Zu[d.type]/4)}for(var a=0;a<i.length;a++){for(var v=i[a].indexBuffer.data,l=0;l<v.length;l++)t.indexBuffer.data[l+f]+=u;u+=i[a].buffers[c].data.length/p,f+=v.length}}return t},e}(),$u=function(e){oe(i,e);function i(){var t=e.call(this)||this;return t.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),t}return h(i,"Quad"),i}(Hr),Ju=function(e){oe(i,e);function i(){var t=e.call(this)||this;return t.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),t.uvs=new Float32Array([0,0,1,0,1,1,0,1]),t.vertexBuffer=new Pe(t.vertices),t.uvBuffer=new Pe(t.uvs),t.addAttribute("aVertexPosition",t.vertexBuffer).addAttribute("aTextureCoord",t.uvBuffer).addIndex([0,1,2,0,2,3]),t}return h(i,"QuadUv"),i.prototype.map=function(t,r){var o=0,n=0;return this.uvs[0]=o,this.uvs[1]=n,this.uvs[2]=o+r.width/t.width,this.uvs[3]=n,this.uvs[4]=o+r.width/t.width,this.uvs[5]=n+r.height/t.height,this.uvs[6]=o,this.uvs[7]=n+r.height/t.height,o=r.x,n=r.y,this.vertices[0]=o,this.vertices[1]=n,this.vertices[2]=o+r.width,this.vertices[3]=n,this.vertices[4]=o+r.width,this.vertices[5]=n+r.height,this.vertices[6]=o,this.vertices[7]=n+r.height,this.invalidate(),this},i.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},i}(Hr),o_=0,gt=function(){function e(i,t,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=o_++,this.static=!!t,this.ubo=!!r,i instanceof Pe?(this.buffer=i,this.buffer.type=_.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=i,this.ubo&&(this.buffer=new Pe(new Float32Array(1)),this.buffer.type=_.BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}return h(e,"UniformGroup"),e.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},e.prototype.add=function(i,t,r){if(!this.ubo)this.uniforms[i]=new e(t,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")},e.from=function(i,t,r){return new e(i,t,r)},e.uboFrom=function(i,t){return new e(i,t??!0,!0)},e}(),Qu=function(){function e(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=_.MSAA_QUALITY.NONE,this.sourceFrame=new G.Rectangle,this.destinationFrame=new G.Rectangle,this.bindingSourceFrame=new G.Rectangle,this.bindingDestinationFrame=new G.Rectangle,this.filters=[],this.transform=null}return h(e,"FilterState"),e.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},e}(),Xr=[new G.Point,new G.Point,new G.Point,new G.Point],Dn=new G.Matrix,Bn=function(){function e(i){this.renderer=i,this.defaultFilterStack=[{}],this.texturePool=new Ku,this.texturePool.setScreenSize(i.view),this.statePool=[],this.quad=new $u,this.quadUv=new Ju,this.tempRect=new G.Rectangle,this.activeState={},this.globalUniforms=new gt({outputFrame:new G.Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return h(e,"FilterSystem"),e.prototype.push=function(i,t){for(var r=this.renderer,o=this.defaultFilterStack,n=this.statePool.pop()||new Qu,s=this.renderer.renderTexture,a=t[0].resolution,l=t[0].multisample,u=t[0].padding,p=t[0].autoFit,f=t[0].legacy,c=1;c<t.length;c++){var d=t[c];a=Math.min(a,d.resolution),l=Math.min(l,d.multisample),u=this.useMaxPadding?Math.max(u,d.padding):u+d.padding,p=p&&d.autoFit,f=f||d.legacy}if(o.length===1&&(this.defaultFilterStack[0].renderTexture=s.current),o.push(n),n.resolution=a,n.multisample=l,n.legacy=f,n.target=i,n.sourceFrame.copyFrom(i.filterArea||i.getBounds(!0)),n.sourceFrame.pad(u),p){var v=this.tempRect.copyFrom(s.sourceFrame);r.projection.transform&&this.transformAABB(Dn.copyFrom(r.projection.transform).invert(),v),n.sourceFrame.fit(v)}this.roundFrame(n.sourceFrame,s.current?s.current.resolution:r.resolution,s.sourceFrame,s.destinationFrame,r.projection.transform),n.renderTexture=this.getOptimalFilterTexture(n.sourceFrame.width,n.sourceFrame.height,a,l),n.filters=t,n.destinationFrame.width=n.renderTexture.width,n.destinationFrame.height=n.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=n.sourceFrame.width,m.height=n.sourceFrame.height,n.renderTexture.filterFrame=n.sourceFrame,n.bindingSourceFrame.copyFrom(s.sourceFrame),n.bindingDestinationFrame.copyFrom(s.destinationFrame),n.transform=r.projection.transform,r.projection.transform=null,s.bind(n.renderTexture,n.sourceFrame,m),r.framebuffer.clear(0,0,0,0)},e.prototype.pop=function(){var i=this.defaultFilterStack,t=i.pop(),r=t.filters;this.activeState=t;var o=this.globalUniforms.uniforms;o.outputFrame=t.sourceFrame,o.resolution=t.resolution;var n=o.inputSize,s=o.inputPixel,a=o.inputClamp;if(n[0]=t.destinationFrame.width,n[1]=t.destinationFrame.height,n[2]=1/n[0],n[3]=1/n[1],s[0]=Math.round(n[0]*t.resolution),s[1]=Math.round(n[1]*t.resolution),s[2]=1/s[0],s[3]=1/s[1],a[0]=.5*s[2],a[1]=.5*s[3],a[2]=t.sourceFrame.width*n[2]-.5*s[2],a[3]=t.sourceFrame.height*n[3]-.5*s[3],t.legacy){var l=o.filterArea;l[0]=t.destinationFrame.width,l[1]=t.destinationFrame.height,l[2]=t.sourceFrame.x,l[3]=t.sourceFrame.y,o.filterClamp=o.inputClamp}this.globalUniforms.update();var u=i[i.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,t.renderTexture,u.renderTexture,_.CLEAR_MODES.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var p=t.renderTexture,f=this.getOptimalFilterTexture(p.width,p.height,t.resolution);f.filterFrame=p.filterFrame;var c=0;for(c=0;c<r.length-1;++c){c===1&&t.multisample>1&&(f=this.getOptimalFilterTexture(p.width,p.height,t.resolution),f.filterFrame=p.filterFrame),r[c].apply(this,p,f,_.CLEAR_MODES.CLEAR,t);var d=p;p=f,f=d}r[c].apply(this,p,u.renderTexture,_.CLEAR_MODES.BLEND,t),c>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(p),this.returnFilterTexture(f)}t.clear(),this.statePool.push(t)},e.prototype.bindAndClear=function(i,t){t===void 0&&(t=_.CLEAR_MODES.CLEAR);var r=this.renderer,o=r.renderTexture,n=r.state;if(i===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,i&&i.filterFrame){var s=this.tempRect;s.x=0,s.y=0,s.width=i.filterFrame.width,s.height=i.filterFrame.height,o.bind(i,i.filterFrame,s)}else i!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?o.bind(i):this.renderer.renderTexture.bind(i,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=n.stateId&1||this.forceClear;(t===_.CLEAR_MODES.CLEAR||t===_.CLEAR_MODES.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},e.prototype.applyFilter=function(i,t,r,o){var n=this.renderer;n.state.set(i.state),this.bindAndClear(r,o),i.uniforms.uSampler=t,i.uniforms.filterGlobals=this.globalUniforms,n.shader.bind(i),i.legacy=!!i.program.attributeData.aTextureCoord,i.legacy?(this.quadUv.map(t._frame,t.filterFrame),n.geometry.bind(this.quadUv),n.geometry.draw(_.DRAW_MODES.TRIANGLES)):(n.geometry.bind(this.quad),n.geometry.draw(_.DRAW_MODES.TRIANGLE_STRIP))},e.prototype.calculateSpriteMatrix=function(i,t){var r=this.activeState,o=r.sourceFrame,n=r.destinationFrame,s=t._texture.orig,a=i.set(n.width,0,0,n.height,o.x,o.y),l=t.worldTransform.copyTo(G.Matrix.TEMP_MATRIX);return l.invert(),a.prepend(l),a.scale(1/s.width,1/s.height),a.translate(t.anchor.x,t.anchor.y),a},e.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},e.prototype.getOptimalFilterTexture=function(i,t,r,o){return r===void 0&&(r=1),o===void 0&&(o=_.MSAA_QUALITY.NONE),this.texturePool.getOptimalTexture(i,t,r,o)},e.prototype.getFilterTexture=function(i,t,r){if(typeof i=="number"){var o=i;i=t,t=o}i=i||this.activeState.renderTexture;var n=this.texturePool.getOptimalTexture(i.width,i.height,t||i.resolution,r||_.MSAA_QUALITY.NONE);return n.filterFrame=i.filterFrame,n},e.prototype.returnFilterTexture=function(i){this.texturePool.returnTexture(i)},e.prototype.emptyPool=function(){this.texturePool.clear(!0)},e.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},e.prototype.transformAABB=function(i,t){var r=Xr[0],o=Xr[1],n=Xr[2],s=Xr[3];r.set(t.left,t.top),o.set(t.left,t.bottom),n.set(t.right,t.top),s.set(t.right,t.bottom),i.apply(r,r),i.apply(o,o),i.apply(n,n),i.apply(s,s);var a=Math.min(r.x,o.x,n.x,s.x),l=Math.min(r.y,o.y,n.y,s.y),u=Math.max(r.x,o.x,n.x,s.x),p=Math.max(r.y,o.y,n.y,s.y);t.x=a,t.y=l,t.width=u-a,t.height=p-l},e.prototype.roundFrame=function(i,t,r,o,n){if(n){var s=n.a,a=n.b,l=n.c,u=n.d;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(u)>1e-4))return}n=n?Dn.copyFrom(n):Dn.identity(),n.translate(-r.x,-r.y).scale(o.width/r.width,o.height/r.height).translate(o.x,o.y),this.transformAABB(n,i),i.ceil(t),this.transformAABB(n.invert(),i)},e}(),Gn=function(){function e(i){this.renderer=i}return h(e,"ObjectRenderer"),e.prototype.flush=function(){},e.prototype.destroy=function(){this.renderer=null},e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.render=function(i){},e}(),kn=function(){function e(i){this.renderer=i,this.emptyRenderer=new Gn(i),this.currentRenderer=this.emptyRenderer}return h(e,"BatchSystem"),e.prototype.setObjectRenderer=function(i){this.currentRenderer!==i&&(this.currentRenderer.stop(),this.currentRenderer=i,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.copyBoundTextures=function(i,t){for(var r=this.renderer.texture.boundTextures,o=t-1;o>=0;--o)i[o]=r[o]||null,i[o]&&(i[o]._batchLocation=o)},e.prototype.boundArray=function(i,t,r,o){for(var n=i.elements,s=i.ids,a=i.count,l=0,u=0;u<a;u++){var p=n[u],f=p._batchLocation;if(f>=0&&f<o&&t[f]===p){s[u]=f;continue}for(;l<o;){var c=t[l];if(c&&c._batchEnabled===r&&c._batchLocation===l){l++;continue}s[u]=l,p._batchLocation=l,t[l]=p;break}}},e.prototype.destroy=function(){this.renderer=null},e}(),eh=0,Hn=function(){function e(i){this.renderer=i,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),i.view.addEventListener("webglcontextlost",this.handleContextLost,!1),i.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return h(e,"ContextSystem"),Object.defineProperty(e.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),e.prototype.contextChange=function(i){this.gl=i,this.renderer.gl=i,this.renderer.CONTEXT_UID=eh++,i.isContextLost()&&i.getExtension("WEBGL_lose_context")&&i.getExtension("WEBGL_lose_context").restoreContext()},e.prototype.initFromContext=function(i){this.gl=i,this.validateContext(i),this.renderer.gl=i,this.renderer.CONTEXT_UID=eh++,this.renderer.runners.contextChange.emit(i)},e.prototype.initFromOptions=function(i){var t=this.createContext(this.renderer.view,i);this.initFromContext(t)},e.prototype.createContext=function(i,t){var r;if(Z.settings.PREFER_ENV>=_.ENV.WEBGL2&&(r=i.getContext("webgl2",t)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=i.getContext("webgl",t)||i.getContext("experimental-webgl",t),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl},e.prototype.getExtensions=function(){var i=this.gl,t={anisotropicFiltering:i.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),s3tc:i.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:i.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:i.getExtension("WEBGL_compressed_texture_etc"),etc1:i.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:i.getExtension("WEBGL_compressed_texture_atc"),astc:i.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,t,{drawBuffers:i.getExtension("WEBGL_draw_buffers"),depthTexture:i.getExtension("WEBGL_depth_texture"),loseContext:i.getExtension("WEBGL_lose_context"),vertexArrayObject:i.getExtension("OES_vertex_array_object")||i.getExtension("MOZ_OES_vertex_array_object")||i.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:i.getExtension("OES_element_index_uint"),floatTexture:i.getExtension("OES_texture_float"),floatTextureLinear:i.getExtension("OES_texture_float_linear"),textureHalfFloat:i.getExtension("OES_texture_half_float"),textureHalfFloatLinear:i.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,t,{colorBufferFloat:i.getExtension("EXT_color_buffer_float")})},e.prototype.handleContextLost=function(i){i.preventDefault()},e.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},e.prototype.destroy=function(){var i=this.renderer.view;this.renderer=null,i.removeEventListener("webglcontextlost",this.handleContextLost),i.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},e.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},e.prototype.validateContext=function(i){var t=i.getContextAttributes(),r="WebGL2RenderingContext"in self&&i instanceof self.WebGL2RenderingContext;r&&(this.webGLVersion=2),t.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var o=r||!!i.getExtension("OES_element_index_uint");this.supports.uint32Indices=o,o||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},e}(),th=function(){function e(i){this.framebuffer=i,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=_.MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}return h(e,"GLFramebuffer"),e}(),n_=new G.Rectangle,Xn=function(){function e(i){this.renderer=i,this.managedFramebuffers=[],this.unknownFramebuffer=new Br(10,10),this.msaaSamples=null}return h(e,"FramebufferSystem"),e.prototype.contextChange=function(){var i=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new G.Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),this.renderer.context.webGLVersion===1){var t=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;Z.settings.PREFER_ENV===_.ENV.WEBGL_LEGACY&&(t=null,r=null),t?i.drawBuffers=function(o){return t.drawBuffersWEBGL(o)}:(this.hasMRT=!1,i.drawBuffers=function(){}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=i.getInternalformatParameter(i.RENDERBUFFER,i.RGBA8,i.SAMPLES)},e.prototype.bind=function(i,t,r){r===void 0&&(r=0);var o=this.gl;if(i){var n=i.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(i);this.current!==i&&(this.current=i,o.bindFramebuffer(o.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==r&&(i.dirtyId++,i.dirtyFormat++,n.mipLevel=r),n.dirtyId!==i.dirtyId&&(n.dirtyId=i.dirtyId,n.dirtyFormat!==i.dirtyFormat?(n.dirtyFormat=i.dirtyFormat,n.dirtySize=i.dirtySize,this.updateFramebuffer(i,r)):n.dirtySize!==i.dirtySize&&(n.dirtySize=i.dirtySize,this.resizeFramebuffer(i)));for(var s=0;s<i.colorTextures.length;s++){var a=i.colorTextures[s];this.renderer.texture.unbind(a.parentTextureArray||a)}if(i.depthTexture&&this.renderer.texture.unbind(i.depthTexture),t){var l=t.width>>r,u=t.height>>r,p=l/t.width;this.setViewport(t.x*p,t.y*p,l,u)}else{var l=i.width>>r,u=i.height>>r;this.setViewport(0,0,l,u)}}else this.current&&(this.current=null,o.bindFramebuffer(o.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},e.prototype.setViewport=function(i,t,r,o){var n=this.viewport;i=Math.round(i),t=Math.round(t),r=Math.round(r),o=Math.round(o),(n.width!==r||n.height!==o||n.x!==i||n.y!==t)&&(n.x=i,n.y=t,n.width=r,n.height=o,this.gl.viewport(i,t,r,o))},Object.defineProperty(e.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),e.prototype.clear=function(i,t,r,o,n){n===void 0&&(n=_.BUFFER_BITS.COLOR|_.BUFFER_BITS.DEPTH);var s=this.gl;s.clearColor(i,t,r,o),s.clear(n)},e.prototype.initFramebuffer=function(i){var t=this.gl,r=new th(t.createFramebuffer());return r.multisample=this.detectSamples(i.multisample),i.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(i),i.disposeRunner.add(this),r},e.prototype.resizeFramebuffer=function(i){var t=this.gl,r=i.glFramebuffers[this.CONTEXT_UID];r.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,r.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.RGBA8,i.width,i.height)),r.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencil),r.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,r.multisample,t.DEPTH24_STENCIL8,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,i.width,i.height));var o=i.colorTextures,n=o.length;t.drawBuffers||(n=Math.min(n,1));for(var s=0;s<n;s++){var a=o[s],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0)}i.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(i.depthTexture,0)},e.prototype.updateFramebuffer=function(i,t){var r=this.gl,o=i.glFramebuffers[this.CONTEXT_UID],n=i.colorTextures,s=n.length;r.drawBuffers||(s=Math.min(s,1)),o.multisample>1&&this.canMultisampleFramebuffer(i)?(o.msaaBuffer=o.msaaBuffer||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,o.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,o.multisample,r.RGBA8,i.width,i.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,o.msaaBuffer)):o.msaaBuffer&&(r.deleteRenderbuffer(o.msaaBuffer),o.msaaBuffer=null,o.blitFramebuffer&&(o.blitFramebuffer.dispose(),o.blitFramebuffer=null));for(var a=[],l=0;l<s;l++){var u=n[l],p=u.parentTextureArray||u;this.renderer.texture.bind(p,0),!(l===0&&o.msaaBuffer)&&(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,u.target,p._glTextures[this.CONTEXT_UID].texture,t),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),i.depthTexture){var f=this.writeDepthTexture;if(f){var c=i.depthTexture;this.renderer.texture.bind(c,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,t)}}(i.stencil||i.depth)&&!(i.depthTexture&&this.writeDepthTexture)?(o.stencil=o.stencil||r.createRenderbuffer(),r.bindRenderbuffer(r.RENDERBUFFER,o.stencil),o.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,o.multisample,r.DEPTH24_STENCIL8,i.width,i.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,i.width,i.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.DEPTH_STENCIL_ATTACHMENT,r.RENDERBUFFER,o.stencil)):o.stencil&&(r.deleteRenderbuffer(o.stencil),o.stencil=null)},e.prototype.canMultisampleFramebuffer=function(i){return this.renderer.context.webGLVersion!==1&&i.colorTextures.length<=1&&!i.depthTexture},e.prototype.detectSamples=function(i){var t=this.msaaSamples,r=_.MSAA_QUALITY.NONE;if(i<=1||t===null)return r;for(var o=0;o<t.length;o++)if(t[o]<=i){r=t[o];break}return r===1&&(r=_.MSAA_QUALITY.NONE),r},e.prototype.blit=function(i,t,r){var o=this,n=o.current,s=o.renderer,a=o.gl,l=o.CONTEXT_UID;if(s.context.webGLVersion===2&&!!n){var u=n.glFramebuffers[l];if(!!u){if(!i){if(!u.msaaBuffer)return;var p=n.colorTextures[0];if(!p)return;u.blitFramebuffer||(u.blitFramebuffer=new Br(n.width,n.height),u.blitFramebuffer.addColorTexture(0,p)),i=u.blitFramebuffer,i.colorTextures[0]!==p&&(i.colorTextures[0]=p,i.dirtyId++,i.dirtyFormat++),(i.width!==n.width||i.height!==n.height)&&(i.width=n.width,i.height=n.height,i.dirtyId++,i.dirtySize++)}t||(t=n_,t.width=n.width,t.height=n.height),r||(r=t);var f=t.width===r.width&&t.height===r.height;this.bind(i),a.bindFramebuffer(a.READ_FRAMEBUFFER,u.framebuffer),a.blitFramebuffer(t.x,t.y,t.width,t.height,r.x,r.y,r.width,r.height,a.COLOR_BUFFER_BIT,f?a.NEAREST:a.LINEAR)}}},e.prototype.disposeFramebuffer=function(i,t){var r=i.glFramebuffers[this.CONTEXT_UID],o=this.gl;if(!!r){delete i.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(i);n>=0&&this.managedFramebuffers.splice(n,1),i.disposeRunner.remove(this),t||(o.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&o.deleteRenderbuffer(r.msaaBuffer),r.stencil&&o.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&r.blitFramebuffer.dispose()}},e.prototype.disposeAll=function(i){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var r=0;r<t.length;r++)this.disposeFramebuffer(t[r],i)},e.prototype.forceStencil=function(){var i=this.current;if(!!i){var t=i.glFramebuffers[this.CONTEXT_UID];if(!(!t||t.stencil)){i.stencil=!0;var r=i.width,o=i.height,n=this.gl,s=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,s),t.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,t.multisample,n.DEPTH24_STENCIL8,r,o):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,r,o),t.stencil=s,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s)}}},e.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new G.Rectangle},e.prototype.destroy=function(){this.renderer=null},e}(),jn={5126:4,5123:2,5121:1},Vn=function(){function e(i){this.renderer=i,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return h(e,"GeometrySystem"),e.prototype.contextChange=function(){this.disposeAll(!0);var i=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,t.webGLVersion!==2){var r=this.renderer.context.extensions.vertexArrayObject;Z.settings.PREFER_ENV===_.ENV.WEBGL_LEGACY&&(r=null),r?(i.createVertexArray=function(){return r.createVertexArrayOES()},i.bindVertexArray=function(n){return r.bindVertexArrayOES(n)},i.deleteVertexArray=function(n){return r.deleteVertexArrayOES(n)}):(this.hasVao=!1,i.createVertexArray=function(){return null},i.bindVertexArray=function(){return null},i.deleteVertexArray=function(){return null})}if(t.webGLVersion!==2){var o=i.getExtension("ANGLE_instanced_arrays");o?(i.vertexAttribDivisor=function(n,s){return o.vertexAttribDivisorANGLE(n,s)},i.drawElementsInstanced=function(n,s,a,l,u){return o.drawElementsInstancedANGLE(n,s,a,l,u)},i.drawArraysInstanced=function(n,s,a,l){return o.drawArraysInstancedANGLE(n,s,a,l)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=t.webGLVersion===2||!!t.extensions.uint32ElementIndex},e.prototype.bind=function(i,t){t=t||this.renderer.shader.shader;var r=this.gl,o=i.glVertexArrayObjects[this.CONTEXT_UID],n=!1;o||(this.managedGeometries[i.id]=i,i.disposeRunner.add(this),i.glVertexArrayObjects[this.CONTEXT_UID]=o={},n=!0);var s=o[t.program.id]||this.initGeometryVao(i,t,n);this._activeGeometry=i,this._activeVao!==s&&(this._activeVao=s,this.hasVao?r.bindVertexArray(s):this.activateVao(i,t.program)),this.updateBuffers()},e.prototype.reset=function(){this.unbind()},e.prototype.updateBuffers=function(){for(var i=this._activeGeometry,t=this.renderer.buffer,r=0;r<i.buffers.length;r++){var o=i.buffers[r];t.update(o)}},e.prototype.checkCompatibility=function(i,t){var r=i.attributes,o=t.attributeData;for(var n in o)if(!r[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},e.prototype.getSignature=function(i,t){var r=i.attributes,o=t.attributeData,n=["g",i.id];for(var s in r)o[s]&&n.push(s);return n.join("-")},e.prototype.initGeometryVao=function(i,t,r){r===void 0&&(r=!0);var o=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,a=t.program;a.glPrograms[n]||this.renderer.shader.generateProgram(t),this.checkCompatibility(i,a);var l=this.getSignature(i,a),u=i.glVertexArrayObjects[this.CONTEXT_UID],p=u[l];if(p)return u[a.id]=p,p;var f=i.buffers,c=i.attributes,d={},v={};for(var m in f)d[m]=0,v[m]=0;for(var m in c)!c[m].size&&a.attributeData[m]?c[m].size=a.attributeData[m].size:c[m].size||console.warn("PIXI Geometry attribute '"+m+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[m].buffer]+=c[m].size*jn[c[m].type];for(var m in c){var y=c[m],g=y.size;y.stride===void 0&&(d[y.buffer]===g*jn[y.type]?y.stride=0:y.stride=d[y.buffer]),y.start===void 0&&(y.start=v[y.buffer],v[y.buffer]+=g*jn[y.type])}p=o.createVertexArray(),o.bindVertexArray(p);for(var T=0;T<f.length;T++){var x=f[T];s.bind(x),r&&x._glBuffers[n].refCount++}return this.activateVao(i,a),this._activeVao=p,u[a.id]=p,u[l]=p,p},e.prototype.disposeGeometry=function(i,t){var r;if(!!this.managedGeometries[i.id]){delete this.managedGeometries[i.id];var o=i.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=i.buffers,a=(r=this.renderer)===null||r===void 0?void 0:r.buffer;if(i.disposeRunner.remove(this),!!o){if(a)for(var l=0;l<s.length;l++){var u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!t&&a.dispose(s[l],t))}if(!t){for(var p in o)if(p[0]==="g"){var f=o[p];this._activeVao===f&&this.unbind(),n.deleteVertexArray(f)}}delete i.glVertexArrayObjects[this.CONTEXT_UID]}}},e.prototype.disposeAll=function(i){for(var t=Object.keys(this.managedGeometries),r=0;r<t.length;r++)this.disposeGeometry(this.managedGeometries[t[r]],i)},e.prototype.activateVao=function(i,t){var r=this.gl,o=this.CONTEXT_UID,n=this.renderer.buffer,s=i.buffers,a=i.attributes;i.indexBuffer&&n.bind(i.indexBuffer);var l=null;for(var u in a){var p=a[u],f=s[p.buffer],c=f._glBuffers[o];if(t.attributeData[u]){l!==c&&(n.bind(f),l=c);var d=t.attributeData[u].location;if(r.enableVertexAttribArray(d),r.vertexAttribPointer(d,p.size,p.type||r.FLOAT,p.normalized,p.stride,p.start),p.instance)if(this.hasInstance)r.vertexAttribDivisor(d,1);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}},e.prototype.draw=function(i,t,r,o){var n=this.gl,s=this._activeGeometry;if(s.indexBuffer){var a=s.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?n.UNSIGNED_SHORT:n.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?s.instanced?n.drawElementsInstanced(i,t||s.indexBuffer.data.length,l,(r||0)*a,o||1):n.drawElements(i,t||s.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else s.instanced?n.drawArraysInstanced(i,r,t||s.getSize(),o||1):n.drawArrays(i,r,t||s.getSize());return this},e.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},e.prototype.destroy=function(){this.renderer=null},e}(),ih=function(){function e(i){i===void 0&&(i=null),this.type=_.MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=i||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Z.settings.FILTER_MULTISAMPLE,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._target=null}return h(e,"MaskData"),e.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=_.MASK_TYPES.NONE,this.autoDetect=!0),this._target=null},e.prototype.copyCountersOrReset=function(i){i?(this._stencilCounter=i._stencilCounter,this._scissorCounter=i._scissorCounter,this._scissorRect=i._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},e}();function rh(e,i,t){var r=e.createShader(i);return e.shaderSource(r,t),e.compileShader(r),r}h(rh,"compileShader");function oh(e,i){var t=e.getShaderSource(i).split(`
`).map(function(u,p){return p+": "+u}),r=e.getShaderInfoLog(i),o=r.split(`
`),n={},s=o.map(function(u){return parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))}).filter(function(u){return u&&!n[u]?(n[u]=!0,!0):!1}),a=[""];s.forEach(function(u){t[u-1]="%c"+t[u-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});var l=t.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}h(oh,"logPrettyShaderError");function s_(e,i,t,r){e.getProgramParameter(i,e.LINK_STATUS)||(e.getShaderParameter(t,e.COMPILE_STATUS)||oh(e,t),e.getShaderParameter(r,e.COMPILE_STATUS)||oh(e,r),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(i)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(i)))}h(s_,"logProgramError");function qn(e){for(var i=new Array(e),t=0;t<i.length;t++)i[t]=!1;return i}h(qn,"booleanArray");function nh(e,i){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*i);case"vec3":return new Float32Array(3*i);case"vec4":return new Float32Array(4*i);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*i);case"ivec3":return new Int32Array(3*i);case"ivec4":return new Int32Array(4*i);case"uvec2":return new Uint32Array(2*i);case"uvec3":return new Uint32Array(3*i);case"uvec4":return new Uint32Array(4*i);case"bool":return!1;case"bvec2":return qn(2*i);case"bvec3":return qn(3*i);case"bvec4":return qn(4*i);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}h(nh,"defaultValue");var sh={},Ei=sh;function ah(){if(Ei===sh||Ei&&Ei.isContextLost()){var e=document.createElement("canvas"),i=void 0;Z.settings.PREFER_ENV>=_.ENV.WEBGL2&&(i=e.getContext("webgl2",{})),i||(i=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),i?i.getExtension("WEBGL_draw_buffers"):i=null),Ei=i}return Ei}h(ah,"getTestContext");var jr;function a_(){if(!jr){jr=_.PRECISION.MEDIUM;var e=ah();if(e&&e.getShaderPrecisionFormat){var i=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);jr=i.precision?_.PRECISION.HIGH:_.PRECISION.MEDIUM}}return jr}h(a_,"getMaxFragmentPrecision");function lh(e,i,t){if(e.substring(0,9)!=="precision"){var r=i;return i===_.PRECISION.HIGH&&t!==_.PRECISION.HIGH&&(r=_.PRECISION.MEDIUM),"precision "+r+` float;
`+e}else if(t!==_.PRECISION.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}h(lh,"setPrecision");var l_={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function uh(e){return l_[e]}h(uh,"mapSize");var Vr=null,hh={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function ph(e,i){if(!Vr){var t=Object.keys(hh);Vr={};for(var r=0;r<t.length;++r){var o=t[r];Vr[e[o]]=hh[o]}}return Vr[i]}h(ph,"mapType");var Tt=[{test:function(e){return e.type==="float"&&e.size===1},code:function(e){return`
            if(uv["`+e+'"] !== ud["'+e+`"].value)
            {
                ud["`+e+'"].value = uv["'+e+`"]
                gl.uniform1f(ud["`+e+'"].location, uv["'+e+`"])
            }
            `}},{test:function(e){return(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray},code:function(e){return`t = syncData.textureCount++;

            renderer.texture.bind(uv["`+e+`"], t);

            if(ud["`+e+`"].value !== t)
            {
                ud["`+e+`"].value = t;
                gl.uniform1i(ud["`+e+`"].location, t);
; // eslint-disable-line max-len
            }`}},{test:function(e,i){return e.type==="mat3"&&e.size===1&&i.a!==void 0},code:function(e){return`
            gl.uniformMatrix3fv(ud["`+e+'"].location, false, uv["'+e+`"].toArray(true));
            `},codeUbo:function(e){return`
                var `+e+"_matrix = uv."+e+`.toArray(true);

                data[offset] = `+e+`_matrix[0];
                data[offset+1] = `+e+`_matrix[1];
                data[offset+2] = `+e+`_matrix[2];
        
                data[offset + 4] = `+e+`_matrix[3];
                data[offset + 5] = `+e+`_matrix[4];
                data[offset + 6] = `+e+`_matrix[5];
        
                data[offset + 8] = `+e+`_matrix[6];
                data[offset + 9] = `+e+`_matrix[7];
                data[offset + 10] = `+e+`_matrix[8];
            `}},{test:function(e,i){return e.type==="vec2"&&e.size===1&&i.x!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["`+e+`"].location, v.x, v.y);
                }`},codeUbo:function(e){return`
                v = uv.`+e+`;

                data[offset] = v.x;
                data[offset+1] = v.y;
            `}},{test:function(e){return e.type==="vec2"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["`+e+`"].location, v[0], v[1]);
                }
            `}},{test:function(e,i){return e.type==="vec4"&&e.size===1&&i.width!==void 0},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["`+e+`"].location, v.x, v.y, v.width, v.height)
                }`},codeUbo:function(e){return`
                    v = uv.`+e+`;

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `}},{test:function(e){return e.type==="vec4"&&e.size===1},code:function(e){return`
                cv = ud["`+e+`"].value;
                v = uv["`+e+`"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["`+e+`"].location, v[0], v[1], v[2], v[3])
                }`}}],u_={float:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1f(location, v)
    }`,vec2:`
    if(cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:"gl.uniform4f(location, v[0], v[1], v[2], v[3])",int:"gl.uniform1i(location, v)",ivec2:"gl.uniform2i(location, v[0], v[1])",ivec3:"gl.uniform3i(location, v[0], v[1], v[2])",ivec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",uint:"gl.uniform1ui(location, v)",uvec2:"gl.uniform2ui(location, v[0], v[1])",uvec3:"gl.uniform3ui(location, v[0], v[1], v[2])",uvec4:"gl.uniform4ui(location, v[0], v[1], v[2], v[3])",bool:`
    if(cv !== v)
    {
        cv.v = v;
        gl.uniform1i(location, v)
    }`,bvec2:"gl.uniform2i(location, v[0], v[1])",bvec3:"gl.uniform3i(location, v[0], v[1], v[2])",bvec4:"gl.uniform4i(location, v[0], v[1], v[2], v[3])",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},h_={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function p_(e,i){var t=[`
        var v = null;
        var cv = null
        var t = 0;
        var gl = renderer.gl
    `];for(var r in e.uniforms){var o=i[r];if(!o){e.uniforms[r].group&&(e.uniforms[r].ubo?t.push(`
                        renderer.shader.syncUniformBufferGroup(uv.`+r+", '"+r+`');
                    `):t.push(`
                        renderer.shader.syncUniformGroup(uv.`+r+`, syncData);
                    `));continue}for(var n=e.uniforms[r],s=!1,a=0;a<Tt.length;a++)if(Tt[a].test(o,n)){t.push(Tt[a].code(r,n)),s=!0;break}if(!s){var l=o.size===1?u_:h_,u=l[o.type].replace("location",'ud["'+r+'"].location');t.push(`
            cv = ud["`+r+`"].value;
            v = uv["`+r+`"];
            `+u+";")}}return new Function("ud","uv","renderer","syncData",t.join(`
`))}h(p_,"generateUniformsSync");var f_=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function c_(e){for(var i="",t=0;t<e;++t)t>0&&(i+=`
else `),t<e-1&&(i+="if(test == "+t+".0){}");return i}h(c_,"generateIfTestSrc");function fh(e,i){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var t=i.createShader(i.FRAGMENT_SHADER);;){var r=f_.replace(/%forloop%/gi,c_(e));if(i.shaderSource(t,r),i.compileShader(t),!i.getShaderParameter(t,i.COMPILE_STATUS))e=e/2|0;else break}return e}h(fh,"checkMaxIfStatementsInShader");var Ri;function d_(){if(typeof Ri=="boolean")return Ri;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Ri=e({a:"b"},"a","b")===!0}catch{Ri=!1}return Ri}h(d_,"unsafeEvalSupported");var v_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,m_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`,y_=0,qr={},Yr=function(){function e(i,t,r){r===void 0&&(r="pixi-shader"),this.id=y_++,this.vertexSrc=i||e.defaultVertexSrc,this.fragmentSrc=t||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),qr[r]?(qr[r]++,r+="-"+qr[r]):qr[r]=1,this.vertexSrc="#define SHADER_NAME "+r+`
`+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+r+`
`+this.fragmentSrc,this.vertexSrc=lh(this.vertexSrc,Z.settings.PRECISION_VERTEX,_.PRECISION.HIGH),this.fragmentSrc=lh(this.fragmentSrc,Z.settings.PRECISION_FRAGMENT,a_())),this.glPrograms={},this.syncUniforms=null}return h(e,"Program"),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return m_},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return v_},enumerable:!1,configurable:!0}),e.from=function(i,t,r){var o=i+t,n=L.ProgramCache[o];return n||(L.ProgramCache[o]=n=new e(i,t,r)),n},e}(),Yn=function(){function e(i,t){this.uniformBindCount=0,this.program=i,t?t instanceof gt?this.uniformGroup=t:this.uniformGroup=new gt(t):this.uniformGroup=new gt({})}return h(e,"Shader"),e.prototype.checkUniformExists=function(i,t){if(t.uniforms[i])return!0;for(var r in t.uniforms){var o=t.uniforms[r];if(o.group&&this.checkUniformExists(i,o))return!0}return!1},e.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(e.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),e.from=function(i,t,r){var o=Yr.from(i,t);return new e(o,r)},e}(),Wn=0,zn=1,Kn=2,Zn=3,$n=4,Jn=5,Wr=function(){function e(){this.data=0,this.blendMode=_.BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return h(e,"State"),Object.defineProperty(e.prototype,"blend",{get:function(){return!!(this.data&1<<Wn)},set:function(i){!!(this.data&1<<Wn)!==i&&(this.data^=1<<Wn)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"offsets",{get:function(){return!!(this.data&1<<zn)},set:function(i){!!(this.data&1<<zn)!==i&&(this.data^=1<<zn)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"culling",{get:function(){return!!(this.data&1<<Kn)},set:function(i){!!(this.data&1<<Kn)!==i&&(this.data^=1<<Kn)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthTest",{get:function(){return!!(this.data&1<<Zn)},set:function(i){!!(this.data&1<<Zn)!==i&&(this.data^=1<<Zn)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"depthMask",{get:function(){return!!(this.data&1<<Jn)},set:function(i){!!(this.data&1<<Jn)!==i&&(this.data^=1<<Jn)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clockwiseFrontFace",{get:function(){return!!(this.data&1<<$n)},set:function(i){!!(this.data&1<<$n)!==i&&(this.data^=1<<$n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this._blendMode},set:function(i){this.blend=i!==_.BLEND_MODES.NONE,this._blendMode=i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(i){this.offsets=!!i,this._polygonOffset=i},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[@pixi/core:State "+("blendMode="+this.blendMode+" ")+("clockwiseFrontFace="+this.clockwiseFrontFace+" ")+("culling="+this.culling+" ")+("depthMask="+this.depthMask+" ")+("polygonOffset="+this.polygonOffset)+"]"},e.for2d=function(){var i=new e;return i.depthTest=!1,i.blend=!0,i},e}(),__=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,b_=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,ch=function(e){oe(i,e);function i(t,r,o){var n=this,s=Yr.from(t||i.defaultVertexSrc,r||i.defaultFragmentSrc);return n=e.call(this,s,o)||this,n.padding=0,n.resolution=Z.settings.FILTER_RESOLUTION,n.multisample=Z.settings.FILTER_MULTISAMPLE,n.enabled=!0,n.autoFit=!0,n.state=new Wr,n}return h(i,"Filter"),i.prototype.apply=function(t,r,o,n,s){t.applyFilter(this,r,o,n)},Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultVertexSrc",{get:function(){return __},enumerable:!1,configurable:!0}),Object.defineProperty(i,"defaultFragmentSrc",{get:function(){return b_},enumerable:!1,configurable:!0}),i}(Yn),g_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`,T_=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,dh=new G.Matrix,vh=function(){function e(i,t){this._texture=i,this.mapCoord=new G.Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof t=="undefined"?.5:t,this.isSimple=!1}return h(e,"TextureMatrix"),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(i){this._texture=i,this._textureID=-1},enumerable:!1,configurable:!0}),e.prototype.multiplyUvs=function(i,t){t===void 0&&(t=i);for(var r=this.mapCoord,o=0;o<i.length;o+=2){var n=i[o],s=i[o+1];t[o]=n*r.a+s*r.c+r.tx,t[o+1]=n*r.b+s*r.d+r.ty}return t},e.prototype.update=function(i){var t=this._texture;if(!t||!t.valid||!i&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var o=t.orig,n=t.trim;n&&(dh.set(o.width/n.width,0,0,o.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(dh));var s=t.baseTexture,a=this.uClampFrame,l=this.clampMargin/s.resolution,u=this.clampOffset;return a[0]=(t._frame.x+l+u)/s.width,a[1]=(t._frame.y+l+u)/s.height,a[2]=(t._frame.x+t._frame.width-l+u)/s.width,a[3]=(t._frame.y+t._frame.height-l+u)/s.height,this.uClampOffset[0]=u/s.realWidth,this.uClampOffset[1]=u/s.realHeight,this.isSimple=t._frame.width===s.width&&t._frame.height===s.height&&t.rotate===0,!0},e}(),mh=function(e){oe(i,e);function i(t){var r=this,o=new G.Matrix;return r=e.call(this,g_,T_)||this,t.renderable=!1,r.maskSprite=t,r.maskMatrix=o,r}return h(i,"SpriteMaskFilter"),i.prototype.apply=function(t,r,o,n){var s=this.maskSprite,a=s._texture;!a.valid||(a.uvMatrix||(a.uvMatrix=new vh(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,t.applyFilter(this,r,o,n))},i}(ch),Qn=function(){function e(i){this.renderer=i,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return h(e,"MaskSystem"),e.prototype.setMaskStack=function(i){this.maskStack=i,this.renderer.scissor.setMaskStack(i),this.renderer.stencil.setMaskStack(i)},e.prototype.push=function(i,t){var r=t;if(!r.isMaskData){var o=this.maskDataPool.pop()||new ih;o.pooled=!0,o.maskObject=t,r=o}switch(r.autoDetect&&this.detect(r),r.copyCountersOrReset(this.maskStack[this.maskStack.length-1]),r._target=i,r.type){case _.MASK_TYPES.SCISSOR:this.maskStack.push(r),this.renderer.scissor.push(r);break;case _.MASK_TYPES.STENCIL:this.maskStack.push(r),this.renderer.stencil.push(r);break;case _.MASK_TYPES.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r),this.maskStack.push(r);break}},e.prototype.pop=function(i){var t=this.maskStack.pop();if(!(!t||t._target!==i)){switch(t.type){case _.MASK_TYPES.SCISSOR:this.renderer.scissor.pop();break;case _.MASK_TYPES.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case _.MASK_TYPES.SPRITE:this.popSpriteMask();break}t.reset(),t.pooled&&this.maskDataPool.push(t)}},e.prototype.detect=function(i){var t=i.maskObject;if(t.isSprite){i.type=_.MASK_TYPES.SPRITE;return}if(i.type=_.MASK_TYPES.STENCIL,this.enableScissor&&t.isFastRect&&t.isFastRect()){var r=t.worldTransform,o=Math.atan2(r.b,r.a),n=Math.atan2(r.d,r.c);o=Math.round(o*(180/Math.PI)*100),n=Math.round(n*(180/Math.PI)*100)-o,o=(o%9e3+9e3)%9e3,n=(n%18e3+18e3)%18e3,o===0&&n===9e3&&(i.type=_.MASK_TYPES.SCISSOR)}},e.prototype.pushSpriteMask=function(i){var t,r,o=i.maskObject,n=i._target,s=this.alphaMaskPool[this.alphaMaskIndex];s||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new mh(o)]);var a=this.renderer,l=a.renderTexture,u,p;if(l.current){var f=l.current;u=i.resolution||f.resolution,p=(t=i.multisample)!==null&&t!==void 0?t:f.multisample}else u=i.resolution||a.resolution,p=(r=i.multisample)!==null&&r!==void 0?r:a.multisample;s[0].resolution=u,s[0].multisample=p,s[0].maskSprite=o;var c=n.filterArea;n.filterArea=o.getBounds(!0),a.filter.push(n,s),n.filterArea=c,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filter.pop(),this.alphaMaskIndex--},e.prototype.destroy=function(){this.renderer=null},e}(),yh=function(){function e(i){this.renderer=i,this.maskStack=[],this.glConst=0}return h(e,"AbstractMaskSystem"),e.prototype.getStackLength=function(){return this.maskStack.length},e.prototype.setMaskStack=function(i){var t=this.renderer.gl,r=this.getStackLength();this.maskStack=i;var o=this.getStackLength();o!==r&&(o===0?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))},e.prototype._useCurrent=function(){},e.prototype.destroy=function(){this.renderer=null,this.maskStack=null},e}(),es=function(e){oe(i,e);function i(t){var r=e.call(this,t)||this;return r.glConst=WebGLRenderingContext.SCISSOR_TEST,r}return h(i,"ScissorSystem"),i.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},i.prototype.push=function(t){var r=t.maskObject;r.renderable=!0;var o=t._scissorRect,n=r.getBounds(!0),s=this.renderer.gl;r.renderable=!1,o?n.fit(o):s.enable(s.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=n,this._useCurrent()},i.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},i.prototype._useCurrent=function(){var t=this.maskStack[this.maskStack.length-1]._scissorRect,r=this.renderer.renderTexture.current,o=this.renderer.projection,n=o.transform,s=o.sourceFrame,a=o.destinationFrame,l=r?r.resolution:this.renderer.resolution,u=a.width/s.width,p=a.height/s.height,f=((t.x-s.x)*u+a.x)*l,c=((t.y-s.y)*p+a.y)*l,d=t.width*u*l,v=t.height*p*l;n&&(f+=n.tx*l,c+=n.ty*l),r||(c=this.renderer.height-v-c),f=Math.round(f),c=Math.round(c),d=Math.round(d),v=Math.round(v),this.renderer.gl.scissor(f,c,d,v)},i}(yh),ts=function(e){oe(i,e);function i(t){var r=e.call(this,t)||this;return r.glConst=WebGLRenderingContext.STENCIL_TEST,r}return h(i,"StencilSystem"),i.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},i.prototype.push=function(t){var r=t.maskObject,o=this.renderer.gl,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),o.enable(o.STENCIL_TEST)),t._stencilCounter++,o.colorMask(!1,!1,!1,!1),o.stencilFunc(o.EQUAL,n,4294967295),o.stencilOp(o.KEEP,o.KEEP,o.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,this._useCurrent()},i.prototype.pop=function(t){var r=this.renderer.gl;this.getStackLength()===0?(r.disable(r.STENCIL_TEST),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT)):(r.colorMask(!1,!1,!1,!1),r.stencilOp(r.KEEP,r.KEEP,r.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},i.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},i}(yh),is=function(){function e(i){this.renderer=i,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new G.Matrix,this.transform=null}return h(e,"ProjectionSystem"),e.prototype.update=function(i,t,r,o){this.destinationFrame=i||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||i,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,o),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},e.prototype.calculateProjection=function(i,t,r,o){var n=this.projectionMatrix,s=o?-1:1;n.identity(),n.a=1/t.width*2,n.d=s*(1/t.height*2),n.tx=-1-t.x*n.a,n.ty=-s-t.y*n.d},e.prototype.setTransform=function(i){},e.prototype.destroy=function(){this.renderer=null},e}(),xt=new G.Rectangle,Ii=new G.Rectangle,rs=function(){function e(i){this.renderer=i,this.clearColor=i._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new G.Rectangle,this.destinationFrame=new G.Rectangle,this.viewportFrame=new G.Rectangle}return h(e,"RenderTextureSystem"),e.prototype.bind=function(i,t,r){i===void 0&&(i=null);var o=this.renderer;this.current=i;var n,s,a;i?(n=i.baseTexture,a=n.resolution,t||(xt.width=i.frame.width,xt.height=i.frame.height,t=xt),r||(Ii.x=i.frame.x,Ii.y=i.frame.y,Ii.width=t.width,Ii.height=t.height,r=Ii),s=n.framebuffer):(a=o.resolution,t||(xt.width=o.screen.width,xt.height=o.screen.height,t=xt),r||(r=xt,r.width=t.width,r.height=t.height));var l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,i||(l.y=o.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(s,l),this.renderer.projection.update(r,t,a,!s),i?this.renderer.mask.setMaskStack(n.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(t),this.destinationFrame.copyFrom(r)},e.prototype.clear=function(i,t){this.current?i=i||this.current.baseTexture.clearColor:i=i||this.clearColor;var r=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer.screen,n=r.width!==o.width||r.height!==o.height;if(n){var s=this.viewportFrame,a=s.x,l=s.y,u=s.width,p=s.height;a=Math.round(a),l=Math.round(l),u=Math.round(u),p=Math.round(p),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(a,l,u,p)}this.renderer.framebuffer.clear(i[0],i[1],i[2],i[3],t),n&&this.renderer.scissor.pop()},e.prototype.resize=function(){this.bind(null)},e.prototype.reset=function(){this.bind(null)},e.prototype.destroy=function(){this.renderer=null},e}();function x_(e,i,t,r,o){t.buffer.update(o)}h(x_,"uboUpdate");var E_={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},_h={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function bh(e){for(var i=e.map(function(l){return{data:l,offset:0,dataLen:0,dirty:0}}),t=0,r=0,o=0,n=0;n<i.length;n++){var s=i[n];if(t=_h[s.data.type],s.data.size>1&&(t=Math.max(t,16)*s.data.size),s.dataLen=t,r%t!=0&&r<16){var a=r%t%16;r+=a,o+=a}r+t>16?(o=Math.ceil(o/16)*16,s.offset=o,o+=t,r=t):(s.offset=o,r+=t,o+=t)}return o=Math.ceil(o/16)*16,{uboElements:i,size:o}}h(bh,"createUBOElements");function gh(e,i){var t=[];for(var r in e)i[r]&&t.push(i[r]);return t.sort(function(o,n){return o.index-n.index}),t}h(gh,"getUBOData");function Th(e,i){if(!e.autoManage)return{size:0,syncFunc:x_};for(var t=gh(e.uniforms,i),r=bh(t),o=r.uboElements,n=r.size,s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `],a=0;a<o.length;a++){for(var l=o[a],u=e.uniforms[l.data.name],p=l.data.name,f=!1,c=0;c<Tt.length;c++){var d=Tt[c];if(d.codeUbo&&d.test(l.data,u)){s.push("offset = "+l.offset/4+";",Tt[c].codeUbo(l.data.name,u)),f=!0;break}}if(!f)if(l.data.size>1){var v=uh(l.data.type),m=Math.max(_h[l.data.type]/16,1),y=v/m,g=(4-y%4)%4;s.push(`
                cv = ud.`+p+`.value;
                v = uv.`+p+`;
                offset = `+l.offset/4+`;

                t = 0;

                for(var i=0; i < `+l.data.size*m+`; i++)
                {
                    for(var j = 0; j < `+y+`; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += `+g+`;
                }

                `)}else{var T=E_[l.data.type];s.push(`
                cv = ud.`+p+`.value;
                v = uv.`+p+`;
                offset = `+l.offset/4+`;
                `+T+`;
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}h(Th,"generateUniformBufferSync");var R_=function(){function e(){}return h(e,"IGLUniformData"),e}(),xh=function(){function e(i,t){this.program=i,this.uniformData=t,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return h(e,"GLProgram"),e.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},e}();function I_(e,i){for(var t={},r=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES),o=0;o<r;o++){var n=i.getActiveAttrib(e,o);if(n.name.indexOf("gl_")!==0){var s=ph(i,n.type),a={type:s,name:n.name,size:uh(s),location:o};t[n.name]=a}}return t}h(I_,"getAttributeData");function A_(e,i){for(var t={},r=i.getProgramParameter(e,i.ACTIVE_UNIFORMS),o=0;o<r;o++){var n=i.getActiveUniform(e,o),s=n.name.replace(/\[.*?\]$/,""),a=!!n.name.match(/\[.*?\]$/),l=ph(i,n.type);t[s]={name:s,index:o,type:l,size:n.size,isArray:a,value:nh(l,n.size)}}return t}h(A_,"getUniformData");function Eh(e,i){var t=rh(e,e.VERTEX_SHADER,i.vertexSrc),r=rh(e,e.FRAGMENT_SHADER,i.fragmentSrc),o=e.createProgram();e.attachShader(o,t),e.attachShader(o,r),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||s_(e,o,t,r),i.attributeData=I_(o,e),i.uniformData=A_(o,e);var n=Object.keys(i.attributeData);n.sort(function(p,f){return p>f?1:-1});for(var s=0;s<n.length;s++)i.attributeData[n[s]].location=s,e.bindAttribLocation(o,s,n[s]);e.linkProgram(o),e.deleteShader(t),e.deleteShader(r);var a={};for(var s in i.uniformData){var l=i.uniformData[s];a[s]={location:e.getUniformLocation(o,s),value:nh(l.type,l.size)}}var u=new xh(o,a);return u}h(Eh,"generateProgram");var P_=0,zr={textureCount:0,uboCount:0},os=function(){function e(i){this.destroyed=!1,this.renderer=i,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=P_++}return h(e,"ShaderSystem"),e.prototype.systemCheck=function(){if(!d_())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},e.prototype.contextChange=function(i){this.gl=i,this.reset()},e.prototype.bind=function(i,t){i.uniforms.globals=this.renderer.globalUniforms;var r=i.program,o=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(i);return this.shader=i,this.program!==r&&(this.program=r,this.gl.useProgram(o.program)),t||(zr.textureCount=0,zr.uboCount=0,this.syncUniformGroup(i.uniformGroup,zr)),o},e.prototype.setUniforms=function(i){var t=this.shader.program,r=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(r.uniformData,i,this.renderer)},e.prototype.syncUniformGroup=function(i,t){var r=this.getGlProgram();(!i.static||i.dirtyId!==r.uniformDirtyGroups[i.id])&&(r.uniformDirtyGroups[i.id]=i.dirtyId,this.syncUniforms(i,r,t))},e.prototype.syncUniforms=function(i,t,r){var o=i.syncUniforms[this.shader.program.id]||this.createSyncGroups(i);o(t.uniformData,i.uniforms,this.renderer,r)},e.prototype.createSyncGroups=function(i){var t=this.getSignature(i,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=p_(i,this.shader.program.uniformData)),i.syncUniforms[this.shader.program.id]=this.cache[t],i.syncUniforms[this.shader.program.id]},e.prototype.syncUniformBufferGroup=function(i,t){var r=this.getGlProgram();if(!i.static||i.dirtyId!==0||!r.uniformGroups[i.id]){i.dirtyId=0;var o=r.uniformGroups[i.id]||this.createSyncBufferGroup(i,r,t);i.buffer.update(),o(r.uniformData,i.uniforms,this.renderer,zr,i.buffer)}this.renderer.buffer.bindBufferBase(i.buffer,r.uniformBufferBindings[t])},e.prototype.createSyncBufferGroup=function(i,t,r){var o=this.renderer.gl;this.renderer.buffer.bind(i.buffer);var n=this.gl.getUniformBlockIndex(t.program,r);t.uniformBufferBindings[r]=this.shader.uniformBindCount,o.uniformBlockBinding(t.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(i,this.shader.program.uniformData,"ubo"),a=this._uboCache[s];if(a||(a=this._uboCache[s]=Th(i,this.shader.program.uniformData)),i.autoManage){var l=new Float32Array(a.size/4);i.buffer.update(l)}return t.uniformGroups[i.id]=a.syncFunc,t.uniformGroups[i.id]},e.prototype.getSignature=function(i,t,r){var o=i.uniforms,n=[r+"-"];for(var s in o)n.push(s),t[s]&&n.push(t[s].type);return n.join("-")},e.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},e.prototype.generateProgram=function(i){var t=this.gl,r=i.program,o=Eh(t,r);return r.glPrograms[this.renderer.CONTEXT_UID]=o,o},e.prototype.reset=function(){this.program=null,this.shader=null},e.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},e}();function w_(e,i){return i===void 0&&(i=[]),i[_.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.ADD]=[e.ONE,e.ONE],i[_.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.NONE]=[0,0],i[_.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],i[_.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.SRC_IN]=[e.DST_ALPHA,e.ZERO],i[_.BLEND_MODES.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],i[_.BLEND_MODES.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],i[_.BLEND_MODES.DST_IN]=[e.ZERO,e.SRC_ALPHA],i[_.BLEND_MODES.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],i[_.BLEND_MODES.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],i[_.BLEND_MODES.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],i}h(w_,"mapWebGLBlendModesToPixi");var S_=0,O_=1,C_=2,N_=3,M_=4,F_=5,ns=function(){function e(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=_.BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[S_]=this.setBlend,this.map[O_]=this.setOffset,this.map[C_]=this.setCullFace,this.map[N_]=this.setDepthTest,this.map[M_]=this.setFrontFace,this.map[F_]=this.setDepthMask,this.checks=[],this.defaultState=new Wr,this.defaultState.blend=!0}return h(e,"StateSystem"),e.prototype.contextChange=function(i){this.gl=i,this.blendModes=w_(i),this.set(this.defaultState),this.reset()},e.prototype.set=function(i){if(i=i||this.defaultState,this.stateId!==i.data){for(var t=this.stateId^i.data,r=0;t;)t&1&&this.map[r].call(this,!!(i.data&1<<r)),t=t>>1,r++;this.stateId=i.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,i)},e.prototype.forceState=function(i){i=i||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(i.data&1<<t));for(var t=0;t<this.checks.length;t++)this.checks[t](this,i);this.stateId=i.data},e.prototype.setBlend=function(i){this.updateCheck(e.checkBlendMode,i),this.gl[i?"enable":"disable"](this.gl.BLEND)},e.prototype.setOffset=function(i){this.updateCheck(e.checkPolygonOffset,i),this.gl[i?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},e.prototype.setDepthTest=function(i){this.gl[i?"enable":"disable"](this.gl.DEPTH_TEST)},e.prototype.setDepthMask=function(i){this.gl.depthMask(i)},e.prototype.setCullFace=function(i){this.gl[i?"enable":"disable"](this.gl.CULL_FACE)},e.prototype.setFrontFace=function(i){this.gl.frontFace(this.gl[i?"CW":"CCW"])},e.prototype.setBlendMode=function(i){if(i!==this.blendMode){this.blendMode=i;var t=this.blendModes[i],r=this.gl;t.length===2?r.blendFunc(t[0],t[1]):r.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,r.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}},e.prototype.setPolygonOffset=function(i,t){this.gl.polygonOffset(i,t)},e.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},e.prototype.updateCheck=function(i,t){var r=this.checks.indexOf(i);t&&r===-1?this.checks.push(i):!t&&r!==-1&&this.checks.splice(r,1)},e.checkBlendMode=function(i,t){i.setBlendMode(t.blendMode)},e.checkPolygonOffset=function(i,t){i.setPolygonOffset(1,t.polygonOffset)},e.prototype.destroy=function(){this.gl=null},e}(),ss=function(){function e(i){this.renderer=i,this.count=0,this.checkCount=0,this.maxIdle=Z.settings.GC_MAX_IDLE,this.checkCountMax=Z.settings.GC_MAX_CHECK_COUNT,this.mode=Z.settings.GC_MODE}return h(e,"TextureGCSystem"),e.prototype.postrender=function(){!this.renderer.renderingToScreen||(this.count++,this.mode!==_.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},e.prototype.run=function(){for(var i=this.renderer.texture,t=i.managedTextures,r=!1,o=0;o<t.length;o++){var n=t[o];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(i.destroyTexture(n,!0),t[o]=null,r=!0)}if(r){for(var s=0,o=0;o<t.length;o++)t[o]!==null&&(t[s++]=t[o]);t.length=s}},e.prototype.unload=function(i){var t=this.renderer.texture,r=i._texture;r&&!r.framebuffer&&t.destroyTexture(r);for(var o=i.children.length-1;o>=0;o--)this.unload(i.children[o])},e.prototype.destroy=function(){this.renderer=null},e}();function U_(e){var i,t,r,o,n,s,a,l,u,p,f,c,d,v,m,y,g,T,x,I,b,E,O;return"WebGL2RenderingContext"in self&&e instanceof self.WebGL2RenderingContext?O=(i={},i[_.TYPES.UNSIGNED_BYTE]=(t={},t[_.FORMATS.RGBA]=e.RGBA8,t[_.FORMATS.RGB]=e.RGB8,t[_.FORMATS.RG]=e.RG8,t[_.FORMATS.RED]=e.R8,t[_.FORMATS.RGBA_INTEGER]=e.RGBA8UI,t[_.FORMATS.RGB_INTEGER]=e.RGB8UI,t[_.FORMATS.RG_INTEGER]=e.RG8UI,t[_.FORMATS.RED_INTEGER]=e.R8UI,t[_.FORMATS.ALPHA]=e.ALPHA,t[_.FORMATS.LUMINANCE]=e.LUMINANCE,t[_.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,t),i[_.TYPES.BYTE]=(r={},r[_.FORMATS.RGBA]=e.RGBA8_SNORM,r[_.FORMATS.RGB]=e.RGB8_SNORM,r[_.FORMATS.RG]=e.RG8_SNORM,r[_.FORMATS.RED]=e.R8_SNORM,r[_.FORMATS.RGBA_INTEGER]=e.RGBA8I,r[_.FORMATS.RGB_INTEGER]=e.RGB8I,r[_.FORMATS.RG_INTEGER]=e.RG8I,r[_.FORMATS.RED_INTEGER]=e.R8I,r),i[_.TYPES.UNSIGNED_SHORT]=(o={},o[_.FORMATS.RGBA_INTEGER]=e.RGBA16UI,o[_.FORMATS.RGB_INTEGER]=e.RGB16UI,o[_.FORMATS.RG_INTEGER]=e.RG16UI,o[_.FORMATS.RED_INTEGER]=e.R16UI,o[_.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT16,o),i[_.TYPES.SHORT]=(n={},n[_.FORMATS.RGBA_INTEGER]=e.RGBA16I,n[_.FORMATS.RGB_INTEGER]=e.RGB16I,n[_.FORMATS.RG_INTEGER]=e.RG16I,n[_.FORMATS.RED_INTEGER]=e.R16I,n),i[_.TYPES.UNSIGNED_INT]=(s={},s[_.FORMATS.RGBA_INTEGER]=e.RGBA32UI,s[_.FORMATS.RGB_INTEGER]=e.RGB32UI,s[_.FORMATS.RG_INTEGER]=e.RG32UI,s[_.FORMATS.RED_INTEGER]=e.R32UI,s[_.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT24,s),i[_.TYPES.INT]=(a={},a[_.FORMATS.RGBA_INTEGER]=e.RGBA32I,a[_.FORMATS.RGB_INTEGER]=e.RGB32I,a[_.FORMATS.RG_INTEGER]=e.RG32I,a[_.FORMATS.RED_INTEGER]=e.R32I,a),i[_.TYPES.FLOAT]=(l={},l[_.FORMATS.RGBA]=e.RGBA32F,l[_.FORMATS.RGB]=e.RGB32F,l[_.FORMATS.RG]=e.RG32F,l[_.FORMATS.RED]=e.R32F,l[_.FORMATS.DEPTH_COMPONENT]=e.DEPTH_COMPONENT32F,l),i[_.TYPES.HALF_FLOAT]=(u={},u[_.FORMATS.RGBA]=e.RGBA16F,u[_.FORMATS.RGB]=e.RGB16F,u[_.FORMATS.RG]=e.RG16F,u[_.FORMATS.RED]=e.R16F,u),i[_.TYPES.UNSIGNED_SHORT_5_6_5]=(p={},p[_.FORMATS.RGB]=e.RGB565,p),i[_.TYPES.UNSIGNED_SHORT_4_4_4_4]=(f={},f[_.FORMATS.RGBA]=e.RGBA4,f),i[_.TYPES.UNSIGNED_SHORT_5_5_5_1]=(c={},c[_.FORMATS.RGBA]=e.RGB5_A1,c),i[_.TYPES.UNSIGNED_INT_2_10_10_10_REV]=(d={},d[_.FORMATS.RGBA]=e.RGB10_A2,d[_.FORMATS.RGBA_INTEGER]=e.RGB10_A2UI,d),i[_.TYPES.UNSIGNED_INT_10F_11F_11F_REV]=(v={},v[_.FORMATS.RGB]=e.R11F_G11F_B10F,v),i[_.TYPES.UNSIGNED_INT_5_9_9_9_REV]=(m={},m[_.FORMATS.RGB]=e.RGB9_E5,m),i[_.TYPES.UNSIGNED_INT_24_8]=(y={},y[_.FORMATS.DEPTH_STENCIL]=e.DEPTH24_STENCIL8,y),i[_.TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]=(g={},g[_.FORMATS.DEPTH_STENCIL]=e.DEPTH32F_STENCIL8,g),i):O=(T={},T[_.TYPES.UNSIGNED_BYTE]=(x={},x[_.FORMATS.RGBA]=e.RGBA,x[_.FORMATS.RGB]=e.RGB,x[_.FORMATS.ALPHA]=e.ALPHA,x[_.FORMATS.LUMINANCE]=e.LUMINANCE,x[_.FORMATS.LUMINANCE_ALPHA]=e.LUMINANCE_ALPHA,x),T[_.TYPES.UNSIGNED_SHORT_5_6_5]=(I={},I[_.FORMATS.RGB]=e.RGB,I),T[_.TYPES.UNSIGNED_SHORT_4_4_4_4]=(b={},b[_.FORMATS.RGBA]=e.RGBA,b),T[_.TYPES.UNSIGNED_SHORT_5_5_5_1]=(E={},E[_.FORMATS.RGBA]=e.RGBA,E),T),O}h(U_,"mapTypeAndFormatToInternalFormat");var Kr=function(){function e(i){this.texture=i,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=_.TYPES.UNSIGNED_BYTE,this.internalFormat=_.FORMATS.RGBA,this.samplerType=0}return h(e,"GLTexture"),e}(),as=function(){function e(i){this.renderer=i,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Ee,this.hasIntegerTextures=!1}return h(e,"TextureSystem"),e.prototype.contextChange=function(){var i=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=U_(i);var t=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var r=0;r<t;r++)this.boundTextures[r]=null;this.emptyTextures={};var o=new Kr(i.createTexture());i.bindTexture(i.TEXTURE_2D,o.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[i.TEXTURE_2D]=o,this.emptyTextures[i.TEXTURE_CUBE_MAP]=new Kr(i.createTexture()),i.bindTexture(i.TEXTURE_CUBE_MAP,this.emptyTextures[i.TEXTURE_CUBE_MAP].texture);for(var r=0;r<6;r++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,null);i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_CUBE_MAP,i.TEXTURE_MIN_FILTER,i.LINEAR);for(var r=0;r<this.boundTextures.length;r++)this.bind(null,r)},e.prototype.bind=function(i,t){t===void 0&&(t=0);var r=this.gl;if(i=i==null?void 0:i.castToBaseTexture(),i&&i.valid&&!i.parentTextureArray){i.touched=this.renderer.textureGC.count;var o=i._glTextures[this.CONTEXT_UID]||this.initTexture(i);this.boundTextures[t]!==i&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(i.target,o.texture)),o.dirtyId!==i.dirtyId&&(this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),this.updateTexture(i)),this.boundTextures[t]=i}else this.currentLocation!==t&&(this.currentLocation=t,r.activeTexture(r.TEXTURE0+t)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[t]=null},e.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]=this.unknownTexture},e.prototype.unbind=function(i){var t=this,r=t.gl,o=t.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var n=0;n<o.length;n++)o[n]===this.unknownTexture&&this.bind(null,n)}for(var n=0;n<o.length;n++)o[n]===i&&(this.currentLocation!==n&&(r.activeTexture(r.TEXTURE0+n),this.currentLocation=n),r.bindTexture(i.target,this.emptyTextures[i.target].texture),o[n]=null)},e.prototype.ensureSamplerType=function(i){var t=this,r=t.boundTextures,o=t.hasIntegerTextures,n=t.CONTEXT_UID;if(!!o)for(var s=i-1;s>=0;--s){var a=r[s];if(a){var l=a._glTextures[n];l.samplerType!==_.SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(a)}}},e.prototype.initTexture=function(i){var t=new Kr(this.gl.createTexture());return t.dirtyId=-1,i._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(i),i.on("dispose",this.destroyTexture,this),t},e.prototype.initTextureType=function(i,t){var r,o;t.internalFormat=(o=(r=this.internalFormats[i.type])===null||r===void 0?void 0:r[i.format])!==null&&o!==void 0?o:i.format,this.webGLVersion===2&&i.type===_.TYPES.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=i.type},e.prototype.updateTexture=function(i){var t=i._glTextures[this.CONTEXT_UID];if(!!t){var r=this.renderer;if(this.initTextureType(i,t),i.resource&&i.resource.upload(r,i,t))t.samplerType!==_.SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{var o=i.realWidth,n=i.realHeight,s=r.gl;(t.width!==o||t.height!==n||t.dirtyId<0)&&(t.width=o,t.height=n,s.texImage2D(i.target,0,t.internalFormat,o,n,0,i.format,t.type,null))}i.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(i),t.dirtyId=i.dirtyId}},e.prototype.destroyTexture=function(i,t){var r=this.gl;if(i=i.castToBaseTexture(),i._glTextures[this.CONTEXT_UID]&&(this.unbind(i),r.deleteTexture(i._glTextures[this.CONTEXT_UID].texture),i.off("dispose",this.destroyTexture,this),delete i._glTextures[this.CONTEXT_UID],!t)){var o=this.managedTextures.indexOf(i);o!==-1&&L.removeItems(this.managedTextures,o,1)}},e.prototype.updateTextureStyle=function(i){var t=i._glTextures[this.CONTEXT_UID];!t||((i.mipmap===_.MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!i.isPowerOfTwo?t.mipmap=!1:t.mipmap=i.mipmap>=1,this.webGLVersion!==2&&!i.isPowerOfTwo?t.wrapMode=_.WRAP_MODES.CLAMP:t.wrapMode=i.wrapMode,i.resource&&i.resource.style(this.renderer,i,t)||this.setStyle(i,t),t.dirtyStyleId=i.dirtyStyleId)},e.prototype.setStyle=function(i,t){var r=this.gl;if(t.mipmap&&i.mipmap!==_.MIPMAP_MODES.ON_MANUAL&&r.generateMipmap(i.target),r.texParameteri(i.target,r.TEXTURE_WRAP_S,t.wrapMode),r.texParameteri(i.target,r.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){r.texParameteri(i.target,r.TEXTURE_MIN_FILTER,i.scaleMode===_.SCALE_MODES.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);var o=this.renderer.context.extensions.anisotropicFiltering;if(o&&i.anisotropicLevel>0&&i.scaleMode===_.SCALE_MODES.LINEAR){var n=Math.min(i.anisotropicLevel,r.getParameter(o.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(i.target,o.TEXTURE_MAX_ANISOTROPY_EXT,n)}}else r.texParameteri(i.target,r.TEXTURE_MIN_FILTER,i.scaleMode===_.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(i.target,r.TEXTURE_MAG_FILTER,i.scaleMode===_.SCALE_MODES.LINEAR?r.LINEAR:r.NEAREST)},e.prototype.destroy=function(){this.renderer=null},e}(),Rh={__proto__:null,FilterSystem:Bn,BatchSystem:kn,ContextSystem:Hn,FramebufferSystem:Xn,GeometrySystem:Vn,MaskSystem:Qn,ScissorSystem:es,StencilSystem:ts,ProjectionSystem:is,RenderTextureSystem:rs,ShaderSystem:os,StateSystem:ns,TextureGCSystem:ss,TextureSystem:as},ls=new G.Matrix,Ih=function(e){oe(i,e);function i(t,r){t===void 0&&(t=_.RENDERER_TYPE.UNKNOWN);var o=e.call(this)||this;return r=Object.assign({},Z.settings.RENDER_OPTIONS,r),o.options=r,o.type=t,o.screen=new G.Rectangle(0,0,r.width,r.height),o.view=r.view||document.createElement("canvas"),o.resolution=r.resolution||Z.settings.RESOLUTION,o.useContextAlpha=r.useContextAlpha,o.autoDensity=!!r.autoDensity,o.preserveDrawingBuffer=r.preserveDrawingBuffer,o.clearBeforeRender=r.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=r.backgroundColor||o._backgroundColor,o.backgroundAlpha=r.backgroundAlpha,r.transparent!==void 0&&(L.deprecation("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=r.transparent,o.backgroundAlpha=r.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return h(i,"AbstractRenderer"),i.prototype.initPlugins=function(t){for(var r in t)this.plugins[r]=new t[r](this)},Object.defineProperty(i.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),i.prototype.resize=function(t,r){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(r*this.resolution);var o=this.view.width/this.resolution,n=this.view.height/this.resolution;this.screen.width=o,this.screen.height=n,this.autoDensity&&(this.view.style.width=o+"px",this.view.style.height=n+"px"),this.emit("resize",o,n)},i.prototype.generateTexture=function(t,r,o,n){r===void 0&&(r={}),typeof r=="number"&&(L.deprecation("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),r={scaleMode:r,resolution:o,region:n});var s=r.region,a=Ky(r,["region"]);n=s||t.getLocalBounds(null,!0),n.width===0&&(n.width=1),n.height===0&&(n.height=1);var l=kr.create(wn({width:n.width,height:n.height},a));return ls.tx=-n.x,ls.ty=-n.y,this.render(t,{renderTexture:l,clear:!1,transform:ls,skipUpdateTransform:!!t.parent}),l},i.prototype.destroy=function(t){for(var r in this.plugins)this.plugins[r].destroy(),this.plugins[r]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var o=this;o.plugins=null,o.type=_.RENDERER_TYPE.UNKNOWN,o.view=null,o.screen=null,o._tempDisplayObjectParent=null,o.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(i.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=L.hex2string(t),L.hex2rgb(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),i}(L.EventEmitter),L_=function(){function e(i){this.buffer=i||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}return h(e,"GLBuffer"),e}(),D_=function(){function e(i){this.renderer=i,this.managedBuffers={},this.boundBufferBases={}}return h(e,"BufferSystem"),e.prototype.destroy=function(){this.renderer=null},e.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},e.prototype.bind=function(i){var t=this,r=t.gl,o=t.CONTEXT_UID,n=i._glBuffers[o]||this.createGLBuffer(i);r.bindBuffer(i.type,n.buffer)},e.prototype.bindBufferBase=function(i,t){var r=this,o=r.gl,n=r.CONTEXT_UID;if(this.boundBufferBases[t]!==i){var s=i._glBuffers[n]||this.createGLBuffer(i);this.boundBufferBases[t]=i,o.bindBufferBase(o.UNIFORM_BUFFER,t,s.buffer)}},e.prototype.bindBufferRange=function(i,t,r){var o=this,n=o.gl,s=o.CONTEXT_UID;r=r||0;var a=i._glBuffers[s]||this.createGLBuffer(i);n.bindBufferRange(n.UNIFORM_BUFFER,t||0,a.buffer,r*256,256)},e.prototype.update=function(i){var t=this,r=t.gl,o=t.CONTEXT_UID,n=i._glBuffers[o];if(i._updateID!==n.updateID)if(n.updateID=i._updateID,r.bindBuffer(i.type,n.buffer),n.byteLength>=i.data.byteLength)r.bufferSubData(i.type,0,i.data);else{var s=i.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;n.byteLength=i.data.byteLength,r.bufferData(i.type,i.data,s)}},e.prototype.dispose=function(i,t){if(!!this.managedBuffers[i.id]){delete this.managedBuffers[i.id];var r=i._glBuffers[this.CONTEXT_UID],o=this.gl;i.disposeRunner.remove(this),!!r&&(t||o.deleteBuffer(r.buffer),delete i._glBuffers[this.CONTEXT_UID])}},e.prototype.disposeAll=function(i){for(var t=Object.keys(this.managedBuffers),r=0;r<t.length;r++)this.dispose(this.managedBuffers[t[r]],i)},e.prototype.createGLBuffer=function(i){var t=this,r=t.CONTEXT_UID,o=t.gl;return i._glBuffers[r]=new L_(o.createBuffer()),this.managedBuffers[i.id]=i,i.disposeRunner.add(this),i._glBuffers[r]},e}(),Ah=function(e){oe(i,e);function i(t){var r=e.call(this,_.RENDERER_TYPE.WEBGL,t)||this;return t=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new Oe.Runner("destroy"),contextChange:new Oe.Runner("contextChange"),reset:new Oe.Runner("reset"),update:new Oe.Runner("update"),postrender:new Oe.Runner("postrender"),prerender:new Oe.Runner("prerender"),resize:new Oe.Runner("resize")},r.runners.contextChange.add(r),r.globalUniforms=new gt({projectionMatrix:new G.Matrix},!0),r.addSystem(Qn,"mask").addSystem(Hn,"context").addSystem(ns,"state").addSystem(os,"shader").addSystem(as,"texture").addSystem(D_,"buffer").addSystem(Vn,"geometry").addSystem(Xn,"framebuffer").addSystem(es,"scissor").addSystem(ts,"stencil").addSystem(is,"projection").addSystem(ss,"textureGC").addSystem(Bn,"filter").addSystem(rs,"renderTexture").addSystem(kn,"batch"),r.initPlugins(i.__plugins),r.multisample=void 0,t.context?r.context.initFromContext(t.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:t.antialias,premultipliedAlpha:r.useContextAlpha&&r.useContextAlpha!=="notMultiplied",stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,L.sayHello(r.context.webGLVersion===2?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return h(i,"Renderer"),i.create=function(t){if(L.isWebGLSupported())return new i(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},i.prototype.contextChange=function(){var t=this.gl,r;if(this.context.webGLVersion===1){var o=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,o)}else{var o=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),r=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,o)}r>=_.MSAA_QUALITY.HIGH?this.multisample=_.MSAA_QUALITY.HIGH:r>=_.MSAA_QUALITY.MEDIUM?this.multisample=_.MSAA_QUALITY.MEDIUM:r>=_.MSAA_QUALITY.LOW?this.multisample=_.MSAA_QUALITY.LOW:this.multisample=_.MSAA_QUALITY.NONE},i.prototype.addSystem=function(t,r){var o=new t(this);if(this[r])throw new Error('Whoops! The name "'+r+'" is already in use');this[r]=o;for(var n in this.runners)this.runners[n].add(o);return this},i.prototype.render=function(t,r){var o,n,s,a;if(r&&(r instanceof kr?(L.deprecation("6.0.0","Renderer#render arguments changed, use options instead."),o=r,n=arguments[2],s=arguments[3],a=arguments[4]):(o=r.renderTexture,n=r.clear,s=r.transform,a=r.skipUpdateTransform)),this.renderingToScreen=!o,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=s,!this.context.isLost){if(o||(this._lastObjectRendered=t),!a){var l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}this.renderTexture.bind(o),this.batch.currentRenderer.start(),(n!==void 0?n:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),o&&o.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},i.prototype.generateTexture=function(t,r,o,n){r===void 0&&(r={});var s=e.prototype.generateTexture.call(this,t,r,o,n);return this.framebuffer.blit(),s},i.prototype.resize=function(t,r){e.prototype.resize.call(this,t,r),this.runners.resize.emit(this.screen.height,this.screen.width)},i.prototype.reset=function(){return this.runners.reset.emit(),this},i.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},i.prototype.destroy=function(t){this.runners.destroy.emit();for(var r in this.runners)this.runners[r].destroy();e.prototype.destroy.call(this,t),this.gl=null},Object.defineProperty(i.prototype,"extract",{get:function(){return L.deprecation("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),i.registerPlugin=function(t,r){i.__plugins=i.__plugins||{},i.__plugins[t]=r},i}(Ih);function B_(e){return Ah.create(e)}h(B_,"autoDetectRenderer");var G_=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,k_=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,H_=G_,X_=k_,j_=function(){function e(i){L.deprecation("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=i}return h(e,"System"),e.prototype.destroy=function(){this.renderer=null},e}(),Ph=function(){function e(){this.texArray=null,this.blend=0,this.type=_.DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}return h(e,"BatchDrawCall"),e}(),wh=function(){function e(){this.elements=[],this.ids=[],this.count=0}return h(e,"BatchTextureArray"),e.prototype.clear=function(){for(var i=0;i<this.count;i++)this.elements[i]=null;this.count=0},e}(),Sh=function(){function e(i){typeof i=="number"?this.rawBinaryData=new ArrayBuffer(i):i instanceof Uint8Array?this.rawBinaryData=i.buffer:this.rawBinaryData=i,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return h(e,"ViewableBuffer"),Object.defineProperty(e.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),e.prototype.view=function(i){return this[i+"View"]},e.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},e.sizeOf=function(i){switch(i){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(i+" isn't a valid view type")}},e}(),Oh=function(e){oe(i,e);function i(t){var r=e.call(this,t)||this;return r.shaderGenerator=null,r.geometryClass=null,r.vertexSize=null,r.state=Wr.for2d(),r.size=Z.settings.SPRITE_BATCH_SIZE*4,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.MAX_TEXTURES=1,r.renderer.on("prerender",r.onPrerender,r),t.runners.contextChange.add(r),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return h(i,"AbstractBatchRenderer"),i.prototype.contextChange=function(){var t=this.renderer.gl;Z.settings.PREFER_ENV===_.ENV.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Z.settings.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=fh(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var r=0;r<this._packedGeometryPoolSize;r++)this._packedGeometries[r]=new this.geometryClass;this.initFlushBuffers()},i.prototype.initFlushBuffers=function(){for(var t=i._drawCallPool,r=i._textureArrayPool,o=this.size/4,n=Math.floor(o/this.MAX_TEXTURES)+1;t.length<o;)t.push(new Ph);for(;r.length<n;)r.push(new wh);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},i.prototype.onPrerender=function(){this._flushId=0},i.prototype.render=function(t){!t._texture.valid||(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},i.prototype.buildTexturesAndDrawCalls=function(){var t=this,r=t._bufferedTextures,o=t.MAX_TEXTURES,n=i._textureArrayPool,s=this.renderer.batch,a=this._tempBoundTextures,l=this.renderer.textureGC.count,u=++Ee._globalBatch,p=0,f=n[0],c=0;s.copyBoundTextures(a,o);for(var d=0;d<this._bufferSize;++d){var v=r[d];r[d]=null,v._batchEnabled!==u&&(f.count>=o&&(s.boundArray(f,a,u,o),this.buildDrawCalls(f,c,d),c=d,f=n[++p],++u),v._batchEnabled=u,v.touched=l,f.elements[f.count++]=v)}f.count>0&&(s.boundArray(f,a,u,o),this.buildDrawCalls(f,c,this._bufferSize),++p,++u);for(var d=0;d<a.length;d++)a[d]=null;Ee._globalBatch=u},i.prototype.buildDrawCalls=function(t,r,o){var n=this,s=n._bufferedElements,a=n._attributeBuffer,l=n._indexBuffer,u=n.vertexSize,p=i._drawCallPool,f=this._dcIndex,c=this._aIndex,d=this._iIndex,v=p[f];v.start=this._iIndex,v.texArray=t;for(var m=r;m<o;++m){var y=s[m],g=y._texture.baseTexture,T=L.premultiplyBlendMode[g.alphaMode?1:0][y.blendMode];s[m]=null,r<m&&v.blend!==T&&(v.size=d-v.start,r=m,v=p[++f],v.texArray=t,v.start=d),this.packInterleavedGeometry(y,a,l,c,d),c+=y.vertexData.length/2*u,d+=y.indices.length,v.blend=T}r<o&&(v.size=d-v.start,++f),this._dcIndex=f,this._aIndex=c,this._iIndex=d},i.prototype.bindAndClearTexArray=function(t){for(var r=this.renderer.texture,o=0;o<t.count;o++)r.bind(t.elements[o],t.ids[o]),t.elements[o]=null;t.count=0},i.prototype.updateGeometry=function(){var t=this,r=t._packedGeometries,o=t._attributeBuffer,n=t._indexBuffer;Z.settings.CAN_UPLOAD_SAME_BUFFER?(r[this._flushId]._buffer.update(o.rawBinaryData),r[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,r[this._flushId]=new this.geometryClass),r[this._flushId]._buffer.update(o.rawBinaryData),r[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(r[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},i.prototype.drawBatches=function(){for(var t=this._dcIndex,r=this.renderer,o=r.gl,n=r.state,s=i._drawCallPool,a=null,l=0;l<t;l++){var u=s[l],p=u.texArray,f=u.type,c=u.size,d=u.start,v=u.blend;a!==p&&(a=p,this.bindAndClearTexArray(p)),this.state.blendMode=v,n.set(this.state),o.drawElements(f,c,o.UNSIGNED_SHORT,d*2)}},i.prototype.flush=function(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},i.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),Z.settings.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},i.prototype.stop=function(){this.flush()},i.prototype.destroy=function(){for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),e.prototype.destroy.call(this)},i.prototype.getAttributeBuffer=function(t){var r=L.nextPow2(Math.ceil(t/8)),o=L.log2(r),n=r*8;this._aBuffers.length<=o&&(this._iBuffers.length=o+1);var s=this._aBuffers[n];return s||(this._aBuffers[n]=s=new Sh(n*this.vertexSize*4)),s},i.prototype.getIndexBuffer=function(t){var r=L.nextPow2(Math.ceil(t/12)),o=L.log2(r),n=r*12;this._iBuffers.length<=o&&(this._iBuffers.length=o+1);var s=this._iBuffers[o];return s||(this._iBuffers[o]=s=new Uint16Array(n)),s},i.prototype.packInterleavedGeometry=function(t,r,o,n,s){for(var a=r.uint32View,l=r.float32View,u=n/this.vertexSize,p=t.uvs,f=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,v=Math.min(t.worldAlpha,1),m=v<1&&t._texture.baseTexture.alphaMode?L.premultiplyTint(t._tintRGB,v):t._tintRGB+(v*255<<24),y=0;y<c.length;y+=2)l[n++]=c[y],l[n++]=c[y+1],l[n++]=p[y],l[n++]=p[y+1],a[n++]=m,l[n++]=d;for(var y=0;y<f.length;y++)o[s++]=u+f[y]},i._drawCallPool=[],i._textureArrayPool=[],i}(Gn),Ch=function(){function e(i,t){if(this.vertexSrc=i,this.fragTemplate=t,this.programCache={},this.defaultGroupCache={},t.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(t.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return h(e,"BatchShaderGenerator"),e.prototype.generateShader=function(i){if(!this.programCache[i]){for(var t=new Int32Array(i),r=0;r<i;r++)t[r]=r;this.defaultGroupCache[i]=gt.from({uSamplers:t},!0);var o=this.fragTemplate;o=o.replace(/%count%/gi,""+i),o=o.replace(/%forloop%/gi,this.generateSampleSrc(i)),this.programCache[i]=new Yr(this.vertexSrc,o)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new G.Matrix,default:this.defaultGroupCache[i]};return new Yn(this.programCache[i],n)},e.prototype.generateSampleSrc=function(i){var t="";t+=`
`,t+=`
`;for(var r=0;r<i;r++)r>0&&(t+=`
else `),r<i-1&&(t+="if(vTextureId < "+r+".5)"),t+=`
{`,t+=`
	color = texture2D(uSamplers[`+r+"], vTextureCoord);",t+=`
}`;return t+=`
`,t+=`
`,t},e}(),Nh=function(e){oe(i,e);function i(t){t===void 0&&(t=!1);var r=e.call(this)||this;return r._buffer=new Pe(null,t,!1),r._indexBuffer=new Pe(null,t,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,_.TYPES.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,_.TYPES.FLOAT).addAttribute("aColor",r._buffer,4,!0,_.TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,_.TYPES.FLOAT).addIndex(r._indexBuffer),r}return h(i,"BatchGeometry"),i}(Hr),Mh=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`,Fh=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,Uh=function(){function e(){}return h(e,"BatchPluginFactory"),e.create=function(i){var t=Object.assign({vertex:Mh,fragment:Fh,geometryClass:Nh,vertexSize:6},i),r=t.vertex,o=t.fragment,n=t.vertexSize,s=t.geometryClass;return function(a){oe(l,a);function l(u){var p=a.call(this,u)||this;return p.shaderGenerator=new Ch(r,o),p.geometryClass=s,p.vertexSize=n,p}return h(l,"BatchPlugin"),l}(Oh)},Object.defineProperty(e,"defaultVertexSrc",{get:function(){return Mh},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentTemplate",{get:function(){return Fh},enumerable:!1,configurable:!0}),e}(),V_=Uh.create(),Lh={},q_=h(function(e){Object.defineProperty(Lh,e,{get:function(){return L.deprecation("6.0.0","PIXI.systems."+e+" has moved to PIXI."+e),Wu[e]}})},"_loop_1");for(Ai in Wu)q_(Ai);var Ai,Dh={},Y_=h(function(e){Object.defineProperty(Dh,e,{get:function(){return L.deprecation("6.0.0","PIXI.resources."+e+" has moved to PIXI."+e),Rh[e]}})},"_loop_2");for(Ai in Rh)Y_(Ai);var Ai;S.AbstractBatchRenderer=Oh;S.AbstractMultiResource=Ur;S.AbstractRenderer=Ih;S.ArrayResource=Sn;S.Attribute=Ln;S.BaseImageResource=qe;S.BaseRenderTexture=Fn;S.BaseTexture=Ee;S.BatchDrawCall=Ph;S.BatchGeometry=Nh;S.BatchPluginFactory=Uh;S.BatchRenderer=V_;S.BatchShaderGenerator=Ch;S.BatchSystem=kn;S.BatchTextureArray=wh;S.Buffer=Pe;S.BufferResource=xi;S.CanvasResource=Lr;S.ContextSystem=Hn;S.CubeResource=On;S.Filter=ch;S.FilterState=Qu;S.FilterSystem=Bn;S.Framebuffer=Br;S.FramebufferSystem=Xn;S.GLFramebuffer=th;S.GLProgram=xh;S.GLTexture=Kr;S.Geometry=Hr;S.GeometrySystem=Vn;S.IGLUniformData=R_;S.INSTALLED=Ti;S.ImageBitmapResource=Mn;S.ImageResource=Dr;S.MaskData=ih;S.MaskSystem=Qn;S.ObjectRenderer=Gn;S.Program=Yr;S.ProjectionSystem=is;S.Quad=$u;S.QuadUv=Ju;S.RenderTexture=kr;S.RenderTexturePool=Ku;S.RenderTextureSystem=rs;S.Renderer=Ah;S.Resource=bt;S.SVGResource=Cn;S.ScissorSystem=es;S.Shader=Yn;S.ShaderSystem=os;S.SpriteMaskFilter=mh;S.State=Wr;S.StateSystem=ns;S.StencilSystem=ts;S.System=j_;S.Texture=Ye;S.TextureGCSystem=ss;S.TextureMatrix=vh;S.TextureSystem=as;S.TextureUvs=Un;S.UniformGroup=gt;S.VideoResource=Nn;S.ViewableBuffer=Sh;S.autoDetectRenderer=B_;S.autoDetectResource=Fr;S.checkMaxIfStatementsInShader=fh;S.createUBOElements=bh;S.defaultFilterVertex=X_;S.defaultVertex=H_;S.generateProgram=Eh;S.generateUniformBufferSync=Th;S.getTestContext=ah;S.getUBOData=gh;S.resources=Lh;S.systems=Dh;S.uniformParsers=Tt});var Gh=R(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});var W_=Ae(),z_=ae(),Bh=function(){function e(i){var t=this;this.stage=new W_.Container,i=Object.assign({forceCanvas:!1},i),this.renderer=z_.autoDetectRenderer(i),e._plugins.forEach(function(r){r.init.call(t,i)})}return h(e,"Application"),e.registerPlugin=function(i){e._plugins.push(i)},e.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(e.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),e.prototype.destroy=function(i,t){var r=this,o=e._plugins.slice(0);o.reverse(),o.forEach(function(n){n.destroy.call(r)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(i),this.renderer=null},e._plugins=[],e}(),K_=function(){function e(){}return h(e,"ResizePlugin"),e.init=function(i){var t=this;Object.defineProperty(this,"resizeTo",{set:function(r){self.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){!t._resizeTo||(t.cancelResize(),t._resizeId=requestAnimationFrame(function(){return t.resize()}))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(!!t._resizeTo){t.cancelResize();var r,o;if(t._resizeTo===self)r=self.innerWidth,o=self.innerHeight;else{var n=t._resizeTo,s=n.clientWidth,a=n.clientHeight;r=s,o=a}t.renderer.resize(r,o)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=i.resizeTo||null},e.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},e}();Bh.registerPlugin(K_);us.Application=Bh});var Vh=R(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});var kh=ge(),Z_=_e(),Hh=ae(),Xh=new Z_.Rectangle,jh=4,$_=function(){function e(i){this.renderer=i}return h(e,"Extract"),e.prototype.image=function(i,t,r){var o=new Image;return o.src=this.base64(i,t,r),o},e.prototype.base64=function(i,t,r){return this.canvas(i).toDataURL(t,r)},e.prototype.canvas=function(i){var t=this.renderer,r,o,n=!1,s,a=!1;i&&(i instanceof Hh.RenderTexture?s=i:(s=this.renderer.generateTexture(i),a=!0)),s?(r=s.baseTexture.resolution,o=s.frame,n=!1,t.renderTexture.bind(s)):(r=this.renderer.resolution,n=!0,o=Xh,o.width=this.renderer.width,o.height=this.renderer.height,t.renderTexture.bind(null));var l=Math.floor(o.width*r+1e-4),u=Math.floor(o.height*r+1e-4),p=new kh.CanvasRenderTarget(l,u,1),f=new Uint8Array(jh*l*u),c=t.gl;c.readPixels(o.x*r,o.y*r,l,u,c.RGBA,c.UNSIGNED_BYTE,f);var d=p.context.getImageData(0,0,l,u);if(e.arrayPostDivide(f,d.data),p.context.putImageData(d,0,0),n){var v=new kh.CanvasRenderTarget(p.width,p.height,1);v.context.scale(1,-1),v.context.drawImage(p.canvas,0,-u),p.destroy(),p=v}return a&&s.destroy(!0),p.canvas},e.prototype.pixels=function(i){var t=this.renderer,r,o,n,s=!1;i&&(i instanceof Hh.RenderTexture?n=i:(n=this.renderer.generateTexture(i),s=!0)),n?(r=n.baseTexture.resolution,o=n.frame,t.renderTexture.bind(n)):(r=t.resolution,o=Xh,o.width=t.width,o.height=t.height,t.renderTexture.bind(null));var a=o.width*r,l=o.height*r,u=new Uint8Array(jh*a*l),p=t.gl;return p.readPixels(o.x*r,o.y*r,a,l,p.RGBA,p.UNSIGNED_BYTE,u),s&&n.destroy(!0),e.arrayPostDivide(u,u),u},e.prototype.destroy=function(){this.renderer=null},e.arrayPostDivide=function(i,t){for(var r=0;r<i.length;r+=4){var o=t[r+3]=i[r+3];o!==0?(t[r]=Math.round(Math.min(i[r]*255/o,255)),t[r+1]=Math.round(Math.min(i[r+1]*255/o,255)),t[r+2]=Math.round(Math.min(i[r+2]*255/o,255))):(t[r]=i[r],t[r+1]=i[r+1],t[r+2]=i[r+2])}},e}();hs.Extract=$_});var Pi=R(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});var J_=ae(),Zr=function(){function e(i,t,r){t===void 0&&(t=!1),this._fn=i,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return h(e,"SignalBinding"),e.prototype.detach=function(){return this._owner===null?!1:(this._owner.detach(this),!0)},e}();function qh(e,i){return e._head?(e._tail._next=i,i._prev=e._tail,e._tail=i):(e._head=i,e._tail=i),i._owner=e,i}h(qh,"_addSignalBinding");var $e=function(){function e(){this._head=this._tail=void 0}return h(e,"Signal"),e.prototype.handlers=function(i){i===void 0&&(i=!1);var t=this._head;if(i)return!!t;for(var r=[];t;)r.push(t),t=t._next;return r},e.prototype.has=function(i){if(!(i instanceof Zr))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return i._owner===this},e.prototype.dispatch=function(){for(var i=arguments,t=[],r=0;r<arguments.length;r++)t[r]=i[r];var o=this._head;if(!o)return!1;for(;o;)o._once&&this.detach(o),o._fn.apply(o._thisArg,t),o=o._next;return!0},e.prototype.add=function(i,t){if(t===void 0&&(t=null),typeof i!="function")throw new Error("MiniSignal#add(): First arg must be a Function.");return qh(this,new Zr(i,!1,t))},e.prototype.once=function(i,t){if(t===void 0&&(t=null),typeof i!="function")throw new Error("MiniSignal#once(): First arg must be a Function.");return qh(this,new Zr(i,!0,t))},e.prototype.detach=function(i){if(!(i instanceof Zr))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return i._owner!==this?this:(i._prev&&(i._prev._next=i._next),i._next&&(i._next._prev=i._prev),i===this._head?(this._head=i._next,i._next===null&&(this._tail=null)):i===this._tail&&(this._tail=i._prev,this._tail._next=null),i._owner=null,this)},e.prototype.detachAll=function(){var i=this._head;if(!i)return this;for(this._head=this._tail=null;i;)i._owner=null,i=i._next;return this},e}();function Yh(e,i){i=i||{};for(var t={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=t.parser[i.strictMode?"strict":"loose"].exec(e),o={},n=14;n--;)o[t.key[n]]=r[n]||"";return o[t.q.name]={},o[t.key[12]].replace(t.q.parser,function(s,a,l){a&&(o[t.q.name][a]=l)}),o}h(Yh,"parseUri");var Q_=!!(self.XDomainRequest&&!("withCredentials"in new XMLHttpRequest)),$r=null,eb=0,Wh=200,tb=204,ib=1223,rb=2;function zh(){}h(zh,"_noop");function Kh(e,i,t){i&&i.indexOf(".")===0&&(i=i.substring(1)),!!i&&(e[i]=t)}h(Kh,"setExtMap");function ps(e){return e.toString().replace("object ","")}h(ps,"reqType");Te.LoaderResource=function(){function e(i,t,r){if(this._dequeue=zh,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,typeof i!="string"||typeof t!="string")throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(e.STATUS_FLAGS.DATA_URL,t.indexOf("data:")===0),this.name=i,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=r.crossOrigin===!0?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=e.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=zh,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new $e,this.onProgress=new $e,this.onComplete=new $e,this.onAfterMiddleware=new $e}return h(e,"LoaderResource"),e.setExtensionLoadType=function(i,t){Kh(e._loadTypeMap,i,t)},e.setExtensionXhrType=function(i,t){Kh(e._xhrTypeMap,i,t)},Object.defineProperty(e.prototype,"isDataUrl",{get:function(){return this._hasFlag(e.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isComplete",{get:function(){return this._hasFlag(e.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._hasFlag(e.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),e.prototype.complete=function(){this._clearEvents(),this._finish()},e.prototype.abort=function(i){if(!this.error){if(this.error=new Error(i),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=e.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},e.prototype.load=function(i){var t=this;if(!this.isLoading){if(this.isComplete){i&&setTimeout(function(){return i(t)},1);return}else i&&this.onComplete.once(i);switch(this._setFlag(e.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),(this.crossOrigin===!1||typeof this.crossOrigin!="string")&&(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case e.LOAD_TYPE.IMAGE:this.type=e.TYPE.IMAGE,this._loadElement("image");break;case e.LOAD_TYPE.AUDIO:this.type=e.TYPE.AUDIO,this._loadSourceElement("audio");break;case e.LOAD_TYPE.VIDEO:this.type=e.TYPE.VIDEO,this._loadSourceElement("video");break;case e.LOAD_TYPE.XHR:default:Q_&&this.crossOrigin?this._loadXdr():this._loadXhr();break}}},e.prototype._hasFlag=function(i){return(this._flags&i)!=0},e.prototype._setFlag=function(i,t){this._flags=t?this._flags|i:this._flags&~i},e.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},e.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(e.STATUS_FLAGS.COMPLETE,!0),this._setFlag(e.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},e.prototype._loadElement=function(i){this.metadata.loadElement?this.data=this.metadata.loadElement:i==="image"&&typeof self.Image!="undefined"?this.data=new Image:this.data=document.createElement(i),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadSourceElement=function(i){if(this.metadata.loadElement?this.data=this.metadata.loadElement:i==="audio"&&typeof self.Audio!="undefined"?this.data=new Audio:this.data=document.createElement(i),this.data===null){this.abort("Unsupported element: "+i);return}if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var t=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(i,this.url[r],Array.isArray(t)?t[r]:t));else{var t=this.metadata.mimeType;this.data.appendChild(this._createSource(i,this.url,Array.isArray(t)?t[0]:t))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},e.prototype._loadXhr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new XMLHttpRequest;i.open("GET",this.url,!0),i.timeout=this.timeout,this.xhrType===e.XHR_RESPONSE_TYPE.JSON||this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT?i.responseType=e.XHR_RESPONSE_TYPE.TEXT:i.responseType=this.xhrType,i.addEventListener("error",this._boundXhrOnError,!1),i.addEventListener("timeout",this._boundXhrOnTimeout,!1),i.addEventListener("abort",this._boundXhrOnAbort,!1),i.addEventListener("progress",this._boundOnProgress,!1),i.addEventListener("load",this._boundXhrOnLoad,!1),i.send()},e.prototype._loadXdr=function(){typeof this.xhrType!="string"&&(this.xhrType=this._determineXhrType());var i=this.xhr=new self.XDomainRequest;i.timeout=this.timeout||5e3,i.onerror=this._boundXhrOnError,i.ontimeout=this._boundXhrOnTimeout,i.onprogress=this._boundOnProgress,i.onload=this._boundXhrOnLoad,i.open("GET",this.url,!0),setTimeout(function(){return i.send()},1)},e.prototype._createSource=function(i,t,r){r||(r=i+"/"+this._getExtension(t));var o=document.createElement("source");return o.src=t,o.type=r,o},e.prototype._onError=function(i){this.abort("Failed to load element using: "+i.target.nodeName)},e.prototype._onProgress=function(i){i&&i.lengthComputable&&this.onProgress.dispatch(this,i.loaded/i.total)},e.prototype._onTimeout=function(){this.abort("Load timed out.")},e.prototype._xhrOnError=function(){var i=this.xhr;this.abort(ps(i)+" Request failed. Status: "+i.status+', text: "'+i.statusText+'"')},e.prototype._xhrOnTimeout=function(){var i=this.xhr;this.abort(ps(i)+" Request timed out.")},e.prototype._xhrOnAbort=function(){var i=this.xhr;this.abort(ps(i)+" Request was aborted by the user.")},e.prototype._xhrOnLoad=function(){var i=this.xhr,t="",r=typeof i.status=="undefined"?Wh:i.status;(i.responseType===""||i.responseType==="text"||typeof i.responseType=="undefined")&&(t=i.responseText),r===eb&&(t.length>0||i.responseType===e.XHR_RESPONSE_TYPE.BUFFER)?r=Wh:r===ib&&(r=tb);var o=r/100|0;if(o===rb)if(this.xhrType===e.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=e.TYPE.TEXT;else if(this.xhrType===e.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=e.TYPE.JSON}catch(a){this.abort("Error trying to parse loaded json: "+a);return}else if(this.xhrType===e.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var n=new DOMParser;this.data=n.parseFromString(t,"text/xml")}else{var s=document.createElement("div");s.innerHTML=t,this.data=s}this.type=e.TYPE.XML}catch(a){this.abort("Error trying to parse loaded xml: "+a);return}else this.data=i.response||t;else{this.abort("["+i.status+"] "+i.statusText+": "+i.responseURL);return}this.complete()},e.prototype._determineCrossOrigin=function(i,t){if(i.indexOf("data:")===0)return"";if(self.origin!==self.location.origin)return"anonymous";t=t||self.location,$r||($r=document.createElement("a")),$r.href=i;var r=Yh($r.href,{strictMode:!0}),o=!r.port&&t.port===""||r.port===t.port,n=r.protocol?r.protocol+":":"";return r.host!==t.hostname||!o||n!==t.protocol?"anonymous":""},e.prototype._determineXhrType=function(){return e._xhrTypeMap[this.extension]||e.XHR_RESPONSE_TYPE.TEXT},e.prototype._determineLoadType=function(){return e._loadTypeMap[this.extension]||e.LOAD_TYPE.XHR},e.prototype._getExtension=function(i){i===void 0&&(i=this.url);var t="";if(this.isDataUrl){var r=i.indexOf("/");t=i.substring(r+1,i.indexOf(";",r))}else{var o=i.indexOf("?"),n=i.indexOf("#"),s=Math.min(o>-1?o:i.length,n>-1?n:i.length);i=i.substring(0,s),t=i.substring(i.lastIndexOf(".")+1)}return t.toLowerCase()},e.prototype._getMimeFromXhrType=function(i){switch(i){case e.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case e.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case e.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case e.XHR_RESPONSE_TYPE.JSON:return"application/json";case e.XHR_RESPONSE_TYPE.DEFAULT:case e.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},e}();(function(e){var i;(function(n){n[n.NONE=0]="NONE",n[n.DATA_URL=1]="DATA_URL",n[n.COMPLETE=2]="COMPLETE",n[n.LOADING=4]="LOADING"})(i=e.STATUS_FLAGS||(e.STATUS_FLAGS={}));var t;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.JSON=1]="JSON",n[n.XML=2]="XML",n[n.IMAGE=3]="IMAGE",n[n.AUDIO=4]="AUDIO",n[n.VIDEO=5]="VIDEO",n[n.TEXT=6]="TEXT"})(t=e.TYPE||(e.TYPE={}));var r;(function(n){n[n.XHR=1]="XHR",n[n.IMAGE=2]="IMAGE",n[n.AUDIO=3]="AUDIO",n[n.VIDEO=4]="VIDEO"})(r=e.LOAD_TYPE||(e.LOAD_TYPE={}));var o;(function(n){n.DEFAULT="text",n.BUFFER="arraybuffer",n.BLOB="blob",n.DOCUMENT="document",n.JSON="json",n.TEXT="text"})(o=e.XHR_RESPONSE_TYPE||(e.XHR_RESPONSE_TYPE={})),e._loadTypeMap={gif:e.LOAD_TYPE.IMAGE,png:e.LOAD_TYPE.IMAGE,bmp:e.LOAD_TYPE.IMAGE,jpg:e.LOAD_TYPE.IMAGE,jpeg:e.LOAD_TYPE.IMAGE,tif:e.LOAD_TYPE.IMAGE,tiff:e.LOAD_TYPE.IMAGE,webp:e.LOAD_TYPE.IMAGE,tga:e.LOAD_TYPE.IMAGE,svg:e.LOAD_TYPE.IMAGE,"svg+xml":e.LOAD_TYPE.IMAGE,mp3:e.LOAD_TYPE.AUDIO,ogg:e.LOAD_TYPE.AUDIO,wav:e.LOAD_TYPE.AUDIO,mp4:e.LOAD_TYPE.VIDEO,webm:e.LOAD_TYPE.VIDEO},e._xhrTypeMap={xhtml:e.XHR_RESPONSE_TYPE.DOCUMENT,html:e.XHR_RESPONSE_TYPE.DOCUMENT,htm:e.XHR_RESPONSE_TYPE.DOCUMENT,xml:e.XHR_RESPONSE_TYPE.DOCUMENT,tmx:e.XHR_RESPONSE_TYPE.DOCUMENT,svg:e.XHR_RESPONSE_TYPE.DOCUMENT,tsx:e.XHR_RESPONSE_TYPE.DOCUMENT,gif:e.XHR_RESPONSE_TYPE.BLOB,png:e.XHR_RESPONSE_TYPE.BLOB,bmp:e.XHR_RESPONSE_TYPE.BLOB,jpg:e.XHR_RESPONSE_TYPE.BLOB,jpeg:e.XHR_RESPONSE_TYPE.BLOB,tif:e.XHR_RESPONSE_TYPE.BLOB,tiff:e.XHR_RESPONSE_TYPE.BLOB,webp:e.XHR_RESPONSE_TYPE.BLOB,tga:e.XHR_RESPONSE_TYPE.BLOB,json:e.XHR_RESPONSE_TYPE.JSON,text:e.XHR_RESPONSE_TYPE.TEXT,txt:e.XHR_RESPONSE_TYPE.TEXT,ttf:e.XHR_RESPONSE_TYPE.BUFFER,otf:e.XHR_RESPONSE_TYPE.BUFFER},e.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="})(Te.LoaderResource||(Te.LoaderResource={}));function Et(){}h(Et,"_noop$1");function ob(e){return h(function(){for(var t=arguments,r=[],o=0;o<arguments.length;o++)r[o]=t[o];if(e===null)throw new Error("Callback was already called.");var n=e;e=null,n.apply(this,r)},"onceWrapper")}h(ob,"onlyOnce");var nb=function(){function e(i,t){this.data=i,this.callback=t}return h(e,"AsyncQueueItem"),e}(),fs=function(){function e(i,t){var r=this;if(t===void 0&&(t=1),this.workers=0,this.saturated=Et,this.unsaturated=Et,this.empty=Et,this.drain=Et,this.error=Et,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(o,n,s){if(s&&typeof s!="function")throw new Error("task callback must be a function");if(r.started=!0,o==null&&r.idle()){setTimeout(function(){return r.drain()},1);return}var a=new nb(o,typeof s=="function"?s:Et);n?r._tasks.unshift(a):r._tasks.push(a),setTimeout(r.process,1)},this.process=function(){for(;!r.paused&&r.workers<r.concurrency&&r._tasks.length;){var o=r._tasks.shift();r._tasks.length===0&&r.empty(),r.workers+=1,r.workers===r.concurrency&&r.saturated(),r._worker(o.data,ob(r._next(o)))}},this._worker=i,t===0)throw new Error("Concurrency must not be zero");this.concurrency=t,this.buffer=t/4}return h(e,"AsyncQueue"),e.prototype._next=function(i){var t=this;return function(){for(var r=arguments,o=[],n=0;n<arguments.length;n++)o[n]=r[n];t.workers-=1,i.callback.apply(i,o),o[0]!=null&&t.error(o[0],i.data),t.workers<=t.concurrency-t.buffer&&t.unsaturated(),t.idle()&&t.drain(),t.process()}},e.prototype.push=function(i,t){this._insert(i,!1,t)},e.prototype.kill=function(){this.workers=0,this.drain=Et,this.started=!1,this._tasks=[]},e.prototype.unshift=function(i,t){this._insert(i,!0,t)},e.prototype.length=function(){return this._tasks.length},e.prototype.running=function(){return this.workers},e.prototype.idle=function(){return this._tasks.length+this.workers===0},e.prototype.pause=function(){this.paused!==!0&&(this.paused=!0)},e.prototype.resume=function(){if(this.paused!==!1){this.paused=!1;for(var i=1;i<=this.concurrency;i++)this.process()}},e.eachSeries=function(i,t,r,o){var n=0,s=i.length;function a(l){if(l||n===s){r&&r(l);return}o?setTimeout(function(){t(i[n++],a)},1):t(i[n++],a)}h(a,"next"),a()},e.queue=function(i,t){return new e(i,t)},e}(),cs=100,sb=/(#[\w-]+)?$/,jt=function(){function e(i,t){var r=this;i===void 0&&(i=""),t===void 0&&(t=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return r._loadResource(l,u)},this.resources={},this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(l,u){return r._loadResource(l,u)},this._queue=fs.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new $e,this.onError=new $e,this.onLoad=new $e,this.onStart=new $e,this.onComplete=new $e;for(var o=0;o<e._plugins.length;++o){var n=e._plugins[o],s=n.pre,a=n.use;s&&this.pre(s),a&&this.use(a)}this._protected=!1}return h(e,"Loader"),e.prototype._add=function(i,t,r,o){if(this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error('Resource named "'+i+'" already exists.');if(t=this._prepareUrl(t),this.resources[i]=new Te.LoaderResource(i,t,r),typeof o=="function"&&this.resources[i].onAfterMiddleware.once(o),this.loading){for(var n=r.parentResource,s=[],a=0;a<n.children.length;++a)n.children[a].isComplete||s.push(n.children[a]);var l=n.progressChunk*(s.length+1),u=l/(s.length+2);n.children.push(this.resources[i]),n.progressChunk=u;for(var a=0;a<s.length;++a)s[a].progressChunk=u;this.resources[i].progressChunk=u}return this._queue.push(this.resources[i]),this},e.prototype.pre=function(i){return this._beforeMiddleware.push(i),this},e.prototype.use=function(i){return this._afterMiddleware.push(i),this},e.prototype.reset=function(){this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause();for(var i in this.resources){var t=this.resources[i];t._onLoadBinding&&t._onLoadBinding.detach(),t.isLoading&&t.abort("loader reset")}return this.resources={},this},e.prototype.load=function(i){if(typeof i=="function"&&this.onComplete.once(i),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var t=this._queue._tasks.length,r=cs/t,o=0;o<this._queue._tasks.length;++o)this._queue._tasks[o].data.progressChunk=r;this._onStart(),this._queue.resume()}return this},Object.defineProperty(e.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(i){this._queue.concurrency=i},enumerable:!1,configurable:!0}),e.prototype._prepareUrl=function(i){var t=Yh(i,{strictMode:!0}),r;if(t.protocol||!t.path||i.indexOf("//")===0?r=i:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&i.charAt(0)!=="/"?r=this.baseUrl+"/"+i:r=this.baseUrl+i,this.defaultQueryString){var o=sb.exec(r)[0];r=r.substr(0,r.length-o.length),r.indexOf("?")!==-1?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=o}return r},e.prototype._loadResource=function(i,t){var r=this;i._dequeue=t,fs.eachSeries(this._beforeMiddleware,function(o,n){o.call(r,i,function(){n(i.isComplete?{}:null)})},function(){i.isComplete?r._onLoad(i):(i._onLoadBinding=i.onComplete.once(r._onLoad,r),i.load())},!0)},e.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},e.prototype._onComplete=function(){this.progress=cs,this.loading=!1,this.onComplete.dispatch(this,this.resources)},e.prototype._onLoad=function(i){var t=this;i._onLoadBinding=null,this._resourcesParsing.push(i),i._dequeue(),fs.eachSeries(this._afterMiddleware,function(r,o){r.call(t,i,o)},function(){i.onAfterMiddleware.dispatch(i),t.progress=Math.min(cs,t.progress+i.progressChunk),t.onProgress.dispatch(t,i),i.error?t.onError.dispatch(i.error,t,i):t.onLoad.dispatch(t,i),t._resourcesParsing.splice(t._resourcesParsing.indexOf(i),1),t._queue.idle()&&t._resourcesParsing.length===0&&t._onComplete()},!0)},e.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(e,"shared",{get:function(){var i=e._shared;return i||(i=new e,i._protected=!0,e._shared=i),i},enumerable:!1,configurable:!0}),e.registerPlugin=function(i){return e._plugins.push(i),i.add&&i.add(),e},e._plugins=[],e}();jt.prototype.add=h(function(i,t,r,o){if(Array.isArray(i)){for(var n=0;n<i.length;++n)this.add(i[n]);return this}if(typeof i=="object"&&(r=i,o=t||r.callback||r.onComplete,t=r.url,i=r.name||r.key||r.url),typeof t!="string"&&(o=r,r=t,t=i),typeof t!="string")throw new Error("No url passed to add resource to loader.");return typeof r=="function"&&(o=r,r=null),this._add(i,t,r,o)},"add");var ab=function(){function e(){}return h(e,"AppLoaderPlugin"),e.init=function(i){i=Object.assign({sharedLoader:!1},i),this.loader=i.sharedLoader?jt.shared:new jt},e.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},e}(),Zh=function(){function e(){}return h(e,"TextureLoader"),e.add=function(){Te.LoaderResource.setExtensionLoadType("svg",Te.LoaderResource.LOAD_TYPE.XHR),Te.LoaderResource.setExtensionXhrType("svg",Te.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(i,t){if(i.data&&(i.type===Te.LoaderResource.TYPE.IMAGE||i.extension==="svg")){var r=i.data,o=i.url,n=i.name,s=i.metadata;J_.Texture.fromLoader(r,o,n,s).then(function(a){i.texture=a,t()}).catch(t)}else t()},e}(),lb="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ub(e){for(var i="",t=0;t<e.length;){for(var r=[0,0,0],o=[0,0,0,0],n=0;n<r.length;++n)t<e.length?r[n]=e.charCodeAt(t++)&255:r[n]=0;o[0]=r[0]>>2,o[1]=(r[0]&3)<<4|r[1]>>4,o[2]=(r[1]&15)<<2|r[2]>>6,o[3]=r[2]&63;var s=t-(e.length-1);switch(s){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64;break}for(var n=0;n<o.length;++n)i+=lb.charAt(o[n])}return i}h(ub,"encodeBinary");var $h=self.URL||self.webkitURL;function hb(e,i){if(!e.data){i();return}if(e.xhr&&e.xhrType===Te.LoaderResource.XHR_RESPONSE_TYPE.BLOB){if(!self.Blob||typeof e.data=="string"){var t=e.xhr.getResponseHeader("content-type");if(t&&t.indexOf("image")===0){e.data=new Image,e.data.src="data:"+t+";base64,"+ub(e.xhr.responseText),e.type=Te.LoaderResource.TYPE.IMAGE,e.data.onload=function(){e.data.onload=null,i()};return}}else if(e.data.type.indexOf("image")===0){var r=$h.createObjectURL(e.data);e.blob=e.data,e.data=new Image,e.data.src=r,e.type=Te.LoaderResource.TYPE.IMAGE,e.data.onload=function(){$h.revokeObjectURL(r),e.data.onload=null,i()};return}}i()}h(hb,"parsing");jt.registerPlugin({use:hb});jt.registerPlugin(Zh);Te.AppLoaderPlugin=ab;Te.Loader=jt;Te.TextureLoader=Zh});var np=R(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});var Je=ae(),wi=Pi(),pb=ge(),we=Le(),ee;(function(e){e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"})(D.INTERNAL_FORMATS||(D.INTERNAL_FORMATS={}));var Si=(ee={},ee[D.INTERNAL_FORMATS.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_R11_EAC]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_SIGNED_R11_EAC]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RG11_EAC]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_SIGNED_RG11_EAC]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_RGB8_ETC2]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA8_ETC2_EAC]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_SRGB8_ETC2]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,ee[D.INTERNAL_FORMATS.COMPRESSED_RGB_ETC1_WEBGL]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGB_ATC_WEBGL]=.5,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,ee[D.INTERNAL_FORMATS.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,ee);var ds=h(function(e,i){return ds=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},ds(e,i)},"extendStatics");function Jh(e,i){ds(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(Jh,"__extends");function fb(e,i,t,r){return new(t||(t=Promise))(function(o,n){function s(u){try{l(r.next(u))}catch(p){n(p)}}h(s,"fulfilled");function a(u){try{l(r.throw(u))}catch(p){n(p)}}h(a,"rejected");function l(u){u.done?o(u.value):new t(function(p){p(u.value)}).then(s,a)}h(l,"step"),l((r=r.apply(e,i||[])).next())})}h(fb,"__awaiter");function cb(e,i){var t={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,o,n,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(p){return l([u,p])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(n=u[0]&2?o.return:u[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,u[1])).done)return n;switch(o=0,n&&(u=[u[0]&2,n.value]),u[0]){case 0:case 1:n=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(n=t.trys,!(n=n.length>0&&n[n.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!n||u[1]>n[0]&&u[1]<n[3])){t.label=u[1];break}if(u[0]===6&&t.label<n[1]){t.label=n[1],n=u;break}if(n&&t.label<n[2]){t.label=n[2],t.ops.push(u);break}n[2]&&t.ops.pop(),t.trys.pop();continue}u=i.call(e,t)}catch(p){u=[6,p],o=0}finally{r=n=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}h(cb,"__generator");var Qh=function(e){Jh(i,e);function i(t,r){r===void 0&&(r={width:1,height:1,autoLoad:!0});var o=this,n,s;return typeof t=="string"?(n=t,s=new Uint8Array):(n=null,s=t),o=e.call(this,s,r)||this,o.origin=n,o.buffer=s?new Je.ViewableBuffer(s):null,o.origin&&r.autoLoad!==!1&&o.load(),s&&s.length&&(o.loaded=!0,o.onBlobLoaded(o.buffer.rawBinaryData)),o}return h(i,"BlobResource"),i.prototype.onBlobLoaded=function(t){},i.prototype.load=function(){return fb(this,void 0,Promise,function(){var t,r,o;return cb(this,function(n){switch(n.label){case 0:return[4,fetch(this.origin)];case 1:return t=n.sent(),[4,t.blob()];case 2:return r=n.sent(),[4,r.arrayBuffer()];case 3:return o=n.sent(),this.data=new Uint32Array(o),this.buffer=new Je.ViewableBuffer(o),this.loaded=!0,this.onBlobLoaded(o),this.update(),[2,this]}})})},i}(Je.BufferResource),Jr=function(e){Jh(i,e);function i(t,r){var o=e.call(this,t,r)||this;return o.format=r.format,o.levels=r.levels||1,o._width=r.width,o._height=r.height,o._extension=i._formatToExtension(o.format),(r.levelBuffers||o.buffer)&&(o._levelBuffers=r.levelBuffers||i._createLevelBuffers(t instanceof Uint8Array?t:o.buffer.uint8View,o.format,o.levels,4,4,o.width,o.height)),o}return h(i,"CompressedTextureResource"),i.prototype.upload=function(t,r,o){var n=t.gl,s=t.context.extensions[this._extension];if(!s)throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var a=0,l=this.levels;a<l;a++){var u=this._levelBuffers[a],p=u.levelID,f=u.levelWidth,c=u.levelHeight,d=u.levelBuffer;n.compressedTexImage2D(n.TEXTURE_2D,p,this.format,f,c,0,d)}return!0},i.prototype.onBlobLoaded=function(){this._levelBuffers=i._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},i._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},i._createLevelBuffers=function(t,r,o,n,s,a,l){for(var u=new Array(o),p=t.byteOffset,f=a,c=l,d=f+n-1&~(n-1),v=c+s-1&~(s-1),m=d*v*Si[r],y=0;y<o;y++)u[y]={levelID:y,levelWidth:o>1?f:d,levelHeight:o>1?c:v,levelBuffer:new Uint8Array(t.buffer,p,m)},p+=m,f=f>>1||1,c=c>>1||1,d=f+n-1&~(n-1),v=c+s-1&~(s-1),m=d*v*Si[r];return u},i}(Qh),db=function(){function e(){}return h(e,"CompressedTextureLoader"),e.use=function(i,t){var r=i.data,o=this;if(i.type===wi.LoaderResource.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var n=r.textures,s=void 0,a=void 0,l=0,u=n.length;l<u;l++){var p=n[l],f=p.src,c=p.format;if(c||(a=f),e.textureFormats[c]){s=f;break}}if(s=s||a,!s){t(new Error("Cannot load compressed-textures in "+i.url+", make sure you provide a fallback"));return}if(s===i.url){t(new Error("URL of compressed texture cannot be the same as the manifest's URL"));return}var d={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},v=pb.url.resolve(i.url.replace(o.baseUrl,""),s),m=r.cacheID;o.add(m,v,d,function(y){if(y.error){t(y.error);return}var g=y.texture,T=g===void 0?null:g,x=y.textures,I=x===void 0?{}:x;Object.assign(i,{texture:T,textures:I}),t()})}else t()},e.add=function(){var i=document.createElement("canvas"),t=i.getContext("webgl");if(!t){console.warn("WebGL not available for compressed textures. Silently failing.");return}var r={s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};e.textureExtensions=r,e.textureFormats={};for(var o in r){var n=r[o];!n||Object.assign(e.textureFormats,Object.getPrototypeOf(n))}},e}();function ep(e,i,t){var r={textures:{},texture:null};if(!i)return r;var o=i.map(function(n){return new Je.Texture(new Je.BaseTexture(n,Object.assign({mipmap:we.MIPMAP_MODES.OFF,alphaMode:we.ALPHA_MODES.NO_PREMULTIPLIED_ALPHA},t)))});return o.forEach(function(n,s){var a=n.baseTexture,l=e+"-"+(s+1);Je.BaseTexture.addToCache(a,l),Je.Texture.addToCache(n,l),s===0&&(Je.BaseTexture.addToCache(a,e),Je.Texture.addToCache(n,e),r.texture=n),r.textures[l]=n}),r}h(ep,"registerCompressedTextures");var Oi,Be;wi.LoaderResource.setExtensionXhrType("dds",wi.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var vs=4,Qr=124,vb=32,tp=20,mb=542327876,eo={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},yb={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},to={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Ge;(function(e){e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"})(Ge||(Ge={}));var ms;(function(e){e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"})(ms||(ms={}));var _b=1,bb=2,gb=4,Tb=64,xb=512,Eb=131072,Rb=827611204,Ib=861165636,Ab=894720068,Pb=808540228,wb=4,Sb=(Oi={},Oi[Rb]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,Oi[Ib]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,Oi[Ab]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,Oi),Ob=(Be={},Be[Ge.DXGI_FORMAT_BC1_TYPELESS]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,Be[Ge.DXGI_FORMAT_BC1_UNORM]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,Be[Ge.DXGI_FORMAT_BC2_TYPELESS]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,Be[Ge.DXGI_FORMAT_BC2_UNORM]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,Be[Ge.DXGI_FORMAT_BC3_TYPELESS]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,Be[Ge.DXGI_FORMAT_BC3_UNORM]=D.INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,Be[Ge.DXGI_FORMAT_BC1_UNORM_SRGB]=D.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,Be[Ge.DXGI_FORMAT_BC2_UNORM_SRGB]=D.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,Be[Ge.DXGI_FORMAT_BC3_UNORM_SRGB]=D.INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,Be),Cb=function(){function e(){}return h(e,"DDSLoader"),e.use=function(i,t){if(i.extension==="dds"&&i.data)try{Object.assign(i,ep(i.name||i.url,e.parse(i.data),i.metadata))}catch(r){t(r);return}t()},e.parse=function(i){var t=new Uint32Array(i),r=t[0];if(r!==mb)throw new Error("Invalid DDS file magic word");var o=new Uint32Array(i,0,Qr/Uint32Array.BYTES_PER_ELEMENT),n=o[eo.HEIGHT],s=o[eo.WIDTH],a=o[eo.MIPMAP_COUNT],l=new Uint32Array(i,eo.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,vb/Uint32Array.BYTES_PER_ELEMENT),u=l[_b];if(u&gb){var p=l[yb.FOURCC];if(p!==Pb){var f=Sb[p],c=vs+Qr,d=new Uint8Array(i,c),v=new Jr(d,{format:f,width:s,height:n,levels:a});return[v]}var m=vs+Qr,y=new Uint32Array(t.buffer,m,tp/Uint32Array.BYTES_PER_ELEMENT),g=y[to.DXGI_FORMAT],T=y[to.RESOURCE_DIMENSION],x=y[to.MISC_FLAG],I=y[to.ARRAY_SIZE],b=Ob[g];if(b===void 0)throw new Error("DDSLoader cannot parse texture data with DXGI format "+g);if(x===wb)throw new Error("DDSLoader does not support cubemap textures");if(T===ms.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var E=new Array,O=vs+Qr+tp;if(I===1)E.push(new Uint8Array(i,O));else{for(var F=Si[b],A=0,w=s,B=n,U=0;U<a;U++){var W=Math.max(1,w+3&~3),ie=Math.max(1,B+3&~3),M=W*ie*F;A+=M,w=w>>>1,B=B>>>1}for(var N=O,U=0;U<I;U++)E.push(new Uint8Array(i,N,A)),N+=A}return E.map(function(X){return new Jr(X,{format:b,width:s,height:n,levels:a})})}throw u&Tb?new Error("DDSLoader does not support uncompressed texture data."):u&xb?new Error("DDSLoader does not supported YUV uncompressed texture data."):u&Eb?new Error("DDSLoader does not support single-channel (lumninance) texture data!"):u&bb?new Error("DDSLoader does not support single-channel (alpha) texture data!"):new Error("DDSLoader failed to load a texture file due to an unknown reason!")},e}(),Vt,Rt,Ci;wi.LoaderResource.setExtensionXhrType("ktx",wi.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var ip=[171,75,84,88,32,49,49,187,13,10,26,10],Nb=67305985,ke={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Mb=64,ys=(Vt={},Vt[we.TYPES.UNSIGNED_BYTE]=1,Vt[we.TYPES.UNSIGNED_SHORT]=2,Vt[we.TYPES.FLOAT]=4,Vt[we.TYPES.HALF_FLOAT]=8,Vt),rp=(Rt={},Rt[we.FORMATS.RGBA]=4,Rt[we.FORMATS.RGB]=3,Rt[we.FORMATS.LUMINANCE]=1,Rt[we.FORMATS.LUMINANCE_ALPHA]=2,Rt[we.FORMATS.ALPHA]=1,Rt),op=(Ci={},Ci[we.TYPES.UNSIGNED_SHORT_4_4_4_4]=2,Ci[we.TYPES.UNSIGNED_SHORT_5_5_5_1]=2,Ci[we.TYPES.UNSIGNED_SHORT_5_6_5]=2,Ci),Fb=function(){function e(){}return h(e,"KTXLoader"),e.use=function(i,t){if(i.extension==="ktx"&&i.data)try{var r=i.name||i.url;Object.assign(i,ep(r,e.parse(r,i.data),i.metadata))}catch(o){t(o);return}t()},e.parse=function(i,t){var r=new DataView(t);if(!e.validate(i,r))return null;var o=r.getUint32(ke.ENDIANNESS,!0)===Nb,n=r.getUint32(ke.GL_TYPE,o),s=r.getUint32(ke.GL_FORMAT,o),a=r.getUint32(ke.GL_INTERNAL_FORMAT,o),l=r.getUint32(ke.PIXEL_WIDTH,o),u=r.getUint32(ke.PIXEL_HEIGHT,o)||1,p=r.getUint32(ke.PIXEL_DEPTH,o)||1,f=r.getUint32(ke.NUMBER_OF_ARRAY_ELEMENTS,o)||1,c=r.getUint32(ke.NUMBER_OF_FACES,o),d=r.getUint32(ke.NUMBER_OF_MIPMAP_LEVELS,o),v=r.getUint32(ke.BYTES_OF_KEY_VALUE_DATA,o);if(u===0||p!==1)throw new Error("Only 2D textures are supported");if(c!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(f!==1)throw new Error("WebGL does not support array textures");var m=4,y=4,g=l+3&~3,T=u+3&~3,x=new Array(f),I=l*u;n===0&&(I=g*T);var b;if(n!==0?ys[n]?b=ys[n]*rp[s]:b=op[n]:b=Si[a],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var E=I*b,O=E,F=l,A=u,w=g,B=T,U=Mb+v,W=0;W<d;W++){for(var ie=r.getUint32(U,o),M=U+4,N=0;N<f;N++){var X=x[N];X||(X=x[N]=new Array(d)),X[W]={levelID:W,levelWidth:d>1?F:w,levelHeight:d>1?A:B,levelBuffer:new Uint8Array(t,M,O)},M+=O}U+=ie+4,U=U%4!=0?U+4-U%4:U,F=F>>1||1,A=A>>1||1,w=F+m-1&~(m-1),B=A+y-1&~(y-1),O=w*B*b}if(n!==0)throw new Error("TODO: Uncompressed");return x.map(function(C){return new Jr(null,{format:a,width:l,height:u,levels:d,levelBuffers:C})})},e.validate=function(i,t){for(var r=0;r<ip.length;r++)if(t.getUint8(r)!==ip[r])return console.error(i+" is not a valid *.ktx file!"),!1;return!0},e}();D.BlobResource=Qh;D.CompressedTextureLoader=db;D.CompressedTextureResource=Jr;D.DDSLoader=Cb;D.FORMATS_TO_COMPONENTS=rp;D.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=Si;D.KTXLoader=Fb;D.TYPES_TO_BYTES_PER_COMPONENT=ys;D.TYPES_TO_BYTES_PER_PIXEL=op});var lp=R(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});var It=Le(),Ub=Ae(),Ni=ge(),At=ae(),Lb=_e();var _s=h(function(e,i){return _s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},_s(e,i)},"extendStatics");function sp(e,i){_s(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(sp,"__extends");var Db=function(e){sp(i,e);function i(t,r,o,n){t===void 0&&(t=1500),o===void 0&&(o=16384),n===void 0&&(n=!1);var s=e.call(this)||this,a=16384;return o>a&&(o=a),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=o,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=It.BLEND_MODES.NORMAL,s.autoResize=n,s.roundPixels=!0,s.baseTexture=null,s.setProperties(r),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return h(i,"ParticleContainer"),i.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},i.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,Ni.hex2rgb(t,this.tintRgb)},enumerable:!1,configurable:!0}),i.prototype.render=function(t){var r=this;!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",function(){return r.onChildrenChange(0)})),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},i.prototype.onChildrenChange=function(t){for(var r=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<r;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[r]=++this._updateID},i.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},i}(Ub.Container),ap=function(){function e(i,t,r){this.geometry=new At.Geometry,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<i.length;++o){var n=i[o];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||It.TYPES.FLOAT,offset:n.offset},t[o]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return h(e,"ParticleBuffer"),e.prototype.initBuffers=function(){var i=this.geometry,t=0;this.indexBuffer=new At.Buffer(Ni.createIndicesForQuads(this.size),!0,!0),i.addIndex(this.indexBuffer),this.dynamicStride=0;for(var r=0;r<this.dynamicProperties.length;++r){var o=this.dynamicProperties[r];o.offset=t,t+=o.size,this.dynamicStride+=o.size}var n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new At.Buffer(this.dynamicData,!1,!1);var s=0;this.staticStride=0;for(var r=0;r<this.staticProperties.length;++r){var o=this.staticProperties[r];o.offset=s,s+=o.size,this.staticStride+=o.size}var a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new At.Buffer(this.staticData,!0,!1);for(var r=0;r<this.dynamicProperties.length;++r){var o=this.dynamicProperties[r];i.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===It.TYPES.UNSIGNED_BYTE,o.type,this.dynamicStride*4,o.offset*4)}for(var r=0;r<this.staticProperties.length;++r){var o=this.staticProperties[r];i.addAttribute(o.attributeName,this.staticBuffer,0,o.type===It.TYPES.UNSIGNED_BYTE,o.type,this.staticStride*4,o.offset*4)}},e.prototype.uploadDynamic=function(i,t,r){for(var o=0;o<this.dynamicProperties.length;o++){var n=this.dynamicProperties[o];n.uploadFunction(i,t,r,n.type===It.TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},e.prototype.uploadStatic=function(i,t,r){for(var o=0;o<this.staticProperties.length;o++){var n=this.staticProperties[o];n.uploadFunction(i,t,r,n.type===It.TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},e.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},e}(),Bb=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,Gb=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`,kb=function(e){sp(i,e);function i(t){var r=e.call(this,t)||this;return r.shader=null,r.properties=null,r.tempMatrix=new Lb.Matrix,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:It.TYPES.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=At.Shader.from(Gb,Bb,{}),r.state=At.State.for2d(),r}return h(i,"ParticleRenderer"),i.prototype.render=function(t){var r=t.children,o=t._maxSize,n=t._batchSize,s=this.renderer,a=r.length;if(a!==0){a>o&&!t.autoResize&&(a=o);var l=t._buffers;l||(l=t._buffers=this.generateBuffers(t));var u=r[0]._texture.baseTexture;this.state.blendMode=Ni.correctBlendMode(t.blendMode,u.alphaMode),s.state.set(this.state);var p=s.gl,f=t.worldTransform.copyTo(this.tempMatrix);f.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=f.toArray(!0),this.shader.uniforms.uColor=Ni.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,u.alphaMode),this.shader.uniforms.uSampler=u,this.renderer.shader.bind(this.shader);for(var c=!1,d=0,v=0;d<a;d+=n,v+=1){var m=a-d;m>n&&(m=n),v>=l.length&&l.push(this._generateOneMoreBuffer(t));var y=l[v];y.uploadDynamic(r,d,m);var g=t._bufferUpdateIDs[v]||0;c=c||y._updateID<g,c&&(y._updateID=t._updateID,y.uploadStatic(r,d,m)),s.geometry.bind(y.geometry),p.drawElements(p.TRIANGLES,m*6,p.UNSIGNED_SHORT,0)}}},i.prototype.generateBuffers=function(t){for(var r=[],o=t._maxSize,n=t._batchSize,s=t._properties,a=0;a<o;a+=n)r.push(new ap(this.properties,s,n));return r},i.prototype._generateOneMoreBuffer=function(t){var r=t._batchSize,o=t._properties;return new ap(this.properties,o,r)},i.prototype.uploadVertices=function(t,r,o,n,s,a){for(var l=0,u=0,p=0,f=0,c=0;c<o;++c){var d=t[r+c],v=d._texture,m=d.scale.x,y=d.scale.y,g=v.trim,T=v.orig;g?(u=g.x-d.anchor.x*T.width,l=u+g.width,f=g.y-d.anchor.y*T.height,p=f+g.height):(l=T.width*(1-d.anchor.x),u=T.width*-d.anchor.x,p=T.height*(1-d.anchor.y),f=T.height*-d.anchor.y),n[a]=u*m,n[a+1]=f*y,n[a+s]=l*m,n[a+s+1]=f*y,n[a+s*2]=l*m,n[a+s*2+1]=p*y,n[a+s*3]=u*m,n[a+s*3+1]=p*y,a+=s*4}},i.prototype.uploadPosition=function(t,r,o,n,s,a){for(var l=0;l<o;l++){var u=t[r+l].position;n[a]=u.x,n[a+1]=u.y,n[a+s]=u.x,n[a+s+1]=u.y,n[a+s*2]=u.x,n[a+s*2+1]=u.y,n[a+s*3]=u.x,n[a+s*3+1]=u.y,a+=s*4}},i.prototype.uploadRotation=function(t,r,o,n,s,a){for(var l=0;l<o;l++){var u=t[r+l].rotation;n[a]=u,n[a+s]=u,n[a+s*2]=u,n[a+s*3]=u,a+=s*4}},i.prototype.uploadUvs=function(t,r,o,n,s,a){for(var l=0;l<o;++l){var u=t[r+l]._texture._uvs;u?(n[a]=u.x0,n[a+1]=u.y0,n[a+s]=u.x1,n[a+s+1]=u.y1,n[a+s*2]=u.x2,n[a+s*2+1]=u.y2,n[a+s*3]=u.x3,n[a+s*3+1]=u.y3,a+=s*4):(n[a]=0,n[a+1]=0,n[a+s]=0,n[a+s+1]=0,n[a+s*2]=0,n[a+s*2+1]=0,n[a+s*3]=0,n[a+s*3+1]=0,a+=s*4)}},i.prototype.uploadTint=function(t,r,o,n,s,a){for(var l=0;l<o;++l){var u=t[r+l],p=u._texture.baseTexture.alphaMode>0,f=u.alpha,c=f<1&&p?Ni.premultiplyTint(u._tintRGB,f):u._tintRGB+(f*255<<24);n[a]=c,n[a+s]=c,n[a+s*2]=c,n[a+s*3]=c,a+=s*4}},i.prototype.destroy=function(){e.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},i}(At.ObjectRenderer);io.ParticleContainer=Db;io.ParticleRenderer=kb});var Os=R(le=>{"use strict";Object.defineProperty(le,"__esModule",{value:!0});var Ie=ae(),z=_e(),Mi=ge(),Pt=Le(),bs=Ae();(function(e){e.MITER="miter",e.BEVEL="bevel",e.ROUND="round"})(le.LINE_JOIN||(le.LINE_JOIN={}));(function(e){e.BUTT="butt",e.ROUND="round",e.SQUARE="square"})(le.LINE_CAP||(le.LINE_CAP={}));var qt={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e,i){if(i===void 0&&(i=20),!this.adaptive||!e||isNaN(e))return i;var t=Math.ceil(e/this.maxLength);return t<this.minSegments?t=this.minSegments:t>this.maxSegments&&(t=this.maxSegments),t}},gs=function(){function e(){this.color=16777215,this.alpha=1,this.texture=Ie.Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}return h(e,"FillStyle"),e.prototype.clone=function(){var i=new e;return i.color=this.color,i.alpha=this.alpha,i.texture=this.texture,i.matrix=this.matrix,i.visible=this.visible,i},e.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=Ie.Texture.WHITE,this.matrix=null,this.visible=!1},e.prototype.destroy=function(){this.texture=null,this.matrix=null},e}();var Ts=h(function(e,i){return Ts=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Ts(e,i)},"extendStatics");function xs(e,i){Ts(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(xs,"__extends");var Es={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,i){var t=e.points,r=e.holes,o=i.points,n=i.indices;if(t.length>=6){for(var s=[],a=0;a<r.length;a++){var l=r[a];s.push(t.length/2),t=t.concat(l.points)}var u=Mi.earcut(t,s,2);if(!u)return;for(var p=o.length/2,a=0;a<u.length;a+=3)n.push(u[a]+p),n.push(u[a+1]+p),n.push(u[a+2]+p);for(var a=0;a<t.length;a++)o.push(t[a])}}},Rs={build:function(e){var i=e.shape,t=e.points,r=i.x,o=i.y,n,s;if(t.length=0,e.type===z.SHAPES.CIRC)n=i.radius,s=i.radius;else{var a=e.shape;n=a.width,s=a.height}if(!(n===0||s===0)){var l=Math.floor(30*Math.sqrt(i.radius))||Math.floor(15*Math.sqrt(n+s));l/=2.3;for(var u=Math.PI*2/l,p=0;p<l-.5;p++)t.push(r+Math.sin(-u*p)*n,o+Math.cos(-u*p)*s);t.push(t[0],t[1])}},triangulate:function(e,i){var t=e.points,r=i.points,o=i.indices,n=r.length/2,s=n,a=e.shape,l=e.matrix,u=a.x,p=a.y;r.push(e.matrix?l.a*u+l.c*p+l.tx:u,e.matrix?l.b*u+l.d*p+l.ty:p);for(var f=0;f<t.length;f+=2)r.push(t[f],t[f+1]),o.push(n++,s,n)}},up={build:function(e){var i=e.shape,t=i.x,r=i.y,o=i.width,n=i.height,s=e.points;s.length=0,s.push(t,r,t+o,r,t+o,r+n,t,r+n)},triangulate:function(e,i){var t=e.points,r=i.points,o=r.length/2;r.push(t[0],t[1],t[2],t[3],t[6],t[7],t[4],t[5]),i.indices.push(o,o+1,o+2,o+1,o+2,o+3)}};function Yt(e,i,t){var r=i-e;return e+r*t}h(Yt,"getPt");function ro(e,i,t,r,o,n,s){s===void 0&&(s=[]);for(var a=20,l=s,u=0,p=0,f=0,c=0,d=0,v=0,m=0,y=0;m<=a;++m)y=m/a,u=Yt(e,t,y),p=Yt(i,r,y),f=Yt(t,o,y),c=Yt(r,n,y),d=Yt(u,f,y),v=Yt(p,c,y),!(m===0&&l[l.length-2]===d&&l[l.length-1]===v)&&l.push(d,v);return l}h(ro,"quadraticBezierCurve");var hp={build:function(e){var i=e.shape,t=e.points,r=i.x,o=i.y,n=i.width,s=i.height,a=Math.max(0,Math.min(i.radius,Math.min(n,s)/2));t.length=0,a?(ro(r,o+a,r,o,r+a,o,t),ro(r+n-a,o,r+n,o,r+n,o+a,t),ro(r+n,o+s-a,r+n,o+s,r+n-a,o+s,t),ro(r+a,o+s,r,o+s,r,o+s-a,t)):t.push(r,o,r+n,o,r+n,o+s,r,o+s)},triangulate:function(e,i){for(var t=e.points,r=i.points,o=i.indices,n=r.length/2,s=Mi.earcut(t,null,2),a=0,l=s.length;a<l;a+=3)o.push(s[a]+n),o.push(s[a+1]+n),o.push(s[a+2]+n);for(var a=0,l=t.length;a<l;a++)r.push(t[a],t[++a])}};function pp(e,i,t,r,o,n,s,a){var l=e-t*o,u=i-r*o,p=e+t*n,f=i+r*n,c,d;s?(c=r,d=-t):(c=-r,d=t);var v=l+c,m=u+d,y=p+c,g=f+d;return a.push(v,m),a.push(y,g),2}h(pp,"square");function Wt(e,i,t,r,o,n,s,a){var l=t-e,u=r-i,p=Math.atan2(l,u),f=Math.atan2(o-e,n-i);a&&p<f?p+=Math.PI*2:!a&&p>f&&(f+=Math.PI*2);var c=p,d=f-p,v=Math.abs(d),m=Math.sqrt(l*l+u*u),y=(15*v*Math.sqrt(m)/Math.PI>>0)+1,g=d/y;if(c+=g,a){s.push(e,i),s.push(t,r);for(var T=1,x=c;T<y;T++,x+=g)s.push(e,i),s.push(e+Math.sin(x)*m,i+Math.cos(x)*m);s.push(e,i),s.push(o,n)}else{s.push(t,r),s.push(e,i);for(var T=1,x=c;T<y;T++,x+=g)s.push(e+Math.sin(x)*m,i+Math.cos(x)*m),s.push(e,i);s.push(o,n),s.push(e,i)}return y*2}h(Wt,"round");function Hb(e,i){var t=e.shape,r=e.points||t.points.slice(),o=i.closePointEps;if(r.length!==0){var n=e.lineStyle,s=new z.Point(r[0],r[1]),a=new z.Point(r[r.length-2],r[r.length-1]),l=t.type!==z.SHAPES.POLY||t.closeStroke,u=Math.abs(s.x-a.x)<o&&Math.abs(s.y-a.y)<o;if(l){r=r.slice(),u&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));var p=(s.x+a.x)*.5,f=(a.y+s.y)*.5;r.unshift(p,f),r.push(p,f)}var c=i.points,d=r.length/2,v=r.length,m=c.length/2,y=n.width/2,g=y*y,T=n.miterLimit*n.miterLimit,x=r[0],I=r[1],b=r[2],E=r[3],O=0,F=0,A=-(I-E),w=x-b,B=0,U=0,W=Math.sqrt(A*A+w*w);A/=W,w/=W,A*=y,w*=y;var ie=n.alignment,M=(1-ie)*2,N=ie*2;l||(n.cap===le.LINE_CAP.ROUND?v+=Wt(x-A*(M-N)*.5,I-w*(M-N)*.5,x-A*M,I-w*M,x+A*N,I+w*N,c,!0)+2:n.cap===le.LINE_CAP.SQUARE&&(v+=pp(x,I,A,w,M,N,!0,c))),c.push(x-A*M,I-w*M),c.push(x+A*N,I+w*N);for(var X=1;X<d-1;++X){x=r[(X-1)*2],I=r[(X-1)*2+1],b=r[X*2],E=r[X*2+1],O=r[(X+1)*2],F=r[(X+1)*2+1],A=-(I-E),w=x-b,W=Math.sqrt(A*A+w*w),A/=W,w/=W,A*=y,w*=y,B=-(E-F),U=b-O,W=Math.sqrt(B*B+U*U),B/=W,U/=W,B*=y,U*=y;var C=b-x,P=I-E,V=b-O,K=F-E,Q=P*V-K*C,ne=Q<0;if(Math.abs(Q)<.1){c.push(b-A*M,E-w*M),c.push(b+A*N,E+w*N);continue}var re=(-A+x)*(-w+E)-(-A+b)*(-w+I),me=(-B+O)*(-U+E)-(-B+b)*(-U+F),de=(C*me-V*re)/Q,ve=(K*re-P*me)/Q,be=(de-b)*(de-b)+(ve-E)*(ve-E),$=b+(de-b)*M,se=E+(ve-E)*M,k=b-(de-b)*N,ce=E-(ve-E)*N,ye=Math.min(C*C+P*P,V*V+K*K),Y=ne?M:N,je=ye+Y*Y*g,Ct=be<=je;Ct?n.join===le.LINE_JOIN.BEVEL||be/g>T?(ne?(c.push($,se),c.push(b+A*N,E+w*N),c.push($,se),c.push(b+B*N,E+U*N)):(c.push(b-A*M,E-w*M),c.push(k,ce),c.push(b-B*M,E-U*M),c.push(k,ce)),v+=2):n.join===le.LINE_JOIN.ROUND?ne?(c.push($,se),c.push(b+A*N,E+w*N),v+=Wt(b,E,b+A*N,E+w*N,b+B*N,E+U*N,c,!0)+4,c.push($,se),c.push(b+B*N,E+U*N)):(c.push(b-A*M,E-w*M),c.push(k,ce),v+=Wt(b,E,b-A*M,E-w*M,b-B*M,E-U*M,c,!1)+4,c.push(b-B*M,E-U*M),c.push(k,ce)):(c.push($,se),c.push(k,ce)):(c.push(b-A*M,E-w*M),c.push(b+A*N,E+w*N),n.join===le.LINE_JOIN.BEVEL||be/g>T||(n.join===le.LINE_JOIN.ROUND?ne?v+=Wt(b,E,b+A*N,E+w*N,b+B*N,E+U*N,c,!0)+2:v+=Wt(b,E,b-A*M,E-w*M,b-B*M,E-U*M,c,!1)+2:(ne?(c.push(k,ce),c.push(k,ce)):(c.push($,se),c.push($,se)),v+=2)),c.push(b-B*M,E-U*M),c.push(b+B*N,E+U*N),v+=2)}x=r[(d-2)*2],I=r[(d-2)*2+1],b=r[(d-1)*2],E=r[(d-1)*2+1],A=-(I-E),w=x-b,W=Math.sqrt(A*A+w*w),A/=W,w/=W,A*=y,w*=y,c.push(b-A*M,E-w*M),c.push(b+A*N,E+w*N),l||(n.cap===le.LINE_CAP.ROUND?v+=Wt(b-A*(M-N)*.5,E-w*(M-N)*.5,b-A*M,E-w*M,b+A*N,E+w*N,c,!1)+2:n.cap===le.LINE_CAP.SQUARE&&(v+=pp(b,E,A,w,M,N,!1,c)));for(var Nt=i.indices,cr=qt.epsilon*qt.epsilon,X=m;X<v+m-2;++X)x=c[X*2],I=c[X*2+1],b=c[(X+1)*2],E=c[(X+1)*2+1],O=c[(X+2)*2],F=c[(X+2)*2+1],!(Math.abs(x*(E-F)+b*(F-I)+O*(I-E))<cr)&&Nt.push(X,X+1,X+2)}}h(Hb,"buildNonNativeLine");function Xb(e,i){var t=0,r=e.shape,o=e.points||r.points,n=r.type!==z.SHAPES.POLY||r.closeStroke;if(o.length!==0){var s=i.points,a=i.indices,l=o.length/2,u=s.length/2,p=u;for(s.push(o[0],o[1]),t=1;t<l;t++)s.push(o[t*2],o[t*2+1]),a.push(p,p+1),p++;n&&a.push(p,u)}}h(Xb,"buildNativeLine");function Is(e,i){e.lineStyle.native?Xb(e,i):Hb(e,i)}h(Is,"buildLine");var As=function(){function e(){}return h(e,"ArcUtils"),e.curveTo=function(i,t,r,o,n,s){var a=s[s.length-2],l=s[s.length-1],u=l-t,p=a-i,f=o-t,c=r-i,d=Math.abs(u*c-p*f);if(d<1e-8||n===0)return(s[s.length-2]!==i||s[s.length-1]!==t)&&s.push(i,t),null;var v=u*u+p*p,m=f*f+c*c,y=u*f+p*c,g=n*Math.sqrt(v)/d,T=n*Math.sqrt(m)/d,x=g*y/v,I=T*y/m,b=g*c+T*p,E=g*f+T*u,O=p*(T+x),F=u*(T+x),A=c*(g+I),w=f*(g+I),B=Math.atan2(F-E,O-b),U=Math.atan2(w-E,A-b);return{cx:b+i,cy:E+t,radius:n,startAngle:B,endAngle:U,anticlockwise:p*f>c*u}},e.arc=function(i,t,r,o,n,s,a,l,u){for(var p=a-s,f=qt._segmentsCount(Math.abs(p)*n,Math.ceil(Math.abs(p)/z.PI_2)*40),c=p/(f*2),d=c*2,v=Math.cos(c),m=Math.sin(c),y=f-1,g=y%1/y,T=0;T<=y;++T){var x=T+g*T,I=c+s+d*x,b=Math.cos(I),E=-Math.sin(I);u.push((v*b+m*E)*n+r,(v*-E+m*b)*n+o)}},e}(),fp=function(){function e(){}return h(e,"BezierUtils"),e.curveLength=function(i,t,r,o,n,s,a,l){for(var u=10,p=0,f=0,c=0,d=0,v=0,m=0,y=0,g=0,T=0,x=0,I=0,b=i,E=t,O=1;O<=u;++O)f=O/u,c=f*f,d=c*f,v=1-f,m=v*v,y=m*v,g=y*i+3*m*f*r+3*v*c*n+d*a,T=y*t+3*m*f*o+3*v*c*s+d*l,x=b-g,I=E-T,b=g,E=T,p+=Math.sqrt(x*x+I*I);return p},e.curveTo=function(i,t,r,o,n,s,a){var l=a[a.length-2],u=a[a.length-1];a.length-=2;var p=qt._segmentsCount(e.curveLength(l,u,i,t,r,o,n,s)),f=0,c=0,d=0,v=0,m=0;a.push(l,u);for(var y=1,g=0;y<=p;++y)g=y/p,f=1-g,c=f*f,d=c*f,v=g*g,m=v*g,a.push(d*l+3*c*g*i+3*f*v*r+m*n,d*u+3*c*g*t+3*f*v*o+m*s)},e}(),cp=function(){function e(){}return h(e,"QuadraticUtils"),e.curveLength=function(i,t,r,o,n,s){var a=i-2*r+n,l=t-2*o+s,u=2*r-2*i,p=2*o-2*t,f=4*(a*a+l*l),c=4*(a*u+l*p),d=u*u+p*p,v=2*Math.sqrt(f+c+d),m=Math.sqrt(f),y=2*f*m,g=2*Math.sqrt(d),T=c/m;return(y*v+m*c*(v-g)+(4*d*f-c*c)*Math.log((2*m+T+v)/(T+g)))/(4*y)},e.curveTo=function(i,t,r,o,n){for(var s=n[n.length-2],a=n[n.length-1],l=qt._segmentsCount(e.curveLength(s,a,i,t,r,o)),u=0,p=0,f=1;f<=l;++f){var c=f/l;u=s+(i-s)*c,p=a+(t-a)*c,n.push(u+(i+(r-i)*c-u)*c,p+(t+(o-t)*c-p)*c)}},e}(),dp=function(){function e(){this.reset()}return h(e,"BatchPart"),e.prototype.begin=function(i,t,r){this.reset(),this.style=i,this.start=t,this.attribStart=r},e.prototype.end=function(i,t){this.attribSize=t-this.attribStart,this.size=i-this.start},e.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},e}(),wt,oo=(wt={},wt[z.SHAPES.POLY]=Es,wt[z.SHAPES.CIRC]=Rs,wt[z.SHAPES.ELIP]=Rs,wt[z.SHAPES.RECT]=up,wt[z.SHAPES.RREC]=hp,wt),Ps=[],Fi=[];function jb(e){for(var i=e.points,t=0,r=0;r<i.length-2;r+=2)t+=(i[r+2]-i[r])*(i[r+3]+i[r+1]);return t>0}h(jb,"isPolygonClockwise");var ws=function(){function e(i,t,r,o){t===void 0&&(t=null),r===void 0&&(r=null),o===void 0&&(o=null),this.points=[],this.holes=[],this.shape=i,this.lineStyle=r,this.fillStyle=t,this.matrix=o,this.type=i.type}return h(e,"GraphicsData"),e.prototype.clone=function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)},e.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},e}(),zt=new z.Point,Vb=new bs.Bounds,vp=function(e){xs(i,e);function i(){var t=e.call(this)||this;return t.closePointEps=1e-4,t.boundsPadding=0,t.uvsFloat32=null,t.indicesUint16=null,t.batchable=!1,t.points=[],t.colors=[],t.uvs=[],t.indices=[],t.textureIds=[],t.graphicsData=[],t.drawCalls=[],t.batchDirty=-1,t.batches=[],t.dirty=0,t.cacheDirty=-1,t.clearDirty=0,t.shapeIndex=0,t._bounds=new bs.Bounds,t.boundsDirty=-1,t}return h(i,"GraphicsGeometry"),Object.defineProperty(i.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),i.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Fi.push(this.drawCalls[t]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var r=this.batches[t];r.reset(),Ps.push(r)}this.batches.length=0},i.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},i.prototype.drawShape=function(t,r,o,n){r===void 0&&(r=null),o===void 0&&(o=null),n===void 0&&(n=null);var s=new ws(t,r,o,n);return this.graphicsData.push(s),this.dirty++,this},i.prototype.drawHole=function(t,r){if(r===void 0&&(r=null),!this.graphicsData.length)return null;var o=new ws(t,null,null,r),n=this.graphicsData[this.graphicsData.length-1];return o.lineStyle=n.lineStyle,n.holes.push(o),this.dirty++,this},i.prototype.destroy=function(){e.prototype.destroy.call(this);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},i.prototype.containsPoint=function(t){for(var r=this.graphicsData,o=0;o<r.length;++o){var n=r[o];if(!!n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,zt):zt.copyFrom(t),n.shape.contains(zt.x,zt.y))){var s=!1;if(n.holes)for(var a=0;a<n.holes.length;a++){var l=n.holes[a];if(l.shape.contains(zt.x,zt.y)){s=!0;break}}if(!s)return!0}}return!1},i.prototype.updateBatches=function(t){if(!this.graphicsData.length){this.batchable=!0;return}if(!!this.validateBatching()){this.cacheDirty=this.dirty;var r=this.uvs,o=this.graphicsData,n=null,s=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],s=n.style);for(var a=this.shapeIndex;a<o.length;a++){this.shapeIndex++;var l=o[a],u=l.fillStyle,p=l.lineStyle,f=oo[l.type];f.build(l),l.matrix&&this.transformPoints(l.points,l.matrix);for(var c=0;c<2;c++){var d=c===0?u:p;if(!!d.visible){var v=d.texture.baseTexture,m=this.indices.length,y=this.points.length/2;v.wrapMode=Pt.WRAP_MODES.REPEAT,c===0?this.processFill(l):this.processLine(l);var g=this.points.length/2-y;g!==0&&(n&&!this._compareStyles(s,d)&&(n.end(m,y),n=null),n||(n=Ps.pop()||new dp,n.begin(d,m,y),this.batches.push(n),s=d),this.addUvs(this.points,r,d.texture,y,g,d.matrix))}}}var T=this.indices.length,x=this.points.length/2;if(n&&n.end(T,x),this.batches.length===0){this.batchable=!0;return}if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var I=x>65535&&t;this.indicesUint16=I?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}},i.prototype._compareStyles=function(t,r){return!(!t||!r||t.texture.baseTexture!==r.texture.baseTexture||t.color+t.alpha!==r.color+r.alpha||!!t.native!=!!r.native)},i.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,r=this.graphicsData.length;t<r;t++){var o=this.graphicsData[t],n=o.fillStyle,s=o.lineStyle;if(n&&!n.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0},i.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,r=0,o=t.length;r<o;r++)for(var n=t[r],s=0;s<n.size;s++){var a=n.start+s;this.indicesUint16[a]=this.indicesUint16[a]-n.attribStart}},i.prototype.isBatchable=function(){if(this.points.length>65535*2)return!1;for(var t=this.batches,r=0;r<t.length;r++)if(t[r].style.native)return!1;return this.points.length<i.BATCHABLE_SIZE*2},i.prototype.buildDrawCalls=function(){for(var t=++Ie.BaseTexture._globalBatch,r=0;r<this.drawCalls.length;r++)this.drawCalls[r].texArray.clear(),Fi.push(this.drawCalls[r]);this.drawCalls.length=0;var o=this.colors,n=this.textureIds,s=Fi.pop();s||(s=new Ie.BatchDrawCall,s.texArray=new Ie.BatchTextureArray),s.texArray.count=0,s.start=0,s.size=0,s.type=Pt.DRAW_MODES.TRIANGLES;var a=0,l=null,u=0,p=!1,f=Pt.DRAW_MODES.TRIANGLES,c=0;this.drawCalls.push(s);for(var r=0;r<this.batches.length;r++){var d=this.batches[r],v=8,m=d.style,y=m.texture.baseTexture;p!==!!m.native&&(p=!!m.native,f=p?Pt.DRAW_MODES.LINES:Pt.DRAW_MODES.TRIANGLES,l=null,a=v,t++),l!==y&&(l=y,y._batchEnabled!==t&&(a===v&&(t++,a=0,s.size>0&&(s=Fi.pop(),s||(s=new Ie.BatchDrawCall,s.texArray=new Ie.BatchTextureArray),this.drawCalls.push(s)),s.start=c,s.size=0,s.texArray.count=0,s.type=f),y.touched=1,y._batchEnabled=t,y._batchLocation=a,y.wrapMode=Pt.WRAP_MODES.REPEAT,s.texArray.elements[s.texArray.count++]=y,a++)),s.size+=d.size,c+=d.size,u=y._batchLocation,this.addColors(o,m.color,m.alpha,d.attribSize,d.attribStart),this.addTextureIds(n,u,d.attribSize,d.attribStart)}Ie.BaseTexture._globalBatch=t,this.packAttributes()},i.prototype.packAttributes=function(){for(var t=this.points,r=this.uvs,o=this.colors,n=this.textureIds,s=new ArrayBuffer(t.length*3*4),a=new Float32Array(s),l=new Uint32Array(s),u=0,p=0;p<t.length/2;p++)a[u++]=t[p*2],a[u++]=t[p*2+1],a[u++]=r[p*2],a[u++]=r[p*2+1],l[u++]=o[p],a[u++]=n[p];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)},i.prototype.processFill=function(t){if(t.holes.length)this.processHoles(t.holes),Es.triangulate(t,this);else{var r=oo[t.type];r.triangulate(t,this)}},i.prototype.processLine=function(t){Is(t,this);for(var r=0;r<t.holes.length;r++)Is(t.holes[r],this)},i.prototype.processHoles=function(t){for(var r=0;r<t.length;r++){var o=t[r],n=oo[o.type];n.build(o),o.matrix&&this.transformPoints(o.points,o.matrix)}},i.prototype.calculateBounds=function(){var t=this._bounds,r=Vb,o=z.Matrix.IDENTITY;this._bounds.clear(),r.clear();for(var n=0;n<this.graphicsData.length;n++){var s=this.graphicsData[n],a=s.shape,l=s.type,u=s.lineStyle,p=s.matrix||z.Matrix.IDENTITY,f=0;if(u&&u.visible){var c=u.alignment;f=u.width,l===z.SHAPES.POLY?jb(a)?f=f*(1-c):f=f*c:f=f*Math.max(0,c)}if(o!==p&&(r.isEmpty()||(t.addBoundsMatrix(r,o),r.clear()),o=p),l===z.SHAPES.RECT||l===z.SHAPES.RREC){var d=a;r.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,f,f)}else if(l===z.SHAPES.CIRC){var v=a;r.addFramePad(v.x,v.y,v.x,v.y,v.radius+f,v.radius+f)}else if(l===z.SHAPES.ELIP){var m=a;r.addFramePad(m.x,m.y,m.x,m.y,m.width+f,m.height+f)}else{var y=a;t.addVerticesMatrix(o,y.points,0,y.points.length,f,f)}}r.isEmpty()||t.addBoundsMatrix(r,o),t.pad(this.boundsPadding,this.boundsPadding)},i.prototype.transformPoints=function(t,r){for(var o=0;o<t.length/2;o++){var n=t[o*2],s=t[o*2+1];t[o*2]=r.a*n+r.c*s+r.tx,t[o*2+1]=r.b*n+r.d*s+r.ty}},i.prototype.addColors=function(t,r,o,n,s){s===void 0&&(s=0);var a=(r>>16)+(r&65280)+((r&255)<<16),l=Mi.premultiplyTint(a,o);t.length=Math.max(t.length,s+n);for(var u=0;u<n;u++)t[s+u]=l},i.prototype.addTextureIds=function(t,r,o,n){n===void 0&&(n=0),t.length=Math.max(t.length,n+o);for(var s=0;s<o;s++)t[n+s]=r},i.prototype.addUvs=function(t,r,o,n,s,a){a===void 0&&(a=null);for(var l=0,u=r.length,p=o.frame;l<s;){var f=t[(n+l)*2],c=t[(n+l)*2+1];if(a){var d=a.a*f+a.c*c+a.tx;c=a.b*f+a.d*c+a.ty,f=d}l++,r.push(f/p.width,c/p.height)}var v=o.baseTexture;(p.width<v.width||p.height<v.height)&&this.adjustUvs(r,o,u,s)},i.prototype.adjustUvs=function(t,r,o,n){for(var s=r.baseTexture,a=1e-6,l=o+n*2,u=r.frame,p=u.width/s.width,f=u.height/s.height,c=u.x/u.width,d=u.y/u.height,v=Math.floor(t[o]+a),m=Math.floor(t[o+1]+a),y=o+2;y<l;y+=2)v=Math.min(v,Math.floor(t[y]+a)),m=Math.min(m,Math.floor(t[y+1]+a));c-=v,d-=m;for(var y=o;y<l;y+=2)t[y]=(t[y]+c)*p,t[y+1]=(t[y+1]+d)*f},i.BATCHABLE_SIZE=100,i}(Ie.BatchGeometry),mp=function(e){xs(i,e);function i(){var t=e!==null&&e.apply(this,arguments)||this;return t.width=0,t.alignment=.5,t.native=!1,t.cap=le.LINE_CAP.BUTT,t.join=le.LINE_JOIN.MITER,t.miterLimit=10,t}return h(i,"LineStyle"),i.prototype.clone=function(){var t=new i;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},i.prototype.reset=function(){e.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},i}(gs),qb=new Float32Array(3),Ss={},Yb=function(e){xs(i,e);function i(t){t===void 0&&(t=null);var r=e.call(this)||this;return r.shader=null,r.pluginName="batch",r.currentPath=null,r.batches=[],r.batchTint=-1,r.batchDirty=-1,r.vertexData=null,r._fillStyle=new gs,r._lineStyle=new mp,r._matrix=null,r._holeMode=!1,r.state=Ie.State.for2d(),r._geometry=t||new vp,r._geometry.refCount++,r._transformID=-1,r.tint=16777215,r.blendMode=Pt.BLEND_MODES.NORMAL,r}return h(i,"Graphics"),Object.defineProperty(i.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),i.prototype.clone=function(){return this.finishPoly(),new i(this._geometry)},Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),i.prototype.lineStyle=function(t,r,o,n,s){return t===void 0&&(t=null),r===void 0&&(r=0),o===void 0&&(o=1),n===void 0&&(n=.5),s===void 0&&(s=!1),typeof t=="number"&&(t={width:t,color:r,alpha:o,alignment:n,native:s}),this.lineTextureStyle(t)},i.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:Ie.Texture.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:le.LINE_CAP.BUTT,join:le.LINE_JOIN.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this},i.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,r=this.currentPath.points.length;r>2&&(this.drawShape(this.currentPath),this.currentPath=new z.Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[r-2],t[r-1]))}else this.currentPath=new z.Polygon,this.currentPath.closeStroke=!1},i.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},i.prototype.moveTo=function(t,r){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=r,this},i.prototype.lineTo=function(t,r){this.currentPath||this.moveTo(0,0);var o=this.currentPath.points,n=o[o.length-2],s=o[o.length-1];return(n!==t||s!==r)&&o.push(t,r),this},i.prototype._initCurve=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0),this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,r]):this.moveTo(t,r)},i.prototype.quadraticCurveTo=function(t,r,o,n){this._initCurve();var s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),cp.curveTo(t,r,o,n,s),this},i.prototype.bezierCurveTo=function(t,r,o,n,s,a){return this._initCurve(),fp.curveTo(t,r,o,n,s,a,this.currentPath.points),this},i.prototype.arcTo=function(t,r,o,n,s){this._initCurve(t,r);var a=this.currentPath.points,l=As.curveTo(t,r,o,n,s,a);if(l){var u=l.cx,p=l.cy,f=l.radius,c=l.startAngle,d=l.endAngle,v=l.anticlockwise;this.arc(u,p,f,c,d,v)}return this},i.prototype.arc=function(t,r,o,n,s,a){if(a===void 0&&(a=!1),n===s)return this;!a&&s<=n?s+=z.PI_2:a&&n<=s&&(n+=z.PI_2);var l=s-n;if(l===0)return this;var u=t+Math.cos(n)*o,p=r+Math.sin(n)*o,f=this._geometry.closePointEps,c=this.currentPath?this.currentPath.points:null;if(c){var d=Math.abs(c[c.length-2]-u),v=Math.abs(c[c.length-1]-p);d<f&&v<f||c.push(u,p)}else this.moveTo(u,p),c=this.currentPath.points;return As.arc(u,p,t,r,o,n,s,a,c),this},i.prototype.beginFill=function(t,r){return t===void 0&&(t=0),r===void 0&&(r=1),this.beginTextureFill({texture:Ie.Texture.WHITE,color:t,alpha:r})},i.prototype.beginTextureFill=function(t){t=Object.assign({texture:Ie.Texture.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this},i.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},i.prototype.drawRect=function(t,r,o,n){return this.drawShape(new z.Rectangle(t,r,o,n))},i.prototype.drawRoundedRect=function(t,r,o,n,s){return this.drawShape(new z.RoundedRectangle(t,r,o,n,s))},i.prototype.drawCircle=function(t,r,o){return this.drawShape(new z.Circle(t,r,o))},i.prototype.drawEllipse=function(t,r,o,n){return this.drawShape(new z.Ellipse(t,r,o,n))},i.prototype.drawPolygon=function(){for(var t=arguments,r=[],o=0;o<arguments.length;o++)r[o]=t[o];var n,s=!0,a=r[0];a.points?(s=a.closeStroke,n=a.points):Array.isArray(r[0])?n=r[0]:n=r;var l=new z.Polygon(n);return l.closeStroke=s,this.drawShape(l),this},i.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},i.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},i.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===z.SHAPES.RECT&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)},i.prototype._render=function(t){this.finishPoly();var r=this._geometry,o=t.context.supports.uint32Indices;r.updateBatches(o),r.batchable?(this.batchDirty!==r.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},i.prototype._populateBatches=function(){var t=this._geometry,r=this.blendMode,o=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=o,this.vertexData=new Float32Array(t.points);for(var n=0;n<o;n++){var s=t.batches[n],a=s.style.color,l=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),u=new Float32Array(t.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),p=new Uint16Array(t.indicesUint16.buffer,s.start*2,s.size),f={vertexData:l,blendMode:r,indices:p,uvs:u,_batchRGB:Mi.hex2rgb(a),_tintRGB:a,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[n]=f}},i.prototype._renderBatched=function(t){if(!!this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var r=0,o=this.batches.length;r<o;r++){var n=this.batches[r];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}},i.prototype._renderDirect=function(t){var r=this._resolveDirectShader(t),o=this._geometry,n=this.tint,s=this.worldAlpha,a=r.uniforms,l=o.drawCalls;a.translationMatrix=this.transform.worldTransform,a.tint[0]=(n>>16&255)/255*s,a.tint[1]=(n>>8&255)/255*s,a.tint[2]=(n&255)/255*s,a.tint[3]=s,t.shader.bind(r),t.geometry.bind(o,r),t.state.set(this.state);for(var u=0,p=l.length;u<p;u++)this._renderDrawCallDirect(t,o.drawCalls[u])},i.prototype._renderDrawCallDirect=function(t,r){for(var o=r.texArray,n=r.type,s=r.size,a=r.start,l=o.count,u=0;u<l;u++)t.texture.bind(o.elements[u],u);t.geometry.draw(n,s,a)},i.prototype._resolveDirectShader=function(t){var r=this.shader,o=this.pluginName;if(!r){if(!Ss[o]){for(var n=t.plugins.batch.MAX_TEXTURES,s=new Int32Array(n),a=0;a<n;a++)s[a]=a;var l={tint:new Float32Array([1,1,1,1]),translationMatrix:new z.Matrix,default:Ie.UniformGroup.from({uSamplers:s},!0)},u=t.plugins[o]._shader.program;Ss[o]=new Ie.Shader(u,l)}r=Ss[o]}return r},i.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(!!t.graphicsData.length){var r=t.bounds,o=r.minX,n=r.minY,s=r.maxX,a=r.maxY;this._bounds.addFrame(this.transform,o,n,s,a)}},i.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,i._TEMP_POINT),this._geometry.containsPoint(i._TEMP_POINT)},i.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=Mi.hex2rgb(this.tint,qb),r=0;r<this.batches.length;r++){var o=this.batches[r],n=o._batchRGB,s=t[0]*n[0]*255,a=t[1]*n[1]*255,l=t[2]*n[2]*255,u=(s<<16)+(a<<8)+(l|0);o._tintRGB=(u>>16)+(u&65280)+((u&255)<<16)}}},i.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var r=this.transform.worldTransform,o=r.a,n=r.b,s=r.c,a=r.d,l=r.tx,u=r.ty,p=this._geometry.points,f=this.vertexData,c=0,d=0;d<p.length;d+=2){var v=p[d],m=p[d+1];f[c++]=o*v+s*m+l,f[c++]=a*m+n*v+u}}},i.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},i.prototype.setMatrix=function(t){return this._matrix=t,this},i.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},i.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},i.prototype.destroy=function(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,e.prototype.destroy.call(this,t)},i._TEMP_POINT=new z.Point,i}(bs.Container),Wb={buildPoly:Es,buildCircle:Rs,buildRectangle:up,buildRoundedRectangle:hp,buildLine:Is,ArcUtils:As,BezierUtils:fp,QuadraticUtils:cp,BatchPart:dp,FILL_COMMANDS:oo,BATCH_POOL:Ps,DRAW_CALL_POOL:Fi};le.FillStyle=gs;le.GRAPHICS_CURVES=qt;le.Graphics=Yb;le.GraphicsData=ws;le.GraphicsGeometry=vp;le.LineStyle=mp;le.graphicsUtils=Wb});var St=R(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});var zb=Le(),no=ae(),Kb=Ae(),Cs=_e(),yp=Se(),so=ge();var Ns=h(function(e,i){return Ns=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Ns(e,i)},"extendStatics");function Zb(e,i){Ns(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(Zb,"__extends");var Ui=new Cs.Point,$b=new Uint16Array([0,1,2,0,2,3]),Jb=function(e){Zb(i,e);function i(t){var r=e.call(this)||this;return r._anchor=new Cs.ObservablePoint(r._onAnchorUpdate,r,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=zb.BLEND_MODES.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=t||no.Texture.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=$b,r.pluginName="batch",r.isSprite=!0,r._roundPixels=yp.settings.ROUND_PIXELS,r}return h(i,"Sprite"),i.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=so.sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=so.sign(this.scale.y)*this._height/this._texture.orig.height)},i.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},i.prototype.calculateVertices=function(){var t=this._texture;if(!(this._transformID===this.transform._worldID&&this._textureID===t._updateID)){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var r=this.transform.worldTransform,o=r.a,n=r.b,s=r.c,a=r.d,l=r.tx,u=r.ty,p=this.vertexData,f=t.trim,c=t.orig,d=this._anchor,v=0,m=0,y=0,g=0;if(f?(m=f.x-d._x*c.width,v=m+f.width,g=f.y-d._y*c.height,y=g+f.height):(m=-d._x*c.width,v=m+c.width,g=-d._y*c.height,y=g+c.height),p[0]=o*m+s*g+l,p[1]=a*g+n*m+u,p[2]=o*v+s*g+l,p[3]=a*g+n*v+u,p[4]=o*v+s*y+l,p[5]=a*y+n*v+u,p[6]=o*m+s*y+l,p[7]=a*y+n*m+u,this._roundPixels)for(var T=yp.settings.RESOLUTION,x=0;x<p.length;++x)p[x]=Math.round((p[x]*T|0)/T)}},i.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,r=this.vertexTrimmedData,o=t.orig,n=this._anchor,s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,p=s.d,f=s.tx,c=s.ty,d=-n._x*o.width,v=d+o.width,m=-n._y*o.height,y=m+o.height;r[0]=a*d+u*m+f,r[1]=p*m+l*d+c,r[2]=a*v+u*m+f,r[3]=p*m+l*v+c,r[4]=a*v+u*y+f,r[5]=p*y+l*v+c,r[6]=a*d+u*y+f,r[7]=p*y+l*d+c},i.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},i.prototype._calculateBounds=function(){var t=this._texture.trim,r=this._texture.orig;!t||t.width===r.width&&t.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},i.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Cs.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Ui);var r=this._texture.orig.width,o=this._texture.orig.height,n=-r*this.anchor.x,s=0;return!!(Ui.x>=n&&Ui.x<n+r&&(s=-o*this.anchor.y,Ui.y>=s&&Ui.y<s+o))},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null;var r=typeof t=="boolean"?t:t&&t.texture;if(r){var o=typeof t=="boolean"?t:t&&t.baseTexture;this._texture.destroy(!!o)}this._texture=null},i.from=function(t,r){var o=t instanceof no.Texture?t:no.Texture.from(t,r);return new i(o)},Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var r=so.sign(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var r=so.sign(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||no.Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),i}(Kb.Container);Ms.Sprite=Jb});var lo=R(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});var Qb=St(),eg=ae(),tg=Se(),_p=_e(),Kt=ge();var Fs=h(function(e,i){return Fs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Fs(e,i)},"extendStatics");function ig(e,i){Fs(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(ig,"__extends");(function(e){e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"})(Qe.TEXT_GRADIENT||(Qe.TEXT_GRADIENT={}));var Us={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Qe.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},rg=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ls=function(){function e(i){this.styleID=0,this.reset(),Bs(this,i,i)}return h(e,"TextStyle"),e.prototype.clone=function(){var i={};return Bs(i,this,Us),new e(i)},e.prototype.reset=function(){Bs(this,Us,Us)},Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(i){this._align!==i&&(this._align=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"breakWords",{get:function(){return this._breakWords},set:function(i){this._breakWords!==i&&(this._breakWords=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(i){this._dropShadow!==i&&(this._dropShadow=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(i){this._dropShadowAlpha!==i&&(this._dropShadowAlpha=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(i){this._dropShadowAngle!==i&&(this._dropShadowAngle=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(i){this._dropShadowBlur!==i&&(this._dropShadowBlur=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(i){var t=Ds(i);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(i){this._dropShadowDistance!==i&&(this._dropShadowDistance=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fill},set:function(i){var t=Ds(i);this._fill!==t&&(this._fill=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(i){this._fillGradientType!==i&&(this._fillGradientType=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(i){og(this._fillGradientStops,i)||(this._fillGradientStops=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(i){this.fontFamily!==i&&(this._fontFamily=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(i){this._fontSize!==i&&(this._fontSize=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(i){this._fontStyle!==i&&(this._fontStyle=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(i){this._fontVariant!==i&&(this._fontVariant=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(i){this._fontWeight!==i&&(this._fontWeight=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(i){this._letterSpacing!==i&&(this._letterSpacing=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(i){this._lineHeight!==i&&(this._lineHeight=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leading",{get:function(){return this._leading},set:function(i){this._leading!==i&&(this._leading=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(i){this._lineJoin!==i&&(this._lineJoin=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(i){this._miterLimit!==i&&(this._miterLimit=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"padding",{get:function(){return this._padding},set:function(i){this._padding!==i&&(this._padding=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(i){var t=Ds(i);this._stroke!==t&&(this._stroke=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(i){this._strokeThickness!==i&&(this._strokeThickness=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(i){this._textBaseline!==i&&(this._textBaseline=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trim",{get:function(){return this._trim},set:function(i){this._trim!==i&&(this._trim=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(i){this._whiteSpace!==i&&(this._whiteSpace=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(i){this._wordWrap!==i&&(this._wordWrap=i,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(i){this._wordWrapWidth!==i&&(this._wordWrapWidth=i,this.styleID++)},enumerable:!1,configurable:!0}),e.prototype.toFontString=function(){var i=typeof this.fontSize=="number"?this.fontSize+"px":this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var r=t.length-1;r>=0;r--){var o=t[r].trim();!/([\"\'])[^\'\"]+\1/.test(o)&&rg.indexOf(o)<0&&(o='"'+o+'"'),t[r]=o}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+i+" "+t.join(",")},e}();function bp(e){return typeof e=="number"?Kt.hex2string(e):(typeof e=="string"&&e.indexOf("0x")===0&&(e=e.replace("0x","#")),e)}h(bp,"getSingleColor");function Ds(e){if(Array.isArray(e)){for(var i=0;i<e.length;++i)e[i]=bp(e[i]);return e}else return bp(e)}h(Ds,"getColor");function og(e,i){if(!Array.isArray(e)||!Array.isArray(i)||e.length!==i.length)return!1;for(var t=0;t<e.length;++t)if(e[t]!==i[t])return!1;return!0}h(og,"areArraysEqual");function Bs(e,i,t){for(var r in t)Array.isArray(i[r])?e[r]=i[r].slice():e[r]=i[r]}h(Bs,"deepCopyProperties");var He=function(){function e(i,t,r,o,n,s,a,l,u){this.text=i,this.style=t,this.width=r,this.height=o,this.lines=n,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=u}return h(e,"TextMetrics"),e.measureText=function(i,t,r,o){o===void 0&&(o=e._canvas),r=r??t.wordWrap;var n=t.toFontString(),s=e.measureFont(n);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);var a=o.getContext("2d");a.font=n;for(var l=r?e.wordWrap(i,t,o):i,u=l.split(/(?:\r\n|\r|\n)/),p=new Array(u.length),f=0,c=0;c<u.length;c++){var d=a.measureText(u[c]).width+(u[c].length-1)*t.letterSpacing;p[c]=d,f=Math.max(f,d)}var v=f+t.strokeThickness;t.dropShadow&&(v+=t.dropShadowDistance);var m=t.lineHeight||s.fontSize+t.strokeThickness,y=Math.max(m,s.fontSize+t.strokeThickness)+(u.length-1)*(m+t.leading);return t.dropShadow&&(y+=t.dropShadowDistance),new e(i,t,v,y,u,p,m+t.leading,f,s)},e.wordWrap=function(i,t,r){r===void 0&&(r=e._canvas);for(var o=r.getContext("2d"),n=0,s="",a="",l=Object.create(null),u=t.letterSpacing,p=t.whiteSpace,f=e.collapseSpaces(p),c=e.collapseNewlines(p),d=!f,v=t.wordWrapWidth+u,m=e.tokenize(i),y=0;y<m.length;y++){var g=m[y];if(e.isNewline(g)){if(!c){a+=e.addLine(s),d=!f,s="",n=0;continue}g=" "}if(f){var T=e.isBreakingSpace(g),x=e.isBreakingSpace(s[s.length-1]);if(T&&x)continue}var I=e.getFromCache(g,u,l,o);if(I>v)if(s!==""&&(a+=e.addLine(s),s="",n=0),e.canBreakWords(g,t.breakWords))for(var b=e.wordWrapSplit(g),E=0;E<b.length;E++){for(var O=b[E],F=1;b[E+F];){var A=b[E+F],w=O[O.length-1];if(!e.canBreakChars(w,A,g,E,t.breakWords))O+=A;else break;F++}E+=O.length-1;var B=e.getFromCache(O,u,l,o);B+n>v&&(a+=e.addLine(s),d=!1,s="",n=0),s+=O,n+=B}else{s.length>0&&(a+=e.addLine(s),s="",n=0);var U=y===m.length-1;a+=e.addLine(g,!U),d=!1,s="",n=0}else I+n>v&&(d=!1,a+=e.addLine(s),s="",n=0),(s.length>0||!e.isBreakingSpace(g)||d)&&(s+=g,n+=I)}return a+=e.addLine(s,!1),a},e.addLine=function(i,t){return t===void 0&&(t=!0),i=e.trimRight(i),i=t?i+`
`:i,i},e.getFromCache=function(i,t,r,o){var n=r[i];if(typeof n!="number"){var s=i.length*t;n=o.measureText(i).width+s,r[i]=n}return n},e.collapseSpaces=function(i){return i==="normal"||i==="pre-line"},e.collapseNewlines=function(i){return i==="normal"},e.trimRight=function(i){if(typeof i!="string")return"";for(var t=i.length-1;t>=0;t--){var r=i[t];if(!e.isBreakingSpace(r))break;i=i.slice(0,-1)}return i},e.isNewline=function(i){return typeof i!="string"?!1:e._newlines.indexOf(i.charCodeAt(0))>=0},e.isBreakingSpace=function(i,t){return typeof i!="string"?!1:e._breakingSpaces.indexOf(i.charCodeAt(0))>=0},e.tokenize=function(i){var t=[],r="";if(typeof i!="string")return t;for(var o=0;o<i.length;o++){var n=i[o],s=i[o+1];if(e.isBreakingSpace(n,s)||e.isNewline(n)){r!==""&&(t.push(r),r=""),t.push(n);continue}r+=n}return r!==""&&t.push(r),t},e.canBreakWords=function(i,t){return t},e.canBreakChars=function(i,t,r,o,n){return!0},e.wordWrapSplit=function(i){return i.split("")},e.measureFont=function(i){if(e._fonts[i])return e._fonts[i];var t={ascent:0,descent:0,fontSize:0},r=e._canvas,o=e._context;o.font=i;var n=e.METRICS_STRING+e.BASELINE_SYMBOL,s=Math.ceil(o.measureText(n).width),a=Math.ceil(o.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*a);a=a*e.BASELINE_MULTIPLIER|0,r.width=s,r.height=l,o.fillStyle="#f00",o.fillRect(0,0,s,l),o.font=i,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(n,0,a);var u=o.getImageData(0,0,s,l).data,p=u.length,f=s*4,c=0,d=0,v=!1;for(c=0;c<a;++c){for(var m=0;m<f;m+=4)if(u[d+m]!==255){v=!0;break}if(!v)d+=f;else break}for(t.ascent=a-c,d=p-f,v=!1,c=l;c>a;--c){for(var m=0;m<f;m+=4)if(u[d+m]!==255){v=!0;break}if(!v)d-=f;else break}return t.descent=c-a,t.fontSize=t.ascent+t.descent,e._fonts[i]=t,t},e.clearMetrics=function(i){i===void 0&&(i=""),i?delete e._fonts[i]:e._fonts={}},e}(),ao=function(){try{var e=new OffscreenCanvas(0,0),i=e.getContext("2d");return i&&i.measureText?e:document.createElement("canvas")}catch{return document.createElement("canvas")}}();ao.width=ao.height=10;He._canvas=ao;He._context=ao.getContext("2d");He._fonts={};He.METRICS_STRING="|\xC9q\xC5";He.BASELINE_SYMBOL="M";He.BASELINE_MULTIPLIER=1.4;He.HEIGHT_MULTIPLIER=2;He._newlines=[10,13];He._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var ng={texture:!0,children:!1,baseTexture:!0},sg=function(e){ig(i,e);function i(t,r,o){var n=this,s=!1;o||(o=document.createElement("canvas"),s=!0),o.width=3,o.height=3;var a=eg.Texture.from(o);return a.orig=new _p.Rectangle,a.trim=new _p.Rectangle,n=e.call(this,a)||this,n._ownCanvas=s,n.canvas=o,n.context=n.canvas.getContext("2d"),n._resolution=tg.settings.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=t,n.style=r,n.localStyleID=-1,n}return h(i,"Text"),i.prototype.updateText=function(t){var r=this._style;if(this.localStyleID!==r.styleID&&(this.dirty=!0,this.localStyleID=r.styleID),!(!this.dirty&&t)){this._font=this._style.toFontString();var o=this.context,n=He.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=n.width,a=n.height,l=n.lines,u=n.lineHeight,p=n.lineWidths,f=n.maxLineWidth,c=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+r.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+r.padding*2)*this._resolution),o.scale(this._resolution,this._resolution),o.clearRect(0,0,this.canvas.width,this.canvas.height),o.font=this._font,o.lineWidth=r.strokeThickness,o.textBaseline=r.textBaseline,o.lineJoin=r.lineJoin,o.miterLimit=r.miterLimit;for(var d,v,m=r.dropShadow?2:1,y=0;y<m;++y){var g=r.dropShadow&&y===0,T=g?Math.ceil(Math.max(1,a)+r.padding*2):0,x=T*this._resolution;if(g){o.fillStyle="black",o.strokeStyle="black";var I=r.dropShadowColor,b=Kt.hex2rgb(typeof I=="number"?I:Kt.string2hex(I));o.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+r.dropShadowAlpha+")",o.shadowBlur=r.dropShadowBlur,o.shadowOffsetX=Math.cos(r.dropShadowAngle)*r.dropShadowDistance,o.shadowOffsetY=Math.sin(r.dropShadowAngle)*r.dropShadowDistance+x}else o.fillStyle=this._generateFillStyle(r,l,n),o.strokeStyle=r.stroke,o.shadowColor="black",o.shadowBlur=0,o.shadowOffsetX=0,o.shadowOffsetY=0;var E=(u-c.fontSize)/2;(!i.nextLineHeightBehavior||u-c.fontSize<0)&&(E=0);for(var O=0;O<l.length;O++)d=r.strokeThickness/2,v=r.strokeThickness/2+O*u+c.ascent+E,r.align==="right"?d+=f-p[O]:r.align==="center"&&(d+=(f-p[O])/2),r.stroke&&r.strokeThickness&&this.drawLetterSpacing(l[O],d+r.padding,v+r.padding-T,!0),r.fill&&this.drawLetterSpacing(l[O],d+r.padding,v+r.padding-T)}this.updateTexture()}},i.prototype.drawLetterSpacing=function(t,r,o,n){n===void 0&&(n=!1);var s=this._style,a=s.letterSpacing;if(a===0){n?this.context.strokeText(t,r,o):this.context.fillText(t,r,o);return}for(var l=r,u=Array.from?Array.from(t):t.split(""),p=this.context.measureText(t).width,f=0,c=0;c<u.length;++c){var d=u[c];n?this.context.strokeText(d,l,o):this.context.fillText(d,l,o),f=this.context.measureText(t.substring(c+1)).width,l+=p-f+a,p=f}},i.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var r=Kt.trimCanvas(t);r.data&&(t.width=r.width,t.height=r.height,this.context.putImageData(r.data,0,0))}var o=this._texture,n=this._style,s=n.trim?0:n.padding,a=o.baseTexture;o.trim.width=o._frame.width=t.width/this._resolution,o.trim.height=o._frame.height=t.height/this._resolution,o.trim.x=-s,o.trim.y=-s,o.orig.width=o._frame.width-s*2,o.orig.height=o._frame.height-s*2,this._onTextureUpdate(),a.setRealSize(t.width,t.height,this._resolution),o.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},i.prototype._render=function(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),e.prototype._render.call(this,t)},i.prototype.getLocalBounds=function(t){return this.updateText(!0),e.prototype.getLocalBounds.call(this,t)},i.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},i.prototype._generateFillStyle=function(t,r,o){var n=t.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;var s,a=t.dropShadow?t.dropShadowDistance:0,l=t.padding||0,u=this.canvas.width/this._resolution-a-l*2,p=this.canvas.height/this._resolution-a-l*2,f=n.slice(),c=t.fillGradientStops.slice();if(!c.length)for(var d=f.length+1,v=1;v<d;++v)c.push(v/d);if(f.unshift(n[0]),c.unshift(0),f.push(n[n.length-1]),c.push(1),t.fillGradientType===Qe.TEXT_GRADIENT.LINEAR_VERTICAL){s=this.context.createLinearGradient(u/2,l,u/2,p+l);for(var m=o.fontProperties.fontSize+t.strokeThickness,v=0;v<r.length;v++){var y=o.lineHeight*(v-1)+m,g=o.lineHeight*v,T=g;v>0&&y>g&&(T=(g+y)/2);var x=g+m,I=o.lineHeight*(v+1),b=x;v+1<r.length&&I<x&&(b=(x+I)/2);for(var E=(b-T)/p,O=0;O<f.length;O++){var F=0;typeof c[O]=="number"?F=c[O]:F=O/f.length;var A=Math.min(1,Math.max(0,T/p+F*E));A=Number(A.toFixed(5)),s.addColorStop(A,f[O])}}}else{s=this.context.createLinearGradient(l,p/2,u+l,p/2);for(var w=f.length+1,B=1,v=0;v<f.length;v++){var U=void 0;typeof c[v]=="number"?U=c[v]:U=B/w,s.addColorStop(U,f[v]),B++}}return s},i.prototype.destroy=function(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},ng,t),e.prototype.destroy.call(this,t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(i.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var r=Kt.sign(this.scale.x)||1;this.scale.x=r*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var r=Kt.sign(this.scale.y)||1;this.scale.y=r*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},t instanceof Ls?this._style=t:this._style=new Ls(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),i.nextLineHeightBehavior=!1,i}(Qb.Sprite);Qe.Text=sg;Qe.TextMetrics=He;Qe.TextStyle=Ls});var Ip=R(Zt=>{"use strict";Object.defineProperty(Zt,"__esModule",{value:!0});var gp=Se(),uo=ae(),Tp=Os(),Li=Ht(),ag=Ae(),Di=lo();gp.settings.UPLOADS_PER_FRAME=4;var Gs=h(function(e,i){return Gs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Gs(e,i)},"extendStatics");function lg(e,i){Gs(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(lg,"__extends");var xp=function(){function e(i){this.maxItemsPerFrame=i,this.itemsLeft=0}return h(e,"CountLimiter"),e.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},e.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},e}();function ug(e,i){var t=!1;if(e&&e._textures&&e._textures.length){for(var r=0;r<e._textures.length;r++)if(e._textures[r]instanceof uo.Texture){var o=e._textures[r].baseTexture;i.indexOf(o)===-1&&(i.push(o),t=!0)}}return t}h(ug,"findMultipleBaseTextures");function hg(e,i){if(e.baseTexture instanceof uo.BaseTexture){var t=e.baseTexture;return i.indexOf(t)===-1&&i.push(t),!0}return!1}h(hg,"findBaseTexture");function pg(e,i){if(e._texture&&e._texture instanceof uo.Texture){var t=e._texture.baseTexture;return i.indexOf(t)===-1&&i.push(t),!0}return!1}h(pg,"findTexture");function fg(e,i){return i instanceof Di.Text?(i.updateText(!0),!0):!1}h(fg,"drawText");function cg(e,i){if(i instanceof Di.TextStyle){var t=i.toFontString();return Di.TextMetrics.measureFont(t),!0}return!1}h(cg,"calculateTextStyle");function dg(e,i){if(e instanceof Di.Text){i.indexOf(e.style)===-1&&i.push(e.style),i.indexOf(e)===-1&&i.push(e);var t=e._texture.baseTexture;return i.indexOf(t)===-1&&i.push(t),!0}return!1}h(dg,"findText");function vg(e,i){return e instanceof Di.TextStyle?(i.indexOf(e)===-1&&i.push(e),!0):!1}h(vg,"findTextStyle");var Ep=function(){function e(i){var t=this;this.limiter=new xp(gp.settings.UPLOADS_PER_FRAME),this.renderer=i,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){!t.queue||t.prepareItems()},this.registerFindHook(dg),this.registerFindHook(vg),this.registerFindHook(ug),this.registerFindHook(hg),this.registerFindHook(pg),this.registerUploadHook(fg),this.registerUploadHook(cg)}return h(e,"BasePrepare"),e.prototype.upload=function(i,t){typeof i=="function"&&(t=i,i=null),i&&this.add(i),this.queue.length?(t&&this.completes.push(t),this.ticking||(this.ticking=!0,Li.Ticker.system.addOnce(this.tick,this,Li.UPDATE_PRIORITY.UTILITY))):t&&t()},e.prototype.tick=function(){setTimeout(this.delayedTick,0)},e.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var i=this.queue[0],t=!1;if(i&&!i._destroyed){for(var r=0,o=this.uploadHooks.length;r<o;r++)if(this.uploadHooks[r](this.uploadHookHelper,i)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)Li.Ticker.system.addOnce(this.tick,this,Li.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);this.completes.length=0;for(var r=0,o=n.length;r<o;r++)n[r]()}},e.prototype.registerFindHook=function(i){return i&&this.addHooks.push(i),this},e.prototype.registerUploadHook=function(i){return i&&this.uploadHooks.push(i),this},e.prototype.add=function(i){for(var t=0,r=this.addHooks.length;t<r&&!this.addHooks[t](i,this.queue);t++);if(i instanceof ag.Container)for(var t=i.children.length-1;t>=0;t--)this.add(i.children[t]);return this},e.prototype.destroy=function(){this.ticking&&Li.Ticker.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},e}();function Rp(e,i){return i instanceof uo.BaseTexture?(i._glTextures[e.CONTEXT_UID]||e.texture.bind(i),!0):!1}h(Rp,"uploadBaseTextures");function mg(e,i){if(!(i instanceof Tp.Graphics))return!1;var t=i.geometry;i.finishPoly(),t.updateBatches();for(var r=t.batches,o=0;o<r.length;o++){var n=r[o].style.texture;n&&Rp(e,n.baseTexture)}return t.batchable||e.geometry.bind(t,i._resolveDirectShader(e)),!0}h(mg,"uploadGraphics");function yg(e,i){return e instanceof Tp.Graphics?(i.push(e),!0):!1}h(yg,"findGraphics");var _g=function(e){lg(i,e);function i(t){var r=e.call(this,t)||this;return r.uploadHookHelper=r.renderer,r.registerFindHook(yg),r.registerUploadHook(Rp),r.registerUploadHook(mg),r}return h(i,"Prepare"),i}(Ep),bg=function(){function e(i){this.maxMilliseconds=i,this.frameStart=0}return h(e,"TimeLimiter"),e.prototype.beginFrame=function(){this.frameStart=Date.now()},e.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},e}();Zt.BasePrepare=Ep;Zt.CountLimiter=xp;Zt.Prepare=_g;Zt.TimeLimiter=bg});var Pp=R(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});var ho=_e(),po=ae(),Bi=ge(),ks=Pi(),Ap=function(){function e(i,t,r){r===void 0&&(r=null),this._texture=i instanceof po.Texture?i:null,this.baseTexture=i instanceof po.BaseTexture?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;var o=this.baseTexture.resource;this.resolution=this._updateResolution(r||(o?o.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return h(e,"Spritesheet"),e.prototype._updateResolution=function(i){i===void 0&&(i=null);var t=this.data.meta.scale,r=Bi.getResolutionOfUrl(i,null);return r===null&&(r=t!==void 0?parseFloat(t):1),r!==1&&this.baseTexture.setResolution(r),r},e.prototype.parse=function(i){this._batchIndex=0,this._callback=i,this._frameKeys.length<=e.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},e.prototype._processFrames=function(i){for(var t=i,r=e.BATCH_SIZE;t-i<r&&t<this._frameKeys.length;){var o=this._frameKeys[t],n=this._frames[o],s=n.frame;if(s){var a=null,l=null,u=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,p=new ho.Rectangle(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);n.rotated?a=new ho.Rectangle(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):a=new ho.Rectangle(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(l=new ho.Rectangle(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[o]=new po.Texture(this.baseTexture,a,p,l,n.rotated?2:0,n.anchor),po.Texture.addToCache(this.textures[o],o)}t++}},e.prototype._processAnimations=function(){var i=this.data.animations||{};for(var t in i){this.animations[t]=[];for(var r=0;r<i[t].length;r++){var o=i[t][r];this.animations[t].push(this.textures[o])}}},e.prototype._parseComplete=function(){var i=this._callback;this._callback=null,this._batchIndex=0,i.call(this,this.textures)},e.prototype._nextBatch=function(){var i=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout(function(){i._batchIndex*e.BATCH_SIZE<i._frameKeys.length?i._nextBatch():(i._processAnimations(),i._parseComplete())},0)},e.prototype.destroy=function(i){var t;i===void 0&&(i=!1);for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,i&&((t=this._texture)===null||t===void 0||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},e.BATCH_SIZE=1e3,e}(),gg=function(){function e(){}return h(e,"SpritesheetLoader"),e.use=function(i,t){var r,o,n=this,s=i.name+"_image";if(!i.data||i.type!==ks.LoaderResource.TYPE.JSON||!i.data.frames||n.resources[s]){t();return}var a=(o=(r=i.data)===null||r===void 0?void 0:r.meta)===null||o===void 0?void 0:o.related_multi_packs;if(Array.isArray(a))for(var l=h(function(v){if(typeof v!="string")return"continue";var m=v.replace(".json",""),y=Bi.url.resolve(i.url.replace(n.baseUrl,""),v);if(n.resources[m]||Object.values(n.resources).some(function(T){return Bi.url.format(Bi.url.parse(T.url))===y}))return"continue";var g={crossOrigin:i.crossOrigin,loadType:ks.LoaderResource.LOAD_TYPE.XHR,xhrType:ks.LoaderResource.XHR_RESPONSE_TYPE.JSON,parentResource:i,metadata:i.metadata};n.add(m,y,g)},"_loop_1"),u=0,p=a;u<p.length;u++){var f=p[u];l(f)}var c={crossOrigin:i.crossOrigin,metadata:i.metadata.imageMetadata,parentResource:i},d=e.getResourcePath(i,n.baseUrl);n.add(s,d,c,h(function(m){if(m.error){t(m.error);return}var y=new Ap(m.texture,i.data,i.url);y.parse(function(){i.spritesheet=y,i.textures=y.textures,t()})},"onImageLoad"))},e.getResourcePath=function(i,t){return i.isDataUrl?i.data.meta.image:Bi.url.resolve(i.url.replace(t,""),i.data.meta.image)},e}();fo.Spritesheet=Ap;fo.SpritesheetLoader=gg});var Cp=R(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});var rt=ae(),co=_e(),Tg=St(),Hs=Le(),wp=ge();var Xs=h(function(e,i){return Xs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Xs(e,i)},"extendStatics");function Sp(e,i){Xs(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(Sp,"__extends");var Gi=new co.Point,xg=function(e){Sp(i,e);function i(t,r,o){r===void 0&&(r=100),o===void 0&&(o=100);var n=e.call(this,t)||this;return n.tileTransform=new co.Transform,n._width=r,n._height=o,n.uvMatrix=n.texture.uvMatrix||new rt.TextureMatrix(t),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return h(i,"TilingSprite"),Object.defineProperty(i.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),i.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},i.prototype._render=function(t){var r=this._texture;!r||!r.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},i.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,r=this._height*-this._anchor._y,o=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,r,o,n)},i.prototype.getLocalBounds=function(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new co.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):e.prototype.getLocalBounds.call(this,t)},i.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Gi);var r=this._width,o=this._height,n=-r*this.anchor._x;if(Gi.x>=n&&Gi.x<n+r){var s=-o*this.anchor._y;if(Gi.y>=s&&Gi.y<s+o)return!0}return!1},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.tileTransform=null,this.uvMatrix=null},i.from=function(t,r){var o=t instanceof rt.Texture?t:rt.Texture.from(t,r);return new i(o,r.width,r.height)},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),i}(Tg.Sprite),Op=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Eg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture2D(uSampler, coord);
    gl_FragColor = texSample * uColor;
}
`,Rg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 sample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = sample * uColor;
}
`,vo=new co.Matrix,Ig=function(e){Sp(i,e);function i(t){var r=e.call(this,t)||this,o={globals:r.renderer.globalUniforms};return r.shader=rt.Shader.from(Op,Eg,o),r.simpleShader=rt.Shader.from(Op,Rg,o),r.quad=new rt.QuadUv,r.state=rt.State.for2d(),r}return h(i,"TilingSpriteRenderer"),i.prototype.render=function(t){var r=this.renderer,o=this.quad,n=o.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);var s=t.uvRespectAnchor?t.anchor.x:0,a=t.uvRespectAnchor?t.anchor.y:0;n=o.uvs,n[0]=n[6]=-s,n[1]=n[3]=-a,n[2]=n[4]=1-s,n[5]=n[7]=1-a,o.invalidate();var l=t._texture,u=l.baseTexture,p=t.tileTransform.localTransform,f=t.uvMatrix,c=u.isPowerOfTwo&&l.frame.width===u.width&&l.frame.height===u.height;c&&(u._glTextures[r.CONTEXT_UID]?c=u.wrapMode!==Hs.WRAP_MODES.CLAMP:u.wrapMode===Hs.WRAP_MODES.CLAMP&&(u.wrapMode=Hs.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader,v=l.width,m=l.height,y=t._width,g=t._height;vo.set(p.a*v/y,p.b*v/g,p.c*m/y,p.d*m/g,p.tx/y,p.ty/g),vo.invert(),c?vo.prepend(f.mapCoord):(d.uniforms.uMapCoord=f.mapCoord.toArray(!0),d.uniforms.uClampFrame=f.uClampFrame,d.uniforms.uClampOffset=f.uClampOffset),d.uniforms.uTransform=vo.toArray(!0),d.uniforms.uColor=wp.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,u.alphaMode),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=l,r.shader.bind(d),r.geometry.bind(o),this.state.blendMode=wp.correctBlendMode(t.blendMode,u.alphaMode),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},i}(rt.ObjectRenderer);mo.TilingSprite=xg;mo.TilingSpriteRenderer=Ig});var _o=R($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});var ot=ae(),js=_e(),yo=Le(),Ag=Ae(),Np=Se(),Pg=ge();var Vs=h(function(e,i){return Vs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Vs(e,i)},"extendStatics");function qs(e,i){Vs(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(qs,"__extends");var Mp=function(){function e(i,t){this.uvBuffer=i,this.uvMatrix=t,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return h(e,"MeshBatchUvs"),e.prototype.update=function(i){if(!(!i&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;(!this.data||this.data.length!==t.length)&&(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}},e}(),Ys=new js.Point,Fp=new js.Polygon,wg=function(e){qs(i,e);function i(t,r,o,n){n===void 0&&(n=yo.DRAW_MODES.TRIANGLES);var s=e.call(this)||this;return s.geometry=t,t.refCount++,s.shader=r,s.state=o||ot.State.for2d(),s.drawMode=n,s.start=0,s.size=0,s.uvs=null,s.indices=null,s.vertexData=new Float32Array(1),s.vertexDirty=-1,s._transformID=-1,s._roundPixels=Np.settings.ROUND_PIXELS,s.batchUvs=null,s}return h(i,"Mesh"),Object.defineProperty(i.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){var r=this.geometry.buffers[0].data,o=this.shader;o.batchable&&this.drawMode===yo.DRAW_MODES.TRIANGLES&&r.length<i.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)},i.prototype._renderDefault=function(t){var r=this.shader;r.alpha=this.worldAlpha,r.update&&r.update(),t.batch.flush(),r.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(r),t.state.set(this.state),t.geometry.bind(this.geometry,r),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},i.prototype._renderToBatch=function(t){var r=this.geometry,o=this.shader;o.uvMatrix&&(o.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=r.indexBuffer.data,this._tintRGB=o._tintRGB,this._texture=o.texture;var n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)},i.prototype.calculateVertices=function(){var t=this.geometry,r=t.buffers[0],o=r.data,n=r._updateID;if(!(n===this.vertexDirty&&this._transformID===this.transform._worldID)){this._transformID=this.transform._worldID,this.vertexData.length!==o.length&&(this.vertexData=new Float32Array(o.length));for(var s=this.transform.worldTransform,a=s.a,l=s.b,u=s.c,p=s.d,f=s.tx,c=s.ty,d=this.vertexData,v=0;v<d.length/2;v++){var m=o[v*2],y=o[v*2+1];d[v*2]=a*m+u*y+f,d[v*2+1]=l*m+p*y+c}if(this._roundPixels)for(var g=Np.settings.RESOLUTION,v=0;v<d.length;++v)d[v]=Math.round((d[v]*g|0)/g);this.vertexDirty=n}},i.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],r=this.shader;r.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Mp(t,r.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},i.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},i.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Ys);for(var r=this.geometry.getBuffer("aVertexPosition").data,o=Fp.points,n=this.geometry.getIndex().data,s=n.length,a=this.drawMode===4?3:1,l=0;l+2<s;l+=a){var u=n[l]*2,p=n[l+1]*2,f=n[l+2]*2;if(o[0]=r[u],o[1]=r[u+1],o[2]=r[p],o[3]=r[p+1],o[4]=r[f],o[5]=r[f+1],Fp.contains(Ys.x,Ys.y))return!0}return!1},i.prototype.destroy=function(t){e.prototype.destroy.call(this,t),this.geometry.refCount--,this.geometry.refCount===0&&this.geometry.dispose(),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},i.BATCHABLE_SIZE=100,i}(Ag.Container),Sg=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,Og=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`,Cg=function(e){qs(i,e);function i(t,r){var o=this,n={uSampler:t,alpha:1,uTextureMatrix:js.Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};return r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),o=e.call(this,r.program||ot.Program.from(Og,Sg),n)||this,o._colorDirty=!1,o.uvMatrix=new ot.TextureMatrix(t),o.batchable=r.program===void 0,o.pluginName=r.pluginName,o.tint=r.tint,o.alpha=r.alpha,o}return h(i,"MeshMaterial"),Object.defineProperty(i.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),i.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;Pg.premultiplyTintToRgba(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},i}(ot.Shader),Ng=function(e){qs(i,e);function i(t,r,o){var n=e.call(this)||this,s=new ot.Buffer(t),a=new ot.Buffer(r,!0),l=new ot.Buffer(o,!0,!0);return n.addAttribute("aVertexPosition",s,2,!1,yo.TYPES.FLOAT).addAttribute("aTextureCoord",a,2,!1,yo.TYPES.FLOAT).addIndex(l),n._updateId=-1,n}return h(i,"MeshGeometry"),Object.defineProperty(i.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),i}(ot.Geometry);$t.Mesh=wg;$t.MeshBatchUvs=Mp;$t.MeshGeometry=Ng;$t.MeshMaterial=Cg});var Bp=R(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});var bo=_e(),Mg=Se(),go=_o(),To=ge(),Ot=ae(),xo=lo(),Fg=Ae(),Ws=Pi();var zs=h(function(e,i){return zs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},zs(e,i)},"extendStatics");function Ug(e,i){zs(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(Ug,"__extends");var ki=function(){function e(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[]}return h(e,"BitmapFontData"),e}(),Lg=function(){function e(){}return h(e,"TextFormat"),e.test=function(i){return typeof i=="string"&&i.indexOf("info face=")===0},e.parse=function(i){var t=i.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[]};for(var o in t){var n=t[o].match(/^[a-z]+/gm)[0],s=t[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var l in s){var u=s[l].split("="),p=u[0],f=u[1].replace(/"/gm,""),c=parseFloat(f),d=isNaN(c)?f:c;a[p]=d}r[n].push(a)}var v=new ki;return r.info.forEach(function(m){return v.info.push({face:m.face,size:parseInt(m.size,10)})}),r.common.forEach(function(m){return v.common.push({lineHeight:parseInt(m.lineHeight,10)})}),r.page.forEach(function(m){return v.page.push({id:parseInt(m.id,10),file:m.file})}),r.char.forEach(function(m){return v.char.push({id:parseInt(m.id,10),page:parseInt(m.page,10),x:parseInt(m.x,10),y:parseInt(m.y,10),width:parseInt(m.width,10),height:parseInt(m.height,10),xoffset:parseInt(m.xoffset,10),yoffset:parseInt(m.yoffset,10),xadvance:parseInt(m.xadvance,10)})}),r.kerning.forEach(function(m){return v.kerning.push({first:parseInt(m.first,10),second:parseInt(m.second,10),amount:parseInt(m.amount,10)})}),v},e}(),Ks=function(){function e(){}return h(e,"XMLFormat"),e.test=function(i){return i instanceof XMLDocument&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null},e.parse=function(i){for(var t=new ki,r=i.getElementsByTagName("info"),o=i.getElementsByTagName("common"),n=i.getElementsByTagName("page"),s=i.getElementsByTagName("char"),a=i.getElementsByTagName("kerning"),l=0;l<r.length;l++)t.info.push({face:r[l].getAttribute("face"),size:parseInt(r[l].getAttribute("size"),10)});for(var l=0;l<o.length;l++)t.common.push({lineHeight:parseInt(o[l].getAttribute("lineHeight"),10)});for(var l=0;l<n.length;l++)t.page.push({id:parseInt(n[l].getAttribute("id"),10)||0,file:n[l].getAttribute("file")});for(var l=0;l<s.length;l++){var u=s[l];t.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(var l=0;l<a.length;l++)t.kerning.push({first:parseInt(a[l].getAttribute("first"),10),second:parseInt(a[l].getAttribute("second"),10),amount:parseInt(a[l].getAttribute("amount"),10)});return t},e}(),Dg=function(){function e(){}return h(e,"XMLStringFormat"),e.test=function(i){if(typeof i=="string"&&i.indexOf("<font>")>-1){var t=new self.DOMParser().parseFromString(i,"text/xml");return Ks.test(t)}return!1},e.parse=function(i){var t=new self.DOMParser().parseFromString(i,"text/xml");return Ks.parse(t)},e}(),Zs=[Lg,Ks,Dg];function Up(e){for(var i=0;i<Zs.length;i++)if(Zs[i].test(e))return Zs[i];return null}h(Up,"autoDetectFormat");function Bg(e,i,t,r,o,n){var s=t.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;var a,l=t.dropShadow?t.dropShadowDistance:0,u=t.padding||0,p=e.width/r-l-u*2,f=e.height/r-l-u*2,c=s.slice(),d=t.fillGradientStops.slice();if(!d.length)for(var v=c.length+1,m=1;m<v;++m)d.push(m/v);if(c.unshift(s[0]),d.unshift(0),c.push(s[s.length-1]),d.push(1),t.fillGradientType===xo.TEXT_GRADIENT.LINEAR_VERTICAL){a=i.createLinearGradient(p/2,u,p/2,f+u);for(var y=0,g=n.fontProperties.fontSize+t.strokeThickness,T=g/f,m=0;m<o.length;m++)for(var x=n.lineHeight*m,I=0;I<c.length;I++){var b=0;typeof d[I]=="number"?b=d[I]:b=I/c.length;var E=x/f+b*T,O=Math.max(y,E);O=Math.min(O,1),a.addColorStop(O,c[I]),y=O}}else{a=i.createLinearGradient(u,f/2,p+u,f/2);for(var F=c.length+1,A=1,m=0;m<c.length;m++){var w=void 0;typeof d[m]=="number"?w=d[m]:w=A/F,a.addColorStop(w,c[m]),A++}}return a}h(Bg,"generateFillStyle");function Gg(e,i,t,r,o,n,s){var a=t.text,l=t.fontProperties;i.translate(r,o),i.scale(n,n);var u=s.strokeThickness/2,p=-(s.strokeThickness/2);i.font=s.toFontString(),i.lineWidth=s.strokeThickness,i.textBaseline=s.textBaseline,i.lineJoin=s.lineJoin,i.miterLimit=s.miterLimit,i.fillStyle=Bg(e,i,s,n,[a],t),i.strokeStyle=s.stroke;var f=s.dropShadowColor,c=To.hex2rgb(typeof f=="number"?f:To.string2hex(f));s.dropShadow?(i.shadowColor="rgba("+c[0]*255+","+c[1]*255+","+c[2]*255+","+s.dropShadowAlpha+")",i.shadowBlur=s.dropShadowBlur,i.shadowOffsetX=Math.cos(s.dropShadowAngle)*s.dropShadowDistance,i.shadowOffsetY=Math.sin(s.dropShadowAngle)*s.dropShadowDistance):(i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0),s.stroke&&s.strokeThickness&&i.strokeText(a,u,p+t.lineHeight-l.descent),s.fill&&i.fillText(a,u,p+t.lineHeight-l.descent),i.setTransform(1,0,0,1,0,0),i.fillStyle="rgba(0, 0, 0, 0)"}h(Gg,"drawGlyph");function kg(e){typeof e=="string"&&(e=[e]);for(var i=[],t=0,r=e.length;t<r;t++){var o=e[t];if(Array.isArray(o)){if(o.length!==2)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+o.length+".");var n=o[0].charCodeAt(0),s=o[1].charCodeAt(0);if(s<n)throw new Error("[BitmapFont]: Invalid character range.");for(var a=n,l=s;a<=l;a++)i.push(String.fromCharCode(a))}else i.push.apply(i,o.split(""))}if(i.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return i}h(kg,"resolveCharacters");var Jt=function(){function e(i,t,r){var o=i.info[0],n=i.common[0],s=i.page[0],a=To.getResolutionOfUrl(s.file),l={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=n.lineHeight/a,this.chars={},this.pageTextures=l;for(var u=0;u<i.page.length;u++){var p=i.page[u],f=p.id,c=p.file;l[f]=t instanceof Array?t[u]:t[c]}for(var u=0;u<i.char.length;u++){var d=i.char[u],f=d.id,v=d.page,m=i.char[u],y=m.x,g=m.y,T=m.width,x=m.height,I=m.xoffset,b=m.yoffset,E=m.xadvance;y/=a,g/=a,T/=a,x/=a,I/=a,b/=a,E/=a;var O=new bo.Rectangle(y+l[v].frame.x/a,g+l[v].frame.y/a,T,x);this.chars[f]={xOffset:I,yOffset:b,xAdvance:E,kerning:{},texture:new Ot.Texture(l[v].baseTexture,O),page:v}}for(var u=0;u<i.kerning.length;u++){var F=i.kerning[u],A=F.first,w=F.second,B=F.amount;A/=a,w/=a,B/=a,this.chars[w]&&(this.chars[w].kerning[A]=B)}}return h(e,"BitmapFont"),e.prototype.destroy=function(){for(var i in this.chars)this.chars[i].texture.destroy(),this.chars[i].texture=null;for(var i in this.pageTextures)this._ownsTextures&&this.pageTextures[i].destroy(!0),this.pageTextures[i]=null;this.chars=null,this.pageTextures=null},e.install=function(i,t,r){var o;if(i instanceof ki)o=i;else{var n=Up(i);if(!n)throw new Error("Unrecognized data format for font.");o=n.parse(i)}t instanceof Ot.Texture&&(t=[t]);var s=new e(o,t,r);return e.available[s.font]=s,s},e.uninstall=function(i){var t=e.available[i];if(!t)throw new Error("No font found named '"+i+"'");t.destroy(),delete e.available[i]},e.from=function(i,t,r){if(!i)throw new Error("[BitmapFont] Property `name` is required.");var o=Object.assign({},e.defaultOptions,r),n=o.chars,s=o.padding,a=o.resolution,l=o.textureWidth,u=o.textureHeight,p=kg(n),f=t instanceof xo.TextStyle?t:new xo.TextStyle(t),c=l,d=new ki;d.info[0]={face:f.fontFamily,size:f.fontSize},d.common[0]={lineHeight:f.fontSize};for(var v=0,m=0,y,g,T,x=0,I=[],b=0;b<p.length;b++){y||(y=document.createElement("canvas"),y.width=l,y.height=u,g=y.getContext("2d"),T=new Ot.BaseTexture(y,{resolution:a}),I.push(new Ot.Texture(T)),d.page.push({id:I.length-1,file:""}));var E=xo.TextMetrics.measureText(p[b],f,!1,y),O=E.width,F=Math.ceil(E.height),A=Math.ceil((f.fontStyle==="italic"?2:1)*O);if(m>=u-F*a){if(m===0)throw new Error("[BitmapFont] textureHeight "+u+"px is "+("too small for "+f.fontSize+"px fonts"));--b,y=null,g=null,T=null,m=0,v=0,x=0;continue}if(x=Math.max(F+E.fontProperties.descent,x),A*a+v>=c){--b,m+=x*a,m=Math.ceil(m),v=0,x=0;continue}Gg(y,g,E,v,m,a,f);var w=E.text.charCodeAt(0);d.char.push({id:w,page:I.length-1,x:v/a,y:m/a,width:A,height:F,xoffset:0,yoffset:0,xadvance:Math.ceil(O-(f.dropShadow?f.dropShadowDistance:0)-(f.stroke?f.strokeThickness:0))}),v+=(A+2*s)*a,v=Math.ceil(v)}for(var b=0,B=p.length;b<B;b++)for(var U=p[b],W=0;W<B;W++){var ie=p[W],M=g.measureText(U).width,N=g.measureText(ie).width,X=g.measureText(U+ie).width,C=X-(M+N);C&&d.kerning.push({first:U.charCodeAt(0),second:ie.charCodeAt(0),amount:C})}var P=new e(d,I,!0);return e.available[i]!==void 0&&e.uninstall(i),e.available[i]=P,P},e.ALPHA=[["a","z"],["A","Z"]," "],e.NUMERIC=[["0","9"]],e.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],e.ASCII=[[" ","~"]],e.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:e.ALPHANUMERIC},e.available={},e}(),Lp=[],Dp=[],Hg=function(e){Ug(i,e);function i(t,r){r===void 0&&(r={});var o=e.call(this)||this;o._tint=16777215;var n=Object.assign({},i.styleDefaults,r),s=n.align,a=n.tint,l=n.maxWidth,u=n.letterSpacing,p=n.fontName,f=n.fontSize;if(!Jt.available[p])throw new Error('Missing BitmapFont "'+p+'"');return o._activePagesMeshData=[],o._textWidth=0,o._textHeight=0,o._align=s,o._tint=a,o._fontName=p,o._fontSize=f||Jt.available[p].size,o._text=t,o._maxWidth=l,o._maxLineHeight=0,o._letterSpacing=u,o._anchor=new bo.ObservablePoint(function(){o.dirty=!0},o,0,0),o._roundPixels=Mg.settings.ROUND_PIXELS,o.dirty=!0,o._textureCache={},o}return h(i,"BitmapText"),i.prototype.updateText=function(){for(var t,r=Jt.available[this._fontName],o=this._fontSize/r.size,n=new bo.Point,s=[],a=[],l=[],u=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",p=u.length,f=this._maxWidth*r.size/this._fontSize,c=null,d=0,v=0,m=0,y=-1,g=0,T=0,x=0,I=0,b=0;b<p;b++){var E=u.charCodeAt(b),O=u.charAt(b);if(/(?:\s)/.test(O)&&(y=b,g=d,I++),O==="\r"||O===`
`){a.push(d),l.push(-1),v=Math.max(v,d),++m,++T,n.x=0,n.y+=r.lineHeight,c=null,I=0;continue}var F=r.chars[E];if(!!F){c&&F.kerning[c]&&(n.x+=F.kerning[c]);var A=Dp.pop()||{texture:Ot.Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new bo.Point};A.texture=F.texture,A.line=m,A.charCode=E,A.position.x=n.x+F.xOffset+this._letterSpacing/2,A.position.y=n.y+F.yOffset,A.prevSpaces=I,s.push(A),d=A.position.x+F.texture.orig.width,n.x+=F.xAdvance+this._letterSpacing,x=Math.max(x,F.yOffset+F.texture.height),c=E,y!==-1&&f>0&&n.x>f&&(++T,To.removeItems(s,1+y-T,1+b-y),b=y,y=-1,a.push(g),l.push(s.length>0?s[s.length-1].prevSpaces:0),v=Math.max(v,g),m++,n.x=0,n.y+=r.lineHeight,c=null,I=0)}}var w=u.charAt(u.length-1);w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(d=g),a.push(d),v=Math.max(v,d),l.push(-1));for(var B=[],b=0;b<=m;b++){var U=0;this._align==="right"?U=v-a[b]:this._align==="center"?U=(v-a[b])/2:this._align==="justify"&&(U=l[b]<0?0:(v-a[b])/l[b]),B.push(U)}for(var W=s.length,ie={},M=[],N=this._activePagesMeshData,b=0;b<N.length;b++)Lp.push(N[b]);for(var b=0;b<W;b++){var X=s[b].texture,C=X.baseTexture.uid;if(!ie[C]){var P=Lp.pop();if(!P){var V=new go.MeshGeometry,K=new go.MeshMaterial(Ot.Texture.EMPTY),Q=new go.Mesh(V,K);P={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Q,vertices:null,uvs:null,indices:null}}P.index=0,P.indexCount=0,P.vertexCount=0,P.uvsCount=0,P.total=0;var ne=this._textureCache;ne[C]=ne[C]||new Ot.Texture(X.baseTexture),P.mesh.texture=ne[C],P.mesh.tint=this._tint,M.push(P),ie[C]=P}ie[C].total++}for(var b=0;b<N.length;b++)M.indexOf(N[b])===-1&&this.removeChild(N[b].mesh);for(var b=0;b<M.length;b++)M[b].mesh.parent!==this&&this.addChild(M[b].mesh);this._activePagesMeshData=M;for(var b in ie){var P=ie[b],re=P.total;if(!(((t=P.indices)===null||t===void 0?void 0:t.length)>6*re)||P.vertices.length<go.Mesh.BATCHABLE_SIZE*2)P.vertices=new Float32Array(4*2*re),P.uvs=new Float32Array(4*2*re),P.indices=new Uint16Array(6*re);else for(var me=P.total,de=P.vertices,ve=me*4*2;ve<de.length;ve++)de[ve]=0;P.mesh.size=6*re}for(var b=0;b<W;b++){var O=s[b],be=O.position.x+B[O.line]*(this._align==="justify"?O.prevSpaces:1);this._roundPixels&&(be=Math.round(be));var $=be*o,se=O.position.y*o,X=O.texture,k=ie[X.baseTexture.uid],ce=X.frame,ye=X._uvs,Y=k.index++;k.indices[Y*6+0]=0+Y*4,k.indices[Y*6+1]=1+Y*4,k.indices[Y*6+2]=2+Y*4,k.indices[Y*6+3]=0+Y*4,k.indices[Y*6+4]=2+Y*4,k.indices[Y*6+5]=3+Y*4,k.vertices[Y*8+0]=$,k.vertices[Y*8+1]=se,k.vertices[Y*8+2]=$+ce.width*o,k.vertices[Y*8+3]=se,k.vertices[Y*8+4]=$+ce.width*o,k.vertices[Y*8+5]=se+ce.height*o,k.vertices[Y*8+6]=$,k.vertices[Y*8+7]=se+ce.height*o,k.uvs[Y*8+0]=ye.x0,k.uvs[Y*8+1]=ye.y0,k.uvs[Y*8+2]=ye.x1,k.uvs[Y*8+3]=ye.y1,k.uvs[Y*8+4]=ye.x2,k.uvs[Y*8+5]=ye.y2,k.uvs[Y*8+6]=ye.x3,k.uvs[Y*8+7]=ye.y3}this._textWidth=v*o,this._textHeight=(n.y+r.lineHeight)*o;for(var b in ie){var P=ie[b];if(this.anchor.x!==0||this.anchor.y!==0)for(var je=0,Ct=this._textWidth*this.anchor.x,Nt=this._textHeight*this.anchor.y,cr=0;cr<P.total;cr++)P.vertices[je++]-=Ct,P.vertices[je++]-=Nt,P.vertices[je++]-=Ct,P.vertices[je++]-=Nt,P.vertices[je++]-=Ct,P.vertices[je++]-=Nt,P.vertices[je++]-=Ct,P.vertices[je++]-=Nt;this._maxLineHeight=x*o;var Tl=P.mesh.geometry.getBuffer("aVertexPosition"),xl=P.mesh.geometry.getBuffer("aTextureCoord"),El=P.mesh.geometry.getIndex();Tl.data=P.vertices,xl.data=P.uvs,El.data=P.indices,Tl.update(),xl.update(),El.update()}for(var b=0;b<s.length;b++)Dp.push(s[b])},i.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},i.prototype.getLocalBounds=function(){return this.validate(),e.prototype.getLocalBounds.call(this)},i.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(i.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var r=0;r<this._activePagesMeshData.length;r++)this._activePagesMeshData[r].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!Jt.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"anchor",{get:function(){return this._anchor},set:function(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"text",{get:function(){return this._text},set:function(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),i.prototype.destroy=function(t){var r=this._textureCache;for(var o in r){var n=r[o];n.destroy(),delete r[o]}this._textureCache=null,e.prototype.destroy.call(this,t)},i.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},i}(Fg.Container),Xg=function(){function e(){}return h(e,"BitmapFontLoader"),e.add=function(){Ws.LoaderResource.setExtensionXhrType("fnt",Ws.LoaderResource.XHR_RESPONSE_TYPE.TEXT)},e.use=function(i,t){var r=Up(i.data);if(!r){t();return}for(var o=e.getBaseUrl(this,i),n=r.parse(i.data),s={},a=h(function(m){s[m.metadata.pageFile]=m.texture,Object.keys(s).length===n.page.length&&(i.bitmapFont=Jt.install(n,s,!0),t())},"completed"),l=0;l<n.page.length;++l){var u=n.page[l].file,p=o+u,f=!1;for(var c in this.resources){var d=this.resources[c];if(d.url===p){d.metadata.pageFile=u,d.texture?a(d):d.onAfterMiddleware.add(a),f=!0;break}}if(!f){var v={crossOrigin:i.crossOrigin,loadType:Ws.LoaderResource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},i.metadata.imageMetadata),parentResource:i};this.add(p,v,a)}}},e.getBaseUrl=function(i,t){var r=t.isDataUrl?"":e.dirname(t.url);return t.isDataUrl&&(r==="."&&(r=""),i.baseUrl&&r&&i.baseUrl.charAt(i.baseUrl.length-1)==="/"&&(r+="/")),r=r.replace(i.baseUrl,""),r&&r.charAt(r.length-1)!=="/"&&(r+="/"),r},e.dirname=function(i){var t=i.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return t===i?".":t===""?"/":t},e}();Qt.BitmapFont=Jt;Qt.BitmapFontData=ki;Qt.BitmapFontLoader=Xg;Qt.BitmapText=Hg});var kp=R(Js=>{"use strict";Object.defineProperty(Js,"__esModule",{value:!0});var Gp=ae();var $s=h(function(e,i){return $s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},$s(e,i)},"extendStatics");function jg(e,i){$s(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(jg,"__extends");var Vg=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`,qg=function(e){jg(i,e);function i(t){t===void 0&&(t=1);var r=e.call(this,Gp.defaultVertex,Vg,{uAlpha:1})||this;return r.alpha=t,r}return h(i,"AlphaFilter"),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),i}(Gp.Filter);Js.AlphaFilter=qg});var uf=R(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});var Hp=ae(),Xp=Se();var Qs=h(function(e,i){return Qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},Qs(e,i)},"extendStatics");function jp(e,i){Qs(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(jp,"__extends");var Yg=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function Wg(e,i){var t=Math.ceil(e/2),r=Yg,o="",n;i?n="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":n="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var s=0;s<e;s++){var a=n.replace("%index%",s.toString());a=a.replace("%sampleIndex%",s-(t-1)+".0"),o+=a,o+=`
`}return r=r.replace("%blur%",o),r=r.replace("%size%",e.toString()),r}h(Wg,"generateBlurVertSource");var zg={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Kg=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function Zg(e){for(var i=zg[e],t=i.length,r=Kg,o="",n="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",s,a=0;a<e;a++){var l=n.replace("%index%",a.toString());s=a,a>=t&&(s=e-a-1),l=l.replace("%value%",i[s].toString()),o+=l,o+=`
`}return r=r.replace("%blur%",o),r=r.replace("%size%",e.toString()),r}h(Zg,"generateBlurFragSource");var Vp;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(Vp||(Vp={}));var qp;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(qp||(qp={}));var Yp;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(Yp||(Yp={}));var Wp;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Wp||(Wp={}));var zp;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(zp||(zp={}));var Kp;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(Kp||(Kp={}));var Zp;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Zp||(Zp={}));var $p;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})($p||($p={}));var Jp;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(Jp||(Jp={}));var Qp;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Qp||(Qp={}));var ef;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(ef||(ef={}));var tf;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(tf||(tf={}));var rf;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(rf||(rf={}));var Hi;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Hi||(Hi={}));var of;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(of||(of={}));var nf;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(nf||(nf={}));var sf;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(sf||(sf={}));var af;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(af||(af={}));var lf;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(lf||(lf={}));var ea=function(e){jp(i,e);function i(t,r,o,n,s){r===void 0&&(r=8),o===void 0&&(o=4),n===void 0&&(n=Xp.settings.FILTER_RESOLUTION),s===void 0&&(s=5);var a=this,l=Wg(s,t),u=Zg(s);return a=e.call(this,l,u)||this,a.horizontal=t,a.resolution=n,a._quality=0,a.quality=o,a.blur=r,a}return h(i,"BlurFilterPass"),i.prototype.apply=function(t,r,o,n){if(o?this.horizontal?this.uniforms.strength=1/o.width*(o.width/r.width):this.uniforms.strength=1/o.height*(o.height/r.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/r.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,r,o,n);else{var s=t.getFilterTexture(),a=t.renderer,l=r,u=s;this.state.blend=!1,t.applyFilter(this,l,u,Hi.CLEAR);for(var p=1;p<this.passes-1;p++){t.bindAndClear(l,Hi.BLIT),this.uniforms.uSampler=u;var f=u;u=l,l=f,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,u,o,n),t.returnFilterTexture(s)}},Object.defineProperty(i.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+Math.abs(t)*2,this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),i}(Hp.Filter),$g=function(e){jp(i,e);function i(t,r,o,n){t===void 0&&(t=8),r===void 0&&(r=4),o===void 0&&(o=Xp.settings.FILTER_RESOLUTION),n===void 0&&(n=5);var s=e.call(this)||this;return s.blurXFilter=new ea(!0,t,r,o,n),s.blurYFilter=new ea(!1,t,r,o,n),s.resolution=o,s.quality=r,s.blur=t,s.repeatEdgePixels=!1,s}return h(i,"BlurFilter"),i.prototype.apply=function(t,r,o,n){var s=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(s&&a){var l=t.getFilterTexture();this.blurXFilter.apply(t,r,l,Hi.CLEAR),this.blurYFilter.apply(t,l,o,n),t.returnFilterTexture(l)}else a?this.blurYFilter.apply(t,r,o,n):this.blurXFilter.apply(t,r,o,n)},i.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2},Object.defineProperty(i.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),i}(Hp.Filter);Eo.BlurFilter=$g;Eo.BlurFilterPass=ea});var pf=R(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});var hf=ae();var ta=h(function(e,i){return ta=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},ta(e,i)},"extendStatics");function Jg(e,i){ta(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(Jg,"__extends");var Qg=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`,ia=function(e){Jg(i,e);function i(){var t=this,r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return t=e.call(this,hf.defaultFilterVertex,Qg,r)||this,t.alpha=1,t}return h(i,"ColorMatrixFilter"),i.prototype._loadMatrix=function(t,r){r===void 0&&(r=!1);var o=t;r&&(this._multiply(o,this.uniforms.m,t),o=this._colorMatrix(o)),this.uniforms.m=o},i.prototype._multiply=function(t,r,o){return t[0]=r[0]*o[0]+r[1]*o[5]+r[2]*o[10]+r[3]*o[15],t[1]=r[0]*o[1]+r[1]*o[6]+r[2]*o[11]+r[3]*o[16],t[2]=r[0]*o[2]+r[1]*o[7]+r[2]*o[12]+r[3]*o[17],t[3]=r[0]*o[3]+r[1]*o[8]+r[2]*o[13]+r[3]*o[18],t[4]=r[0]*o[4]+r[1]*o[9]+r[2]*o[14]+r[3]*o[19]+r[4],t[5]=r[5]*o[0]+r[6]*o[5]+r[7]*o[10]+r[8]*o[15],t[6]=r[5]*o[1]+r[6]*o[6]+r[7]*o[11]+r[8]*o[16],t[7]=r[5]*o[2]+r[6]*o[7]+r[7]*o[12]+r[8]*o[17],t[8]=r[5]*o[3]+r[6]*o[8]+r[7]*o[13]+r[8]*o[18],t[9]=r[5]*o[4]+r[6]*o[9]+r[7]*o[14]+r[8]*o[19]+r[9],t[10]=r[10]*o[0]+r[11]*o[5]+r[12]*o[10]+r[13]*o[15],t[11]=r[10]*o[1]+r[11]*o[6]+r[12]*o[11]+r[13]*o[16],t[12]=r[10]*o[2]+r[11]*o[7]+r[12]*o[12]+r[13]*o[17],t[13]=r[10]*o[3]+r[11]*o[8]+r[12]*o[13]+r[13]*o[18],t[14]=r[10]*o[4]+r[11]*o[9]+r[12]*o[14]+r[13]*o[19]+r[14],t[15]=r[15]*o[0]+r[16]*o[5]+r[17]*o[10]+r[18]*o[15],t[16]=r[15]*o[1]+r[16]*o[6]+r[17]*o[11]+r[18]*o[16],t[17]=r[15]*o[2]+r[16]*o[7]+r[17]*o[12]+r[18]*o[17],t[18]=r[15]*o[3]+r[16]*o[8]+r[17]*o[13]+r[18]*o[18],t[19]=r[15]*o[4]+r[16]*o[9]+r[17]*o[14]+r[18]*o[19]+r[19],t},i.prototype._colorMatrix=function(t){var r=new Float32Array(t);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r},i.prototype.brightness=function(t,r){var o=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(o,r)},i.prototype.tint=function(t,r){var o=t>>16&255,n=t>>8&255,s=t&255,a=[o/255,0,0,0,0,0,n/255,0,0,0,0,0,s/255,0,0,0,0,0,1,0];this._loadMatrix(a,r)},i.prototype.greyscale=function(t,r){var o=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(o,r)},i.prototype.blackAndWhite=function(t){var r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.hue=function(t,r){t=(t||0)/180*Math.PI;var o=Math.cos(t),n=Math.sin(t),s=Math.sqrt,a=1/3,l=s(a),u=o+(1-o)*a,p=a*(1-o)-l*n,f=a*(1-o)+l*n,c=a*(1-o)+l*n,d=o+a*(1-o),v=a*(1-o)-l*n,m=a*(1-o)-l*n,y=a*(1-o)+l*n,g=o+a*(1-o),T=[u,p,f,0,0,c,d,v,0,0,m,y,g,0,0,0,0,0,1,0];this._loadMatrix(T,r)},i.prototype.contrast=function(t,r){var o=(t||0)+1,n=-.5*(o-1),s=[o,0,0,0,n,0,o,0,0,n,0,0,o,0,n,0,0,0,1,0];this._loadMatrix(s,r)},i.prototype.saturate=function(t,r){t===void 0&&(t=0);var o=t*2/3+1,n=(o-1)*-.5,s=[o,n,n,0,0,n,o,n,0,0,n,n,o,0,0,0,0,0,1,0];this._loadMatrix(s,r)},i.prototype.desaturate=function(){this.saturate(-1)},i.prototype.negative=function(t){var r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.sepia=function(t){var r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.technicolor=function(t){var r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.polaroid=function(t){var r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.toBGR=function(t){var r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.kodachrome=function(t){var r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.browni=function(t){var r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.vintage=function(t){var r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.colorTone=function(t,r,o,n,s){t=t||.2,r=r||.15,o=o||16770432,n=n||3375104;var a=(o>>16&255)/255,l=(o>>8&255)/255,u=(o&255)/255,p=(n>>16&255)/255,f=(n>>8&255)/255,c=(n&255)/255,d=[.3,.59,.11,0,0,a,l,u,t,0,p,f,c,r,0,a-p,l-f,u-c,0,0];this._loadMatrix(d,s)},i.prototype.night=function(t,r){t=t||.1;var o=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(o,r)},i.prototype.predator=function(t,r){var o=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(o,r)},i.prototype.lsd=function(t){var r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,t)},i.prototype.reset=function(){var t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)},Object.defineProperty(i.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),i}(hf.Filter);ia.prototype.grayscale=ia.prototype.greyscale;ra.ColorMatrixFilter=ia});var cf=R(na=>{"use strict";Object.defineProperty(na,"__esModule",{value:!0});var e1=ae(),ff=_e();var oa=h(function(e,i){return oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},oa(e,i)},"extendStatics");function t1(e,i){oa(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(t1,"__extends");var i1=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,r1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`,o1=function(e){t1(i,e);function i(t,r){var o=this,n=new ff.Matrix;return t.renderable=!1,o=e.call(this,r1,i1,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this,o.maskSprite=t,o.maskMatrix=n,r==null&&(r=20),o.scale=new ff.Point(r,r),o}return h(i,"DisplacementFilter"),i.prototype.apply=function(t,r,o,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var s=this.maskSprite.worldTransform,a=Math.sqrt(s.a*s.a+s.b*s.b),l=Math.sqrt(s.c*s.c+s.d*s.d);a!==0&&l!==0&&(this.uniforms.rotation[0]=s.a/a,this.uniforms.rotation[1]=s.b/a,this.uniforms.rotation[2]=s.c/l,this.uniforms.rotation[3]=s.d/l),t.applyFilter(this,r,o,n)},Object.defineProperty(i.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),i}(e1.Filter);na.DisplacementFilter=o1});var df=R(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});var n1=ae();var sa=h(function(e,i){return sa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},sa(e,i)},"extendStatics");function s1(e,i){sa(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(s1,"__extends");var a1=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`,l1=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,u1=function(e){s1(i,e);function i(){return e.call(this,a1,l1)||this}return h(i,"FXAAFilter"),i}(n1.Filter);aa.FXAAFilter=u1});var mf=R(ua=>{"use strict";Object.defineProperty(ua,"__esModule",{value:!0});var vf=ae();var la=h(function(e,i){return la=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},la(e,i)},"extendStatics");function h1(e,i){la(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(h1,"__extends");var p1=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`,f1=function(e){h1(i,e);function i(t,r){t===void 0&&(t=.5),r===void 0&&(r=Math.random());var o=e.call(this,vf.defaultFilterVertex,p1,{uNoise:0,uSeed:0})||this;return o.noise=t,o.seed=r,o}return h(i,"NoiseFilter"),Object.defineProperty(i.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),i}(vf.Filter);ua.NoiseFilter=f1});var kf=R(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});var nt=ae(),yf=St(),Ce=Ae(),c1=_e(),_f=ge(),bf=Se();var gf;(function(e){e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2"})(gf||(gf={}));var Tf;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS"})(Tf||(Tf={}));var xf;(function(e){e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL"})(xf||(xf={}));var Ef;(function(e){e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR"})(Ef||(Ef={}));var Rf;(function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(Rf||(Rf={}));var If;(function(e){e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL"})(If||(If={}));var Af;(function(e){e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"})(Af||(Af={}));var Pf;(function(e){e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT"})(Pf||(Pf={}));var wf;(function(e){e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT"})(wf||(wf={}));var Sf;(function(e){e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR"})(Sf||(Sf={}));var Of;(function(e){e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(Of||(Of={}));var Cf;(function(e){e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL"})(Cf||(Cf={}));var Nf;(function(e){e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA"})(Nf||(Nf={}));var Mf;(function(e){e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT"})(Mf||(Mf={}));var Ff;(function(e){e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL"})(Ff||(Ff={}));var Uf;(function(e){e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp"})(Uf||(Uf={}));var Lf;(function(e){e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE"})(Lf||(Lf={}));var ha;(function(e){e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH"})(ha||(ha={}));var Df;(function(e){e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"})(Df||(Df={}));var Bf=new c1.Matrix;Ce.DisplayObject.prototype._cacheAsBitmap=!1;Ce.DisplayObject.prototype._cacheData=null;Ce.DisplayObject.prototype._cacheAsBitmapResolution=null;Ce.DisplayObject.prototype._cacheAsBitmapMultisample=ha.NONE;var Gf=function(){function e(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}return h(e,"CacheData"),e}();Object.defineProperties(Ce.DisplayObject.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){if(this._cacheAsBitmap!==e){this._cacheAsBitmap=e;var i;e?(this._cacheData||(this._cacheData=new Gf),i=this._cacheData,i.originalRender=this.render,i.originalRenderCanvas=this.renderCanvas,i.originalUpdateTransform=this.updateTransform,i.originalCalculateBounds=this.calculateBounds,i.originalGetLocalBounds=this.getLocalBounds,i.originalDestroy=this.destroy,i.originalContainsPoint=this.containsPoint,i.originalMask=this._mask,i.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(i=this._cacheData,i.sprite&&this._destroyCachedDisplayObject(),this.render=i.originalRender,this.renderCanvas=i.originalRenderCanvas,this.calculateBounds=i.originalCalculateBounds,this.getLocalBounds=i.originalGetLocalBounds,this.destroy=i.originalDestroy,this.updateTransform=i.originalUpdateTransform,this.containsPoint=i.originalContainsPoint,this._mask=i.originalMask,this.filterArea=i.originalFilterArea)}}}});Ce.DisplayObject.prototype._renderCached=h(function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(i),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(i))},"_renderCached");Ce.DisplayObject.prototype._initCachedDisplayObject=h(function(i){var t;if(!(this._cacheData&&this._cacheData.sprite)){var r=this.alpha;this.alpha=1,i.batch.flush();var o=this.getLocalBounds(null,!0).clone();if(this.filters){var n=this.filters[0].padding;o.pad(n)}o.ceil(bf.settings.RESOLUTION);var s=i.renderTexture.current,a=i.renderTexture.sourceFrame.clone(),l=i.renderTexture.destinationFrame.clone(),u=i.projection.transform,p=nt.RenderTexture.create({width:o.width,height:o.height,resolution:this.cacheAsBitmapResolution||i.resolution,multisample:(t=this.cacheAsBitmapMultisample)!==null&&t!==void 0?t:i.multisample}),f="cacheAsBitmap_"+_f.uid();this._cacheData.textureCacheId=f,nt.BaseTexture.addToCache(p.baseTexture,f),nt.Texture.addToCache(p,f);var c=this.transform.localTransform.copyTo(Bf).invert().translate(-o.x,-o.y);this.render=this._cacheData.originalRender,i.render(this,{renderTexture:p,clear:!0,transform:c,skipUpdateTransform:!1}),i.framebuffer.blit(),i.projection.transform=u,i.renderTexture.bind(s,a,l),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var d=new yf.Sprite(p);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(o.x/o.width),d.anchor.y=-(o.y/o.height),d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},"_initCachedDisplayObject");Ce.DisplayObject.prototype._renderCachedCanvas=h(function(i){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(i),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(i))},"_renderCachedCanvas");Ce.DisplayObject.prototype._initCachedDisplayObjectCanvas=h(function(i){if(!(this._cacheData&&this._cacheData.sprite)){var t=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var o=i.context,n=i._projTransform;t.ceil(bf.settings.RESOLUTION);var s=nt.RenderTexture.create({width:t.width,height:t.height}),a="cacheAsBitmap_"+_f.uid();this._cacheData.textureCacheId=a,nt.BaseTexture.addToCache(s.baseTexture,a),nt.Texture.addToCache(s,a);var l=Bf;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=t.x,l.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,i.render(this,{renderTexture:s,clear:!0,transform:l,skipUpdateTransform:!1}),i.context=o,i._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var u=new yf.Sprite(s);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(t.x/t.width),u.anchor.y=-(t.y/t.height),u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=i._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},"_initCachedDisplayObjectCanvas");Ce.DisplayObject.prototype._calculateCachedBounds=h(function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},"_calculateCachedBounds");Ce.DisplayObject.prototype._getCachedLocalBounds=h(function(){return this._cacheData.sprite.getLocalBounds(null)},"_getCachedLocalBounds");Ce.DisplayObject.prototype._destroyCachedDisplayObject=h(function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,nt.BaseTexture.removeFromCache(this._cacheData.textureCacheId),nt.Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},"_destroyCachedDisplayObject");Ce.DisplayObject.prototype._cacheAsBitmapDestroy=h(function(i){this.cacheAsBitmap=!1,this.destroy(i)},"_cacheAsBitmapDestroy");pa.CacheData=Gf});var Xf=R(()=>{"use strict";var Hf=Ae();Hf.DisplayObject.prototype.name=null;Hf.Container.prototype.getChildByName=h(function(i,t){for(var r=0,o=this.children.length;r<o;r++)if(this.children[r].name===i)return this.children[r];if(t)for(var r=0,o=this.children.length;r<o;r++){var n=this.children[r];if(!!n.getChildByName){var s=this.children[r].getChildByName(i,!0);if(s)return s}}return null},"getChildByName")});var jf=R(()=>{"use strict";var d1=Ae(),v1=_e();d1.DisplayObject.prototype.getGlobalPosition=h(function(i,t){return i===void 0&&(i=new v1.Point),t===void 0&&(t=!1),this.parent?this.parent.toGlobal(this.position,i,t):(i.x=this.position.x,i.y=this.position.y),i},"getGlobalPosition")});var Wf=R(st=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var et=_o(),m1=Le(),fa=ae();var ca=h(function(e,i){return ca=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},ca(e,i)},"extendStatics");function ei(e,i){ca(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(ei,"__extends");var Vf=function(e){ei(i,e);function i(t,r,o,n){t===void 0&&(t=100),r===void 0&&(r=100),o===void 0&&(o=10),n===void 0&&(n=10);var s=e.call(this)||this;return s.segWidth=o,s.segHeight=n,s.width=t,s.height=r,s.build(),s}return h(i,"PlaneGeometry"),i.prototype.build=function(){for(var t=this.segWidth*this.segHeight,r=[],o=[],n=[],s=this.segWidth-1,a=this.segHeight-1,l=this.width/s,u=this.height/a,p=0;p<t;p++){var f=p%this.segWidth,c=p/this.segWidth|0;r.push(f*l,c*u),o.push(f/s,c/a)}for(var d=s*a,p=0;p<d;p++){var v=p%s,m=p/s|0,y=m*this.segWidth+v,g=m*this.segWidth+v+1,T=(m+1)*this.segWidth+v,x=(m+1)*this.segWidth+v+1;n.push(y,g,T,g,x,T)}this.buffers[0].data=new Float32Array(r),this.buffers[1].data=new Float32Array(o),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},i}(et.MeshGeometry),qf=function(e){ei(i,e);function i(t,r,o){t===void 0&&(t=200),o===void 0&&(o=0);var n=e.call(this,new Float32Array(r.length*4),new Float32Array(r.length*4),new Uint16Array((r.length-1)*6))||this;return n.points=r,n._width=t,n.textureScale=o,n.build(),n}return h(i,"RopeGeometry"),Object.defineProperty(i.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),i.prototype.build=function(){var t=this.points;if(!!t){var r=this.getBuffer("aVertexPosition"),o=this.getBuffer("aTextureCoord"),n=this.getIndex();if(!(t.length<1)){r.data.length/4!==t.length&&(r.data=new Float32Array(t.length*4),o.data=new Float32Array(t.length*4),n.data=new Uint16Array((t.length-1)*6));var s=o.data,a=n.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;for(var l=0,u=t[0],p=this._width*this.textureScale,f=t.length,c=0;c<f;c++){var d=c*4;if(this.textureScale>0){var v=u.x-t[c].x,m=u.y-t[c].y,y=Math.sqrt(v*v+m*m);u=t[c],l+=y/p}else l=c/(f-1);s[d]=l,s[d+1]=0,s[d+2]=l,s[d+3]=1}for(var g=0,c=0;c<f-1;c++){var d=c*2;a[g++]=d,a[g++]=d+1,a[g++]=d+2,a[g++]=d+2,a[g++]=d+1,a[g++]=d+3}o.update(),n.update(),this.updateVertices()}}},i.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var r=t[0],o,n=0,s=0,a=this.buffers[0].data,l=t.length,u=0;u<l;u++){var p=t[u],f=u*4;u<t.length-1?o=t[u+1]:o=p,s=-(o.x-r.x),n=o.y-r.y;var c=Math.sqrt(n*n+s*s),d=this.textureScale>0?this.textureScale*this._width/2:this._width/2;n/=c,s/=c,n*=d,s*=d,a[f]=p.x+n,a[f+1]=p.y+s,a[f+2]=p.x-n,a[f+3]=p.y-s,r=p}this.buffers[0].update()}},i.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},i}(et.MeshGeometry),y1=function(e){ei(i,e);function i(t,r,o){o===void 0&&(o=0);var n=this,s=new qf(t.height,r,o),a=new et.MeshMaterial(t);return o>0&&(t.baseTexture.wrapMode=m1.WRAP_MODES.REPEAT),n=e.call(this,s,a)||this,n.autoUpdate=!0,n}return h(i,"SimpleRope"),i.prototype._render=function(t){var r=this.geometry;(this.autoUpdate||r._width!==this.shader.texture.height)&&(r._width=this.shader.texture.height,r.update()),e.prototype._render.call(this,t)},i}(et.Mesh),Yf=function(e){ei(i,e);function i(t,r,o){var n=this,s=new Vf(t.width,t.height,r,o),a=new et.MeshMaterial(fa.Texture.WHITE);return n=e.call(this,s,a)||this,n.texture=t,n.autoResize=!0,n}return h(i,"SimplePlane"),i.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,r=this.shader.texture,o=r.width,n=r.height;this.autoResize&&(t.width!==o||t.height!==n)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(i.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),e.prototype._render.call(this,t)},i.prototype.destroy=function(t){this.shader.texture.off("update",this.textureUpdated,this),e.prototype.destroy.call(this,t)},i}(et.Mesh),_1=function(e){ei(i,e);function i(t,r,o,n,s){t===void 0&&(t=fa.Texture.EMPTY);var a=this,l=new et.MeshGeometry(r,o,n);l.getBuffer("aVertexPosition").static=!1;var u=new et.MeshMaterial(t);return a=e.call(this,l,u,null,s)||this,a.autoUpdate=!0,a}return h(i,"SimpleMesh"),Object.defineProperty(i.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),i.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},i}(et.Mesh),Ro=10,b1=function(e){ei(i,e);function i(t,r,o,n,s){r===void 0&&(r=Ro),o===void 0&&(o=Ro),n===void 0&&(n=Ro),s===void 0&&(s=Ro);var a=e.call(this,fa.Texture.WHITE,4,4)||this;return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=r,a._rightWidth=n,a._topHeight=o,a._bottomHeight=s,a.texture=t,a}return h(i,"NineSlicePlane"),i.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(i.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),i.prototype.updateHorizontalVertices=function(){var t=this.vertices,r=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},i.prototype.updateVerticalVertices=function(){var t=this.vertices,r=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},i.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,r=this._width>t?1:this._width/t,o=this._topHeight+this._bottomHeight,n=this._height>o?1:this._height/o,s=Math.min(r,n);return s},Object.defineProperty(i.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),i.prototype._refresh=function(){var t=this.texture,r=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var o=1/this._origWidth,n=1/this._origHeight;r[0]=r[8]=r[16]=r[24]=0,r[1]=r[3]=r[5]=r[7]=0,r[6]=r[14]=r[22]=r[30]=1,r[25]=r[27]=r[29]=r[31]=1,r[2]=r[10]=r[18]=r[26]=o*this._leftWidth,r[4]=r[12]=r[20]=r[28]=1-o*this._rightWidth,r[9]=r[11]=r[13]=r[15]=n*this._topHeight,r[17]=r[19]=r[21]=r[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},i}(Yf);st.NineSlicePlane=b1;st.PlaneGeometry=Vf;st.RopeGeometry=qf;st.SimpleMesh=_1;st.SimplePlane=Yf;st.SimpleRope=y1});var zf=R(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});var Io=ae(),g1=St(),Xi=Ht();var da=h(function(e,i){return da=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])},da(e,i)},"extendStatics");function T1(e,i){da(e,i);function t(){this.constructor=e}h(t,"__"),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}h(T1,"__extends");var x1=function(e){T1(i,e);function i(t,r){r===void 0&&(r=!0);var o=e.call(this,t[0]instanceof Io.Texture?t[0]:t[0].texture)||this;return o._textures=null,o._durations=null,o._autoUpdate=r,o._isConnectedToTicker=!1,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o._playing=!1,o._previousFrame=null,o.textures=t,o}return h(i,"AnimatedSprite"),i.prototype.stop=function(){!this._playing||(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Xi.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1))},i.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Xi.Ticker.shared.add(this.update,this,Xi.UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))},i.prototype.gotoAndStop=function(t){this.stop();var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(t){var r=this.currentFrame;this._currentTime=t,r!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(t){if(!!this._playing){var r=this.animationSpeed*t,o=this.currentFrame;if(this._durations!==null){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=r/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];var s=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=r;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):o!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<o?this.onLoop():this.animationSpeed<0&&this.currentFrame>o&&this.onLoop()),this.updateTexture())}},i.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},i.prototype.destroy=function(t){this.stop(),e.prototype.destroy.call(this,t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},i.fromFrames=function(t){for(var r=[],o=0;o<t.length;++o)r.push(Io.Texture.from(t[o]));return new i(r)},i.fromImages=function(t){for(var r=[],o=0;o<t.length;++o)r.push(Io.Texture.from(t[o]));return new i(r)},Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof Io.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var r=0;r<t.length;r++)this._textures.push(t[r].texture),this._durations.push(t[r].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Xi.Ticker.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Xi.Ticker.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),i}(g1.Sprite);va.AnimatedSprite=x1});var Po=R(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});Ll();var E1=ge(),ma=Hu(),ya=Yu(),Ao=Gh(),We=ae(),_a=Vh(),at=Pi(),ji=np(),ba=lp(),ga=Ip(),Ta=Pp(),xa=Cp(),Ea=Bp(),Ra=Ht(),R1=kp(),Kf=uf(),I1=pf(),A1=cf(),P1=df(),w1=mf();kf();Xf();jf();var Zf=Le(),$f=Ae(),Jf=Os(),Qf=_e(),ec=_o(),tc=Wf(),ic=An(),rc=St(),oc=zf(),nc=lo(),sc=Se();We.Renderer.registerPlugin("accessibility",ma.AccessibilityManager);We.Renderer.registerPlugin("extract",_a.Extract);We.Renderer.registerPlugin("interaction",ya.InteractionManager);We.Renderer.registerPlugin("particle",ba.ParticleRenderer);We.Renderer.registerPlugin("prepare",ga.Prepare);We.Renderer.registerPlugin("batch",We.BatchRenderer);We.Renderer.registerPlugin("tilingSprite",xa.TilingSpriteRenderer);at.Loader.registerPlugin(Ea.BitmapFontLoader);at.Loader.registerPlugin(ji.CompressedTextureLoader);at.Loader.registerPlugin(ji.DDSLoader);at.Loader.registerPlugin(ji.KTXLoader);at.Loader.registerPlugin(Ta.SpritesheetLoader);Ao.Application.registerPlugin(Ra.TickerPlugin);Ao.Application.registerPlugin(at.AppLoaderPlugin);var S1="6.1.3",O1={AlphaFilter:R1.AlphaFilter,BlurFilter:Kf.BlurFilter,BlurFilterPass:Kf.BlurFilterPass,ColorMatrixFilter:I1.ColorMatrixFilter,DisplacementFilter:A1.DisplacementFilter,FXAAFilter:P1.FXAAFilter,NoiseFilter:w1.NoiseFilter};Object.keys(ma).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return ma[e]}})});Object.keys(ya).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return ya[e]}})});Object.keys(Ao).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return Ao[e]}})});Object.keys(We).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return We[e]}})});Object.keys(_a).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return _a[e]}})});Object.keys(at).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return at[e]}})});Object.keys(ji).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return ji[e]}})});Object.keys(ba).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return ba[e]}})});Object.keys(ga).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return ga[e]}})});Object.keys(Ta).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return Ta[e]}})});Object.keys(xa).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return xa[e]}})});Object.keys(Ea).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return Ea[e]}})});Object.keys(Ra).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return Ra[e]}})});Object.keys(Zf).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return Zf[e]}})});Object.keys($f).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return $f[e]}})});Object.keys(Jf).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return Jf[e]}})});Object.keys(Qf).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return Qf[e]}})});Object.keys(ec).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return ec[e]}})});Object.keys(tc).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return tc[e]}})});Object.keys(ic).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return ic[e]}})});Object.keys(rc).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return rc[e]}})});Object.keys(oc).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return oc[e]}})});Object.keys(nc).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return nc[e]}})});Object.keys(sc).forEach(function(e){e!=="default"&&Object.defineProperty(J,e,{enumerable:!0,get:function(){return sc[e]}})});J.utils=E1;J.VERSION=S1;J.filters=O1});var lt=R(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});var C1=new Map;Ia.default=C1});var ac=R(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});var N1="^[A-Za-z0-9_\\-/]+$";Aa.default=N1});var ti=R(Vi=>{"use strict";var lc=Vi&&Vi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Vi,"__esModule",{value:!0});var Pa=lc(lt()),M1=lc(ac()),wa=class{constructor(i){if(this.slug=i,new RegExp(M1.default,"gu").test(this.slug)===!1)throw new Error(`${this.constructor.name} "${this.slug}" has an invalid slug.`);if(Pa.default.has(this.constructor.name)===!1&&Pa.default.set(this.constructor.name,new Map),this.list=Pa.default.get(this.constructor.name),this.list.has(this.slug))throw new Error(`${this.constructor.name} "${this.slug}" already exists.`);this.list.set(this.slug,this)}getSlug(){return this.slug}};h(wa,"Definable");Vi.default=wa});var wo=R(qi=>{"use strict";var F1=qi&&qi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(qi,"__esModule",{value:!0});var U1=Po(),L1=F1(ti()),Sa=class extends L1.default{constructor(i){super(i);this.isLoaded=!1,this.loader=new U1.Loader,this.loader.add(this.getSRC()).load(()=>{this.isLoaded=!0})}getBaseTexture(){let i=this.loader.resources[this.getSRC()].texture;return typeof i=="undefined"?null:i.baseTexture}getIsLoaded(){return this.isLoaded}getLoader(){return this.loader}getSRC(){return`./images/${this.slug}.png`}};h(Sa,"ImageSource");qi.default=Sa});var Ca=R(Oa=>{"use strict";Object.defineProperty(Oa,"__esModule",{value:!0});var D1=16;Oa.default=D1});var uc=R((V2,B1)=>{B1.exports={columns:12,image:"../../../images/tilesheets/test.png",imageheight:96,imagewidth:192,margin:0,name:"test",spacing:0,tilecount:72,tiledversion:"1.7.2",tileheight:16,tiles:[{id:0,properties:[{name:"collision",type:"bool",value:!0}]},{id:1,properties:[{name:"collision",type:"bool",value:!0}]},{id:2,properties:[{name:"collision",type:"bool",value:!0}]},{id:3,properties:[{name:"collision",type:"bool",value:!0}]},{id:4,properties:[{name:"collision",type:"bool",value:!0}]},{id:5,properties:[{name:"collision",type:"bool",value:!0}]},{id:6,properties:[{name:"collision",type:"bool",value:!0}]},{id:7,properties:[{name:"collision",type:"bool",value:!0}]},{id:8,properties:[{name:"collision",type:"bool",value:!0}]},{id:9,properties:[{name:"collision",type:"bool",value:!0}]},{id:10,properties:[{name:"collision",type:"bool",value:!0}]},{id:11,properties:[{name:"collision",type:"bool",value:!0}]},{id:12,properties:[{name:"collision",type:"bool",value:!0}]},{id:13,properties:[{name:"collision",type:"bool",value:!0}]},{id:14,properties:[{name:"collision",type:"bool",value:!0}]},{id:15,properties:[{name:"collision",type:"bool",value:!0}]},{id:16,properties:[{name:"collision",type:"bool",value:!1}]},{id:17,properties:[{name:"collision",type:"bool",value:!0}]},{id:18,properties:[{name:"collision",type:"bool",value:!0}]},{id:19,properties:[{name:"collision",type:"bool",value:!0}]},{id:20,properties:[{name:"collision",type:"bool",value:!0}]},{id:21,properties:[{name:"collision",type:"bool",value:!0}]},{id:22,properties:[{name:"collision",type:"bool",value:!1}]},{id:23,properties:[{name:"collision",type:"bool",value:!0}]},{id:24,properties:[{name:"collision",type:"bool",value:!0}]},{id:25,properties:[{name:"collision",type:"bool",value:!0}]},{id:26,properties:[{name:"collision",type:"bool",value:!0}]},{id:27,properties:[{name:"collision",type:"bool",value:!0}]},{id:28,properties:[{name:"collision",type:"bool",value:!0}]},{id:29,properties:[{name:"collision",type:"bool",value:!0}]},{id:30,properties:[{name:"collision",type:"bool",value:!0}]},{id:31,properties:[{name:"collision",type:"bool",value:!0}]},{id:32,properties:[{name:"collision",type:"bool",value:!0}]},{id:33,properties:[{name:"collision",type:"bool",value:!0}]},{id:34,properties:[{name:"collision",type:"bool",value:!0}]},{id:35,properties:[{name:"collision",type:"bool",value:!0}]},{id:36,properties:[{name:"collision",type:"bool",value:!0}]},{id:37,properties:[{name:"collision",type:"bool",value:!0}]},{id:38,properties:[{name:"collision",type:"bool",value:!0}]},{id:39,properties:[{name:"collision",type:"bool",value:!0}]},{id:40,properties:[{name:"collision",type:"bool",value:!0}]},{id:41,properties:[{name:"collision",type:"bool",value:!1}]},{id:42,properties:[{name:"collision",type:"bool",value:!0}]},{id:43,properties:[{name:"collision",type:"bool",value:!0}]},{id:44,properties:[{name:"collision",type:"bool",value:!0}]},{id:45,properties:[{name:"collision",type:"bool",value:!0}]},{id:46,properties:[{name:"collision",type:"bool",value:!0}]},{id:47,properties:[{name:"collision",type:"bool",value:!1}]},{id:48,properties:[{name:"collision",type:"bool",value:!1}]},{id:49,properties:[{name:"collision",type:"bool",value:!1}]},{id:50,properties:[{name:"collision",type:"bool",value:!1}]},{id:51,properties:[{name:"collision",type:"bool",value:!0}]},{id:52,properties:[{name:"collision",type:"bool",value:!1}]},{id:53,properties:[{name:"collision",type:"bool",value:!1}]},{id:54,properties:[{name:"collision",type:"bool",value:!1}]},{id:55,properties:[{name:"collision",type:"bool",value:!1}]},{id:56,properties:[{name:"collision",type:"bool",value:!1}]},{id:57,properties:[{name:"collision",type:"bool",value:!0}]},{id:58,properties:[{name:"collision",type:"bool",value:!1}]},{id:59,properties:[{name:"collision",type:"bool",value:!1}]},{id:60,properties:[{name:"collision",type:"bool",value:!1}]},{id:61,properties:[{name:"collision",type:"bool",value:!1}]},{id:62,properties:[{name:"collision",type:"bool",value:!1}]},{id:63,properties:[{name:"collision",type:"bool",value:!0}]},{id:64,properties:[{name:"collision",type:"bool",value:!1}]},{id:65,properties:[{name:"collision",type:"bool",value:!1}]},{id:66,properties:[{name:"collision",type:"bool",value:!1}]},{id:67,properties:[{name:"collision",type:"bool",value:!1}]},{id:68,properties:[{name:"collision",type:"bool",value:!1}]},{id:69,properties:[{name:"collision",type:"bool",value:!0}]},{id:70,properties:[{name:"collision",type:"bool",value:!1}]},{id:71,properties:[{name:"collision",type:"bool",value:!1}]}],tilewidth:16,type:"tileset",version:"1.6"}});var hc=R((q2,G1)=>{G1.exports={columns:30,image:"../../../images/tilesheets/wall.png",imageheight:711,imagewidth:480,margin:0,name:"wall",spacing:0,tilecount:1320,tiledversion:"1.7.2",tileheight:16,tiles:[{id:0,properties:[{name:"collision",type:"bool",value:!1}]},{id:1,properties:[{name:"collision",type:"bool",value:!1}]},{id:2,properties:[{name:"collision",type:"bool",value:!1}]},{id:3,properties:[{name:"collision",type:"bool",value:!1}]},{id:4,properties:[{name:"collision",type:"bool",value:!1}]},{id:5,properties:[{name:"collision",type:"bool",value:!1}]},{id:6,properties:[{name:"collision",type:"bool",value:!1}]},{id:7,properties:[{name:"collision",type:"bool",value:!1}]},{id:8,properties:[{name:"collision",type:"bool",value:!1}]},{id:9,properties:[{name:"collision",type:"bool",value:!1}]},{id:10,properties:[{name:"collision",type:"bool",value:!1}]},{id:11,properties:[{name:"collision",type:"bool",value:!1}]},{id:12,properties:[{name:"collision",type:"bool",value:!1}]},{id:13,properties:[{name:"collision",type:"bool",value:!1}]},{id:14,properties:[{name:"collision",type:"bool",value:!1}]},{id:15,properties:[{name:"collision",type:"bool",value:!1}]},{id:16,properties:[{name:"collision",type:"bool",value:!1}]},{id:17,properties:[{name:"collision",type:"bool",value:!1}]},{id:18,properties:[{name:"collision",type:"bool",value:!1}]},{id:19,properties:[{name:"collision",type:"bool",value:!1}]},{id:20,properties:[{name:"collision",type:"bool",value:!1}]},{id:21,properties:[{name:"collision",type:"bool",value:!1}]},{id:22,properties:[{name:"collision",type:"bool",value:!1}]},{id:23,properties:[{name:"collision",type:"bool",value:!1}]},{id:24,properties:[{name:"collision",type:"bool",value:!1}]},{id:25,properties:[{name:"collision",type:"bool",value:!1}]},{id:26,properties:[{name:"collision",type:"bool",value:!1}]},{id:27,properties:[{name:"collision",type:"bool",value:!1}]},{id:28,properties:[{name:"collision",type:"bool",value:!1}]},{id:29,properties:[{name:"collision",type:"bool",value:!1}]},{id:30,properties:[{name:"collision",type:"bool",value:!1}]},{id:31,properties:[{name:"collision",type:"bool",value:!1}]},{id:32,properties:[{name:"collision",type:"bool",value:!1}]},{id:33,properties:[{name:"collision",type:"bool",value:!1}]},{id:34,properties:[{name:"collision",type:"bool",value:!1}]},{id:35,properties:[{name:"collision",type:"bool",value:!1}]},{id:36,properties:[{name:"collision",type:"bool",value:!1}]},{id:37,properties:[{name:"collision",type:"bool",value:!1}]},{id:38,properties:[{name:"collision",type:"bool",value:!1}]},{id:39,properties:[{name:"collision",type:"bool",value:!1}]},{id:40,properties:[{name:"collision",type:"bool",value:!1}]},{id:41,properties:[{name:"collision",type:"bool",value:!1}]},{id:42,properties:[{name:"collision",type:"bool",value:!1}]},{id:43,properties:[{name:"collision",type:"bool",value:!1}]},{id:44,properties:[{name:"collision",type:"bool",value:!1}]},{id:45,properties:[{name:"collision",type:"bool",value:!1}]},{id:46,properties:[{name:"collision",type:"bool",value:!1}]},{id:47,properties:[{name:"collision",type:"bool",value:!1}]},{id:48,properties:[{name:"collision",type:"bool",value:!1}]},{id:49,properties:[{name:"collision",type:"bool",value:!1}]},{id:50,properties:[{name:"collision",type:"bool",value:!1}]},{id:51,properties:[{name:"collision",type:"bool",value:!1}]},{id:52,properties:[{name:"collision",type:"bool",value:!1}]},{id:53,properties:[{name:"collision",type:"bool",value:!1}]},{id:54,properties:[{name:"collision",type:"bool",value:!1}]},{id:55,properties:[{name:"collision",type:"bool",value:!1}]},{id:56,properties:[{name:"collision",type:"bool",value:!1}]},{id:57,properties:[{name:"collision",type:"bool",value:!1}]},{id:58,properties:[{name:"collision",type:"bool",value:!1}]},{id:59,properties:[{name:"collision",type:"bool",value:!1}]},{id:60,properties:[{name:"collision",type:"bool",value:!1}]},{id:61,properties:[{name:"collision",type:"bool",value:!1}]},{id:62,properties:[{name:"collision",type:"bool",value:!1}]},{id:63,properties:[{name:"collision",type:"bool",value:!1}]},{id:64,properties:[{name:"collision",type:"bool",value:!1}]},{id:65,properties:[{name:"collision",type:"bool",value:!1}]},{id:66,properties:[{name:"collision",type:"bool",value:!1}]},{id:67,properties:[{name:"collision",type:"bool",value:!1}]},{id:68,properties:[{name:"collision",type:"bool",value:!1}]},{id:69,properties:[{name:"collision",type:"bool",value:!1}]},{id:70,properties:[{name:"collision",type:"bool",value:!1}]},{id:71,properties:[{name:"collision",type:"bool",value:!1}]},{id:72,properties:[{name:"collision",type:"bool",value:!1}]},{id:73,properties:[{name:"collision",type:"bool",value:!1}]},{id:74,properties:[{name:"collision",type:"bool",value:!1}]},{id:75,properties:[{name:"collision",type:"bool",value:!1}]},{id:76,properties:[{name:"collision",type:"bool",value:!1}]},{id:77,properties:[{name:"collision",type:"bool",value:!1}]},{id:78,properties:[{name:"collision",type:"bool",value:!1}]},{id:79,properties:[{name:"collision",type:"bool",value:!1}]},{id:80,properties:[{name:"collision",type:"bool",value:!1}]},{id:81,properties:[{name:"collision",type:"bool",value:!1}]},{id:82,properties:[{name:"collision",type:"bool",value:!1}]},{id:83,properties:[{name:"collision",type:"bool",value:!1}]},{id:84,properties:[{name:"collision",type:"bool",value:!1}]},{id:85,properties:[{name:"collision",type:"bool",value:!1}]},{id:86,properties:[{name:"collision",type:"bool",value:!1}]},{id:87,properties:[{name:"collision",type:"bool",value:!1}]},{id:88,properties:[{name:"collision",type:"bool",value:!1}]},{id:89,properties:[{name:"collision",type:"bool",value:!1}]},{id:90,properties:[{name:"collision",type:"bool",value:!1}]},{id:91,properties:[{name:"collision",type:"bool",value:!1}]},{id:92,properties:[{name:"collision",type:"bool",value:!1}]},{id:93,properties:[{name:"collision",type:"bool",value:!1}]},{id:94,properties:[{name:"collision",type:"bool",value:!1}]},{id:95,properties:[{name:"collision",type:"bool",value:!1}]},{id:96,properties:[{name:"collision",type:"bool",value:!1}]},{id:97,properties:[{name:"collision",type:"bool",value:!1}]},{id:98,properties:[{name:"collision",type:"bool",value:!1}]},{id:99,properties:[{name:"collision",type:"bool",value:!1}]},{id:100,properties:[{name:"collision",type:"bool",value:!1}]},{id:101,properties:[{name:"collision",type:"bool",value:!1}]},{id:102,properties:[{name:"collision",type:"bool",value:!1}]},{id:103,properties:[{name:"collision",type:"bool",value:!1}]},{id:104,properties:[{name:"collision",type:"bool",value:!1}]},{id:105,properties:[{name:"collision",type:"bool",value:!1}]},{id:106,properties:[{name:"collision",type:"bool",value:!1}]},{id:107,properties:[{name:"collision",type:"bool",value:!1}]},{id:108,properties:[{name:"collision",type:"bool",value:!1}]},{id:109,properties:[{name:"collision",type:"bool",value:!1}]},{id:110,properties:[{name:"collision",type:"bool",value:!1}]},{id:111,properties:[{name:"collision",type:"bool",value:!1}]},{id:112,properties:[{name:"collision",type:"bool",value:!1}]},{id:113,properties:[{name:"collision",type:"bool",value:!1}]},{id:114,properties:[{name:"collision",type:"bool",value:!1}]},{id:115,properties:[{name:"collision",type:"bool",value:!1}]},{id:116,properties:[{name:"collision",type:"bool",value:!1}]},{id:117,properties:[{name:"collision",type:"bool",value:!1}]},{id:118,properties:[{name:"collision",type:"bool",value:!1}]},{id:119,properties:[{name:"collision",type:"bool",value:!1}]},{id:120,properties:[{name:"collision",type:"bool",value:!1}]},{id:121,properties:[{name:"collision",type:"bool",value:!1}]},{id:122,properties:[{name:"collision",type:"bool",value:!1}]},{id:123,properties:[{name:"collision",type:"bool",value:!1}]},{id:124,properties:[{name:"collision",type:"bool",value:!1}]},{id:125,properties:[{name:"collision",type:"bool",value:!1}]},{id:126,properties:[{name:"collision",type:"bool",value:!1}]},{id:127,properties:[{name:"collision",type:"bool",value:!1}]},{id:128,properties:[{name:"collision",type:"bool",value:!1}]},{id:129,properties:[{name:"collision",type:"bool",value:!1}]},{id:130,properties:[{name:"collision",type:"bool",value:!1}]},{id:131,properties:[{name:"collision",type:"bool",value:!1}]},{id:132,properties:[{name:"collision",type:"bool",value:!1}]},{id:133,properties:[{name:"collision",type:"bool",value:!1}]},{id:134,properties:[{name:"collision",type:"bool",value:!1}]},{id:135,properties:[{name:"collision",type:"bool",value:!1}]},{id:136,properties:[{name:"collision",type:"bool",value:!1}]},{id:137,properties:[{name:"collision",type:"bool",value:!1}]},{id:138,properties:[{name:"collision",type:"bool",value:!1}]},{id:139,properties:[{name:"collision",type:"bool",value:!1}]},{id:140,properties:[{name:"collision",type:"bool",value:!1}]},{id:141,properties:[{name:"collision",type:"bool",value:!1}]},{id:142,properties:[{name:"collision",type:"bool",value:!1}]},{id:143,properties:[{name:"collision",type:"bool",value:!1}]},{id:144,properties:[{name:"collision",type:"bool",value:!1}]},{id:145,properties:[{name:"collision",type:"bool",value:!1}]},{id:146,properties:[{name:"collision",type:"bool",value:!1}]},{id:147,properties:[{name:"collision",type:"bool",value:!1}]},{id:148,properties:[{name:"collision",type:"bool",value:!1}]},{id:149,properties:[{name:"collision",type:"bool",value:!1}]},{id:150,properties:[{name:"collision",type:"bool",value:!1}]},{id:151,properties:[{name:"collision",type:"bool",value:!1}]},{id:152,properties:[{name:"collision",type:"bool",value:!1}]},{id:153,properties:[{name:"collision",type:"bool",value:!1}]},{id:154,properties:[{name:"collision",type:"bool",value:!1}]},{id:155,properties:[{name:"collision",type:"bool",value:!1}]},{id:156,properties:[{name:"collision",type:"bool",value:!1}]},{id:157,properties:[{name:"collision",type:"bool",value:!1}]},{id:158,properties:[{name:"collision",type:"bool",value:!1}]},{id:159,properties:[{name:"collision",type:"bool",value:!1}]},{id:160,properties:[{name:"collision",type:"bool",value:!1}]},{id:161,properties:[{name:"collision",type:"bool",value:!1}]},{id:162,properties:[{name:"collision",type:"bool",value:!1}]},{id:163,properties:[{name:"collision",type:"bool",value:!1}]},{id:164,properties:[{name:"collision",type:"bool",value:!1}]},{id:165,properties:[{name:"collision",type:"bool",value:!1}]},{id:166,properties:[{name:"collision",type:"bool",value:!1}]},{id:167,properties:[{name:"collision",type:"bool",value:!1}]},{id:168,properties:[{name:"collision",type:"bool",value:!1}]},{id:169,properties:[{name:"collision",type:"bool",value:!1}]},{id:170,properties:[{name:"collision",type:"bool",value:!1}]},{id:171,properties:[{name:"collision",type:"bool",value:!1}]},{id:172,properties:[{name:"collision",type:"bool",value:!1}]},{id:173,properties:[{name:"collision",type:"bool",value:!1}]},{id:174,properties:[{name:"collision",type:"bool",value:!1}]},{id:175,properties:[{name:"collision",type:"bool",value:!1}]},{id:176,properties:[{name:"collision",type:"bool",value:!1}]},{id:177,properties:[{name:"collision",type:"bool",value:!1}]},{id:178,properties:[{name:"collision",type:"bool",value:!1}]},{id:179,properties:[{name:"collision",type:"bool",value:!1}]},{id:180,properties:[{name:"collision",type:"bool",value:!1}]},{id:181,properties:[{name:"collision",type:"bool",value:!1}]},{id:182,properties:[{name:"collision",type:"bool",value:!1}]},{id:183,properties:[{name:"collision",type:"bool",value:!1}]},{id:184,properties:[{name:"collision",type:"bool",value:!1}]},{id:185,properties:[{name:"collision",type:"bool",value:!1}]},{id:186,properties:[{name:"collision",type:"bool",value:!1}]},{id:187,properties:[{name:"collision",type:"bool",value:!1}]},{id:188,properties:[{name:"collision",type:"bool",value:!1}]},{id:189,properties:[{name:"collision",type:"bool",value:!1}]},{id:190,properties:[{name:"collision",type:"bool",value:!1}]},{id:191,properties:[{name:"collision",type:"bool",value:!1}]},{id:192,properties:[{name:"collision",type:"bool",value:!1}]},{id:193,properties:[{name:"collision",type:"bool",value:!1}]},{id:194,properties:[{name:"collision",type:"bool",value:!1}]},{id:195,properties:[{name:"collision",type:"bool",value:!1}]},{id:196,properties:[{name:"collision",type:"bool",value:!1}]},{id:197,properties:[{name:"collision",type:"bool",value:!1}]},{id:198,properties:[{name:"collision",type:"bool",value:!1}]},{id:199,properties:[{name:"collision",type:"bool",value:!1}]},{id:200,properties:[{name:"collision",type:"bool",value:!1}]},{id:201,properties:[{name:"collision",type:"bool",value:!1}]},{id:202,properties:[{name:"collision",type:"bool",value:!1}]},{id:203,properties:[{name:"collision",type:"bool",value:!1}]},{id:204,properties:[{name:"collision",type:"bool",value:!1}]},{id:205,properties:[{name:"collision",type:"bool",value:!1}]},{id:206,properties:[{name:"collision",type:"bool",value:!1}]},{id:207,properties:[{name:"collision",type:"bool",value:!1}]},{id:208,properties:[{name:"collision",type:"bool",value:!1}]},{id:209,properties:[{name:"collision",type:"bool",value:!1}]},{id:210,properties:[{name:"collision",type:"bool",value:!1}]},{id:211,properties:[{name:"collision",type:"bool",value:!1}]},{id:212,properties:[{name:"collision",type:"bool",value:!1}]},{id:213,properties:[{name:"collision",type:"bool",value:!1}]},{id:214,properties:[{name:"collision",type:"bool",value:!1}]},{id:215,properties:[{name:"collision",type:"bool",value:!1}]},{id:216,properties:[{name:"collision",type:"bool",value:!1}]},{id:217,properties:[{name:"collision",type:"bool",value:!1}]},{id:218,properties:[{name:"collision",type:"bool",value:!1}]},{id:219,properties:[{name:"collision",type:"bool",value:!1}]},{id:220,properties:[{name:"collision",type:"bool",value:!1}]},{id:221,properties:[{name:"collision",type:"bool",value:!1}]},{id:222,properties:[{name:"collision",type:"bool",value:!1}]},{id:223,properties:[{name:"collision",type:"bool",value:!1}]},{id:224,properties:[{name:"collision",type:"bool",value:!1}]},{id:225,properties:[{name:"collision",type:"bool",value:!1}]},{id:226,properties:[{name:"collision",type:"bool",value:!1}]},{id:227,properties:[{name:"collision",type:"bool",value:!1}]},{id:228,properties:[{name:"collision",type:"bool",value:!1}]},{id:229,properties:[{name:"collision",type:"bool",value:!1}]},{id:230,properties:[{name:"collision",type:"bool",value:!1}]},{id:231,properties:[{name:"collision",type:"bool",value:!1}]},{id:232,properties:[{name:"collision",type:"bool",value:!1}]},{id:233,properties:[{name:"collision",type:"bool",value:!1}]},{id:234,properties:[{name:"collision",type:"bool",value:!1}]},{id:235,properties:[{name:"collision",type:"bool",value:!1}]},{id:236,properties:[{name:"collision",type:"bool",value:!1}]},{id:237,properties:[{name:"collision",type:"bool",value:!1}]},{id:238,properties:[{name:"collision",type:"bool",value:!1}]},{id:239,properties:[{name:"collision",type:"bool",value:!1}]},{id:240,properties:[{name:"collision",type:"bool",value:!1}]},{id:241,properties:[{name:"collision",type:"bool",value:!1}]},{id:242,properties:[{name:"collision",type:"bool",value:!1}]},{id:243,properties:[{name:"collision",type:"bool",value:!1}]},{id:244,properties:[{name:"collision",type:"bool",value:!1}]},{id:245,properties:[{name:"collision",type:"bool",value:!1}]},{id:246,properties:[{name:"collision",type:"bool",value:!1}]},{id:247,properties:[{name:"collision",type:"bool",value:!1}]},{id:248,properties:[{name:"collision",type:"bool",value:!1}]},{id:249,properties:[{name:"collision",type:"bool",value:!1}]},{id:250,properties:[{name:"collision",type:"bool",value:!1}]},{id:251,properties:[{name:"collision",type:"bool",value:!1}]},{id:252,properties:[{name:"collision",type:"bool",value:!1}]},{id:253,properties:[{name:"collision",type:"bool",value:!1}]},{id:254,properties:[{name:"collision",type:"bool",value:!1}]},{id:255,properties:[{name:"collision",type:"bool",value:!1}]},{id:256,properties:[{name:"collision",type:"bool",value:!1}]},{id:257,properties:[{name:"collision",type:"bool",value:!1}]},{id:258,properties:[{name:"collision",type:"bool",value:!1}]},{id:259,properties:[{name:"collision",type:"bool",value:!1}]},{id:260,properties:[{name:"collision",type:"bool",value:!1}]},{id:261,properties:[{name:"collision",type:"bool",value:!1}]},{id:262,properties:[{name:"collision",type:"bool",value:!1}]},{id:263,properties:[{name:"collision",type:"bool",value:!1}]},{id:264,properties:[{name:"collision",type:"bool",value:!1}]},{id:265,properties:[{name:"collision",type:"bool",value:!1}]},{id:266,properties:[{name:"collision",type:"bool",value:!1}]},{id:267,properties:[{name:"collision",type:"bool",value:!1}]},{id:268,properties:[{name:"collision",type:"bool",value:!1}]},{id:269,properties:[{name:"collision",type:"bool",value:!1}]},{id:270,properties:[{name:"collision",type:"bool",value:!1}]},{id:271,properties:[{name:"collision",type:"bool",value:!1}]},{id:272,properties:[{name:"collision",type:"bool",value:!1}]},{id:273,properties:[{name:"collision",type:"bool",value:!1}]},{id:274,properties:[{name:"collision",type:"bool",value:!1}]},{id:275,properties:[{name:"collision",type:"bool",value:!1}]},{id:276,properties:[{name:"collision",type:"bool",value:!1}]},{id:277,properties:[{name:"collision",type:"bool",value:!1}]},{id:278,properties:[{name:"collision",type:"bool",value:!1}]},{id:279,properties:[{name:"collision",type:"bool",value:!1}]},{id:280,properties:[{name:"collision",type:"bool",value:!1}]},{id:281,properties:[{name:"collision",type:"bool",value:!1}]},{id:282,properties:[{name:"collision",type:"bool",value:!1}]},{id:283,properties:[{name:"collision",type:"bool",value:!1}]},{id:284,properties:[{name:"collision",type:"bool",value:!1}]},{id:285,properties:[{name:"collision",type:"bool",value:!1}]},{id:286,properties:[{name:"collision",type:"bool",value:!1}]},{id:287,properties:[{name:"collision",type:"bool",value:!1}]},{id:288,properties:[{name:"collision",type:"bool",value:!1}]},{id:289,properties:[{name:"collision",type:"bool",value:!1}]},{id:290,properties:[{name:"collision",type:"bool",value:!1}]},{id:291,properties:[{name:"collision",type:"bool",value:!1}]},{id:292,properties:[{name:"collision",type:"bool",value:!1}]},{id:293,properties:[{name:"collision",type:"bool",value:!1}]},{id:294,properties:[{name:"collision",type:"bool",value:!1}]},{id:295,properties:[{name:"collision",type:"bool",value:!1}]},{id:296,properties:[{name:"collision",type:"bool",value:!1}]},{id:297,properties:[{name:"collision",type:"bool",value:!1}]},{id:298,properties:[{name:"collision",type:"bool",value:!1}]},{id:299,properties:[{name:"collision",type:"bool",value:!1}]},{id:300,properties:[{name:"collision",type:"bool",value:!1}]},{id:301,properties:[{name:"collision",type:"bool",value:!1}]},{id:302,properties:[{name:"collision",type:"bool",value:!1}]},{id:303,properties:[{name:"collision",type:"bool",value:!1}]},{id:304,properties:[{name:"collision",type:"bool",value:!1}]},{id:305,properties:[{name:"collision",type:"bool",value:!1}]},{id:306,properties:[{name:"collision",type:"bool",value:!1}]},{id:307,properties:[{name:"collision",type:"bool",value:!1}]},{id:308,properties:[{name:"collision",type:"bool",value:!1}]},{id:309,properties:[{name:"collision",type:"bool",value:!1}]},{id:310,properties:[{name:"collision",type:"bool",value:!1}]},{id:311,properties:[{name:"collision",type:"bool",value:!1}]},{id:312,properties:[{name:"collision",type:"bool",value:!1}]},{id:313,properties:[{name:"collision",type:"bool",value:!1}]},{id:314,properties:[{name:"collision",type:"bool",value:!1}]},{id:315,properties:[{name:"collision",type:"bool",value:!1}]},{id:316,properties:[{name:"collision",type:"bool",value:!1}]},{id:317,properties:[{name:"collision",type:"bool",value:!1}]},{id:318,properties:[{name:"collision",type:"bool",value:!1}]},{id:319,properties:[{name:"collision",type:"bool",value:!1}]},{id:320,properties:[{name:"collision",type:"bool",value:!1}]},{id:321,properties:[{name:"collision",type:"bool",value:!1}]},{id:322,properties:[{name:"collision",type:"bool",value:!1}]},{id:323,properties:[{name:"collision",type:"bool",value:!1}]},{id:324,properties:[{name:"collision",type:"bool",value:!1}]},{id:325,properties:[{name:"collision",type:"bool",value:!1}]},{id:326,properties:[{name:"collision",type:"bool",value:!1}]},{id:327,properties:[{name:"collision",type:"bool",value:!1}]},{id:328,properties:[{name:"collision",type:"bool",value:!1}]},{id:329,properties:[{name:"collision",type:"bool",value:!1}]},{id:330,properties:[{name:"collision",type:"bool",value:!1}]},{id:331,properties:[{name:"collision",type:"bool",value:!1}]},{id:332,properties:[{name:"collision",type:"bool",value:!1}]},{id:333,properties:[{name:"collision",type:"bool",value:!1}]},{id:334,properties:[{name:"collision",type:"bool",value:!1}]},{id:335,properties:[{name:"collision",type:"bool",value:!1}]},{id:336,properties:[{name:"collision",type:"bool",value:!1}]},{id:337,properties:[{name:"collision",type:"bool",value:!1}]},{id:338,properties:[{name:"collision",type:"bool",value:!1}]},{id:339,properties:[{name:"collision",type:"bool",value:!1}]},{id:340,properties:[{name:"collision",type:"bool",value:!1}]},{id:341,properties:[{name:"collision",type:"bool",value:!1}]},{id:342,properties:[{name:"collision",type:"bool",value:!1}]},{id:343,properties:[{name:"collision",type:"bool",value:!1}]},{id:344,properties:[{name:"collision",type:"bool",value:!1}]},{id:345,properties:[{name:"collision",type:"bool",value:!1}]},{id:346,properties:[{name:"collision",type:"bool",value:!1}]},{id:347,properties:[{name:"collision",type:"bool",value:!1}]},{id:348,properties:[{name:"collision",type:"bool",value:!1}]},{id:349,properties:[{name:"collision",type:"bool",value:!1}]},{id:350,properties:[{name:"collision",type:"bool",value:!1}]},{id:351,properties:[{name:"collision",type:"bool",value:!1}]},{id:352,properties:[{name:"collision",type:"bool",value:!1}]},{id:353,properties:[{name:"collision",type:"bool",value:!1}]},{id:354,properties:[{name:"collision",type:"bool",value:!1}]},{id:355,properties:[{name:"collision",type:"bool",value:!1}]},{id:356,properties:[{name:"collision",type:"bool",value:!1}]},{id:357,properties:[{name:"collision",type:"bool",value:!1}]},{id:358,properties:[{name:"collision",type:"bool",value:!1}]},{id:359,properties:[{name:"collision",type:"bool",value:!1}]},{id:360,properties:[{name:"collision",type:"bool",value:!1}]},{id:361,properties:[{name:"collision",type:"bool",value:!1}]},{id:362,properties:[{name:"collision",type:"bool",value:!1}]},{id:363,properties:[{name:"collision",type:"bool",value:!1}]},{id:364,properties:[{name:"collision",type:"bool",value:!1}]},{id:365,properties:[{name:"collision",type:"bool",value:!1}]},{id:366,properties:[{name:"collision",type:"bool",value:!1}]},{id:367,properties:[{name:"collision",type:"bool",value:!1}]},{id:368,properties:[{name:"collision",type:"bool",value:!1}]},{id:369,properties:[{name:"collision",type:"bool",value:!1}]},{id:370,properties:[{name:"collision",type:"bool",value:!1}]},{id:371,properties:[{name:"collision",type:"bool",value:!1}]},{id:372,properties:[{name:"collision",type:"bool",value:!1}]},{id:373,properties:[{name:"collision",type:"bool",value:!1}]},{id:374,properties:[{name:"collision",type:"bool",value:!1}]},{id:375,properties:[{name:"collision",type:"bool",value:!1}]},{id:376,properties:[{name:"collision",type:"bool",value:!1}]},{id:377,properties:[{name:"collision",type:"bool",value:!1}]},{id:378,properties:[{name:"collision",type:"bool",value:!1}]},{id:379,properties:[{name:"collision",type:"bool",value:!1}]},{id:380,properties:[{name:"collision",type:"bool",value:!1}]},{id:381,properties:[{name:"collision",type:"bool",value:!1}]},{id:382,properties:[{name:"collision",type:"bool",value:!1}]},{id:383,properties:[{name:"collision",type:"bool",value:!1}]},{id:384,properties:[{name:"collision",type:"bool",value:!1}]},{id:385,properties:[{name:"collision",type:"bool",value:!1}]},{id:386,properties:[{name:"collision",type:"bool",value:!1}]},{id:387,properties:[{name:"collision",type:"bool",value:!1}]},{id:388,properties:[{name:"collision",type:"bool",value:!1}]},{id:389,properties:[{name:"collision",type:"bool",value:!1}]},{id:390,properties:[{name:"collision",type:"bool",value:!1}]},{id:391,properties:[{name:"collision",type:"bool",value:!1}]},{id:392,properties:[{name:"collision",type:"bool",value:!1}]},{id:393,properties:[{name:"collision",type:"bool",value:!1}]},{id:394,properties:[{name:"collision",type:"bool",value:!1}]},{id:395,properties:[{name:"collision",type:"bool",value:!1}]},{id:396,properties:[{name:"collision",type:"bool",value:!1}]},{id:397,properties:[{name:"collision",type:"bool",value:!1}]},{id:398,properties:[{name:"collision",type:"bool",value:!1}]},{id:399,properties:[{name:"collision",type:"bool",value:!1}]},{id:400,properties:[{name:"collision",type:"bool",value:!1}]},{id:401,properties:[{name:"collision",type:"bool",value:!1}]},{id:402,properties:[{name:"collision",type:"bool",value:!1}]},{id:403,properties:[{name:"collision",type:"bool",value:!1}]},{id:404,properties:[{name:"collision",type:"bool",value:!1}]},{id:405,properties:[{name:"collision",type:"bool",value:!1}]},{id:406,properties:[{name:"collision",type:"bool",value:!1}]},{id:407,properties:[{name:"collision",type:"bool",value:!1}]},{id:408,properties:[{name:"collision",type:"bool",value:!1}]},{id:409,properties:[{name:"collision",type:"bool",value:!1}]},{id:410,properties:[{name:"collision",type:"bool",value:!1}]},{id:411,properties:[{name:"collision",type:"bool",value:!1}]},{id:412,properties:[{name:"collision",type:"bool",value:!1}]},{id:413,properties:[{name:"collision",type:"bool",value:!1}]},{id:414,properties:[{name:"collision",type:"bool",value:!1}]},{id:415,properties:[{name:"collision",type:"bool",value:!1}]},{id:416,properties:[{name:"collision",type:"bool",value:!1}]},{id:417,properties:[{name:"collision",type:"bool",value:!1}]},{id:418,properties:[{name:"collision",type:"bool",value:!1}]},{id:419,properties:[{name:"collision",type:"bool",value:!1}]},{id:420,properties:[{name:"collision",type:"bool",value:!1}]},{id:421,properties:[{name:"collision",type:"bool",value:!1}]},{id:422,properties:[{name:"collision",type:"bool",value:!1}]},{id:423,properties:[{name:"collision",type:"bool",value:!1}]},{id:424,properties:[{name:"collision",type:"bool",value:!1}]},{id:425,properties:[{name:"collision",type:"bool",value:!1}]},{id:426,properties:[{name:"collision",type:"bool",value:!1}]},{id:427,properties:[{name:"collision",type:"bool",value:!1}]},{id:428,properties:[{name:"collision",type:"bool",value:!1}]},{id:429,properties:[{name:"collision",type:"bool",value:!1}]},{id:430,properties:[{name:"collision",type:"bool",value:!1}]},{id:431,properties:[{name:"collision",type:"bool",value:!1}]},{id:432,properties:[{name:"collision",type:"bool",value:!1}]},{id:433,properties:[{name:"collision",type:"bool",value:!1}]},{id:434,properties:[{name:"collision",type:"bool",value:!1}]},{id:435,properties:[{name:"collision",type:"bool",value:!1}]},{id:436,properties:[{name:"collision",type:"bool",value:!1}]},{id:437,properties:[{name:"collision",type:"bool",value:!1}]},{id:438,properties:[{name:"collision",type:"bool",value:!1}]},{id:439,properties:[{name:"collision",type:"bool",value:!1}]},{id:440,properties:[{name:"collision",type:"bool",value:!1}]},{id:441,properties:[{name:"collision",type:"bool",value:!1}]},{id:442,properties:[{name:"collision",type:"bool",value:!1}]},{id:443,properties:[{name:"collision",type:"bool",value:!1}]},{id:444,properties:[{name:"collision",type:"bool",value:!1}]},{id:445,properties:[{name:"collision",type:"bool",value:!1}]},{id:446,properties:[{name:"collision",type:"bool",value:!1}]},{id:447,properties:[{name:"collision",type:"bool",value:!1}]},{id:448,properties:[{name:"collision",type:"bool",value:!1}]},{id:449,properties:[{name:"collision",type:"bool",value:!1}]},{id:450,properties:[{name:"collision",type:"bool",value:!1}]},{id:451,properties:[{name:"collision",type:"bool",value:!1}]},{id:452,properties:[{name:"collision",type:"bool",value:!1}]},{id:453,properties:[{name:"collision",type:"bool",value:!1}]},{id:454,properties:[{name:"collision",type:"bool",value:!1}]},{id:455,properties:[{name:"collision",type:"bool",value:!1}]},{id:456,properties:[{name:"collision",type:"bool",value:!1}]},{id:457,properties:[{name:"collision",type:"bool",value:!1}]},{id:458,properties:[{name:"collision",type:"bool",value:!1}]},{id:459,properties:[{name:"collision",type:"bool",value:!1}]},{id:460,properties:[{name:"collision",type:"bool",value:!1}]},{id:461,properties:[{name:"collision",type:"bool",value:!1}]},{id:462,properties:[{name:"collision",type:"bool",value:!1}]},{id:463,properties:[{name:"collision",type:"bool",value:!1}]},{id:464,properties:[{name:"collision",type:"bool",value:!1}]},{id:465,properties:[{name:"collision",type:"bool",value:!1}]},{id:466,properties:[{name:"collision",type:"bool",value:!1}]},{id:467,properties:[{name:"collision",type:"bool",value:!1}]},{id:468,properties:[{name:"collision",type:"bool",value:!1}]},{id:469,properties:[{name:"collision",type:"bool",value:!1}]},{id:470,properties:[{name:"collision",type:"bool",value:!1}]},{id:471,properties:[{name:"collision",type:"bool",value:!1}]},{id:472,properties:[{name:"collision",type:"bool",value:!1}]},{id:473,properties:[{name:"collision",type:"bool",value:!1}]},{id:474,properties:[{name:"collision",type:"bool",value:!1}]},{id:475,properties:[{name:"collision",type:"bool",value:!1}]},{id:476,properties:[{name:"collision",type:"bool",value:!1}]},{id:477,properties:[{name:"collision",type:"bool",value:!1}]},{id:478,properties:[{name:"collision",type:"bool",value:!1}]},{id:479,properties:[{name:"collision",type:"bool",value:!1}]},{id:480,properties:[{name:"collision",type:"bool",value:!1}]},{id:481,properties:[{name:"collision",type:"bool",value:!1}]},{id:482,properties:[{name:"collision",type:"bool",value:!1}]},{id:483,properties:[{name:"collision",type:"bool",value:!1}]},{id:484,properties:[{name:"collision",type:"bool",value:!1}]},{id:485,properties:[{name:"collision",type:"bool",value:!1}]},{id:486,properties:[{name:"collision",type:"bool",value:!1}]},{id:487,properties:[{name:"collision",type:"bool",value:!1}]},{id:488,properties:[{name:"collision",type:"bool",value:!1}]},{id:489,properties:[{name:"collision",type:"bool",value:!1}]},{id:490,properties:[{name:"collision",type:"bool",value:!1}]},{id:491,properties:[{name:"collision",type:"bool",value:!1}]},{id:492,properties:[{name:"collision",type:"bool",value:!1}]},{id:493,properties:[{name:"collision",type:"bool",value:!1}]},{id:494,properties:[{name:"collision",type:"bool",value:!1}]},{id:495,properties:[{name:"collision",type:"bool",value:!1}]},{id:496,properties:[{name:"collision",type:"bool",value:!1}]},{id:497,properties:[{name:"collision",type:"bool",value:!1}]},{id:498,properties:[{name:"collision",type:"bool",value:!1}]},{id:499,properties:[{name:"collision",type:"bool",value:!1}]},{id:500,properties:[{name:"collision",type:"bool",value:!1}]},{id:501,properties:[{name:"collision",type:"bool",value:!1}]},{id:502,properties:[{name:"collision",type:"bool",value:!1}]},{id:503,properties:[{name:"collision",type:"bool",value:!1}]},{id:504,properties:[{name:"collision",type:"bool",value:!1}]},{id:505,properties:[{name:"collision",type:"bool",value:!1}]},{id:506,properties:[{name:"collision",type:"bool",value:!1}]},{id:507,properties:[{name:"collision",type:"bool",value:!1}]},{id:508,properties:[{name:"collision",type:"bool",value:!1}]},{id:509,properties:[{name:"collision",type:"bool",value:!1}]},{id:510,properties:[{name:"collision",type:"bool",value:!1}]},{id:511,properties:[{name:"collision",type:"bool",value:!1}]},{id:512,properties:[{name:"collision",type:"bool",value:!1}]},{id:513,properties:[{name:"collision",type:"bool",value:!1}]},{id:514,properties:[{name:"collision",type:"bool",value:!1}]},{id:515,properties:[{name:"collision",type:"bool",value:!1}]},{id:516,properties:[{name:"collision",type:"bool",value:!1}]},{id:517,properties:[{name:"collision",type:"bool",value:!1}]},{id:518,properties:[{name:"collision",type:"bool",value:!1}]},{id:519,properties:[{name:"collision",type:"bool",value:!1}]},{id:520,properties:[{name:"collision",type:"bool",value:!1}]},{id:521,properties:[{name:"collision",type:"bool",value:!1}]},{id:522,properties:[{name:"collision",type:"bool",value:!1}]},{id:523,properties:[{name:"collision",type:"bool",value:!1}]},{id:524,properties:[{name:"collision",type:"bool",value:!1}]},{id:525,properties:[{name:"collision",type:"bool",value:!1}]},{id:526,properties:[{name:"collision",type:"bool",value:!1}]},{id:527,properties:[{name:"collision",type:"bool",value:!1}]},{id:528,properties:[{name:"collision",type:"bool",value:!1}]},{id:529,properties:[{name:"collision",type:"bool",value:!1}]},{id:530,properties:[{name:"collision",type:"bool",value:!1}]},{id:531,properties:[{name:"collision",type:"bool",value:!1}]},{id:532,properties:[{name:"collision",type:"bool",value:!1}]},{id:533,properties:[{name:"collision",type:"bool",value:!1}]},{id:534,properties:[{name:"collision",type:"bool",value:!1}]},{id:535,properties:[{name:"collision",type:"bool",value:!1}]},{id:536,properties:[{name:"collision",type:"bool",value:!1}]},{id:537,properties:[{name:"collision",type:"bool",value:!1}]},{id:538,properties:[{name:"collision",type:"bool",value:!1}]},{id:539,properties:[{name:"collision",type:"bool",value:!1}]},{id:540,properties:[{name:"collision",type:"bool",value:!1}]},{id:541,properties:[{name:"collision",type:"bool",value:!1}]},{id:542,properties:[{name:"collision",type:"bool",value:!1}]},{id:543,properties:[{name:"collision",type:"bool",value:!1}]},{id:544,properties:[{name:"collision",type:"bool",value:!1}]},{id:545,properties:[{name:"collision",type:"bool",value:!1}]},{id:546,properties:[{name:"collision",type:"bool",value:!1}]},{id:547,properties:[{name:"collision",type:"bool",value:!1}]},{id:548,properties:[{name:"collision",type:"bool",value:!1}]},{id:549,properties:[{name:"collision",type:"bool",value:!1}]},{id:550,properties:[{name:"collision",type:"bool",value:!1}]},{id:551,properties:[{name:"collision",type:"bool",value:!1}]},{id:552,properties:[{name:"collision",type:"bool",value:!1}]},{id:553,properties:[{name:"collision",type:"bool",value:!1}]},{id:554,properties:[{name:"collision",type:"bool",value:!1}]},{id:555,properties:[{name:"collision",type:"bool",value:!1}]},{id:556,properties:[{name:"collision",type:"bool",value:!1}]},{id:557,properties:[{name:"collision",type:"bool",value:!1}]},{id:558,properties:[{name:"collision",type:"bool",value:!1}]},{id:559,properties:[{name:"collision",type:"bool",value:!1}]},{id:560,properties:[{name:"collision",type:"bool",value:!1}]},{id:561,properties:[{name:"collision",type:"bool",value:!1}]},{id:562,properties:[{name:"collision",type:"bool",value:!1}]},{id:563,properties:[{name:"collision",type:"bool",value:!1}]},{id:564,properties:[{name:"collision",type:"bool",value:!1}]},{id:565,properties:[{name:"collision",type:"bool",value:!1}]},{id:566,properties:[{name:"collision",type:"bool",value:!1}]},{id:567,properties:[{name:"collision",type:"bool",value:!1}]},{id:568,properties:[{name:"collision",type:"bool",value:!1}]},{id:569,properties:[{name:"collision",type:"bool",value:!1}]},{id:570,properties:[{name:"collision",type:"bool",value:!1}]},{id:571,properties:[{name:"collision",type:"bool",value:!1}]},{id:572,properties:[{name:"collision",type:"bool",value:!1}]},{id:573,properties:[{name:"collision",type:"bool",value:!1}]},{id:574,properties:[{name:"collision",type:"bool",value:!1}]},{id:575,properties:[{name:"collision",type:"bool",value:!1}]},{id:576,properties:[{name:"collision",type:"bool",value:!1}]},{id:577,properties:[{name:"collision",type:"bool",value:!1}]},{id:578,properties:[{name:"collision",type:"bool",value:!1}]},{id:579,properties:[{name:"collision",type:"bool",value:!1}]},{id:580,properties:[{name:"collision",type:"bool",value:!1}]},{id:581,properties:[{name:"collision",type:"bool",value:!1}]},{id:582,properties:[{name:"collision",type:"bool",value:!1}]},{id:583,properties:[{name:"collision",type:"bool",value:!1}]},{id:584,properties:[{name:"collision",type:"bool",value:!1}]},{id:585,properties:[{name:"collision",type:"bool",value:!1}]},{id:586,properties:[{name:"collision",type:"bool",value:!1}]},{id:587,properties:[{name:"collision",type:"bool",value:!1}]},{id:588,properties:[{name:"collision",type:"bool",value:!1}]},{id:589,properties:[{name:"collision",type:"bool",value:!1}]},{id:590,properties:[{name:"collision",type:"bool",value:!1}]},{id:591,properties:[{name:"collision",type:"bool",value:!1}]},{id:592,properties:[{name:"collision",type:"bool",value:!1}]},{id:593,properties:[{name:"collision",type:"bool",value:!1}]},{id:594,properties:[{name:"collision",type:"bool",value:!1}]},{id:595,properties:[{name:"collision",type:"bool",value:!1}]},{id:596,properties:[{name:"collision",type:"bool",value:!1}]},{id:597,properties:[{name:"collision",type:"bool",value:!1}]},{id:598,properties:[{name:"collision",type:"bool",value:!1}]},{id:599,properties:[{name:"collision",type:"bool",value:!1}]},{id:600,properties:[{name:"collision",type:"bool",value:!1}]},{id:601,properties:[{name:"collision",type:"bool",value:!1}]},{id:602,properties:[{name:"collision",type:"bool",value:!1}]},{id:603,properties:[{name:"collision",type:"bool",value:!1}]},{id:604,properties:[{name:"collision",type:"bool",value:!1}]},{id:605,properties:[{name:"collision",type:"bool",value:!1}]},{id:606,properties:[{name:"collision",type:"bool",value:!1}]},{id:607,properties:[{name:"collision",type:"bool",value:!1}]},{id:608,properties:[{name:"collision",type:"bool",value:!1}]},{id:609,properties:[{name:"collision",type:"bool",value:!1}]},{id:610,properties:[{name:"collision",type:"bool",value:!1}]},{id:611,properties:[{name:"collision",type:"bool",value:!1}]},{id:612,properties:[{name:"collision",type:"bool",value:!1}]},{id:613,properties:[{name:"collision",type:"bool",value:!1}]},{id:614,properties:[{name:"collision",type:"bool",value:!1}]},{id:615,properties:[{name:"collision",type:"bool",value:!1}]},{id:616,properties:[{name:"collision",type:"bool",value:!1}]},{id:617,properties:[{name:"collision",type:"bool",value:!1}]},{id:618,properties:[{name:"collision",type:"bool",value:!1}]},{id:619,properties:[{name:"collision",type:"bool",value:!1}]},{id:620,properties:[{name:"collision",type:"bool",value:!1}]},{id:621,properties:[{name:"collision",type:"bool",value:!1}]},{id:622,properties:[{name:"collision",type:"bool",value:!1}]},{id:623,properties:[{name:"collision",type:"bool",value:!1}]},{id:624,properties:[{name:"collision",type:"bool",value:!1}]},{id:625,properties:[{name:"collision",type:"bool",value:!1}]},{id:626,properties:[{name:"collision",type:"bool",value:!1}]},{id:627,properties:[{name:"collision",type:"bool",value:!1}]},{id:628,properties:[{name:"collision",type:"bool",value:!1}]},{id:629,properties:[{name:"collision",type:"bool",value:!1}]},{id:630,properties:[{name:"collision",type:"bool",value:!1}]},{id:631,properties:[{name:"collision",type:"bool",value:!1}]},{id:632,properties:[{name:"collision",type:"bool",value:!1}]},{id:633,properties:[{name:"collision",type:"bool",value:!1}]},{id:634,properties:[{name:"collision",type:"bool",value:!1}]},{id:635,properties:[{name:"collision",type:"bool",value:!1}]},{id:636,properties:[{name:"collision",type:"bool",value:!1}]},{id:637,properties:[{name:"collision",type:"bool",value:!1}]},{id:638,properties:[{name:"collision",type:"bool",value:!1}]},{id:639,properties:[{name:"collision",type:"bool",value:!1}]},{id:640,properties:[{name:"collision",type:"bool",value:!1}]},{id:641,properties:[{name:"collision",type:"bool",value:!1}]},{id:642,properties:[{name:"collision",type:"bool",value:!1}]},{id:643,properties:[{name:"collision",type:"bool",value:!1}]},{id:644,properties:[{name:"collision",type:"bool",value:!1}]},{id:645,properties:[{name:"collision",type:"bool",value:!1}]},{id:646,properties:[{name:"collision",type:"bool",value:!1}]},{id:647,properties:[{name:"collision",type:"bool",value:!1}]},{id:648,properties:[{name:"collision",type:"bool",value:!1}]},{id:649,properties:[{name:"collision",type:"bool",value:!1}]},{id:650,properties:[{name:"collision",type:"bool",value:!1}]},{id:651,properties:[{name:"collision",type:"bool",value:!1}]},{id:652,properties:[{name:"collision",type:"bool",value:!1}]},{id:653,properties:[{name:"collision",type:"bool",value:!1}]},{id:654,properties:[{name:"collision",type:"bool",value:!1}]},{id:655,properties:[{name:"collision",type:"bool",value:!1}]},{id:656,properties:[{name:"collision",type:"bool",value:!1}]},{id:657,properties:[{name:"collision",type:"bool",value:!1}]},{id:658,properties:[{name:"collision",type:"bool",value:!1}]},{id:659,properties:[{name:"collision",type:"bool",value:!1}]},{id:660,properties:[{name:"collision",type:"bool",value:!1}]},{id:661,properties:[{name:"collision",type:"bool",value:!1}]},{id:662,properties:[{name:"collision",type:"bool",value:!1}]},{id:663,properties:[{name:"collision",type:"bool",value:!1}]},{id:664,properties:[{name:"collision",type:"bool",value:!1}]},{id:665,properties:[{name:"collision",type:"bool",value:!1}]},{id:666,properties:[{name:"collision",type:"bool",value:!1}]},{id:667,properties:[{name:"collision",type:"bool",value:!1}]},{id:668,properties:[{name:"collision",type:"bool",value:!1}]},{id:669,properties:[{name:"collision",type:"bool",value:!1}]},{id:670,properties:[{name:"collision",type:"bool",value:!1}]},{id:671,properties:[{name:"collision",type:"bool",value:!1}]},{id:672,properties:[{name:"collision",type:"bool",value:!1}]},{id:673,properties:[{name:"collision",type:"bool",value:!1}]},{id:674,properties:[{name:"collision",type:"bool",value:!1}]},{id:675,properties:[{name:"collision",type:"bool",value:!1}]},{id:676,properties:[{name:"collision",type:"bool",value:!1}]},{id:677,properties:[{name:"collision",type:"bool",value:!1}]},{id:678,properties:[{name:"collision",type:"bool",value:!1}]},{id:679,properties:[{name:"collision",type:"bool",value:!1}]},{id:680,properties:[{name:"collision",type:"bool",value:!1}]},{id:681,properties:[{name:"collision",type:"bool",value:!1}]},{id:682,properties:[{name:"collision",type:"bool",value:!1}]},{id:683,properties:[{name:"collision",type:"bool",value:!1}]},{id:684,properties:[{name:"collision",type:"bool",value:!1}]},{id:685,properties:[{name:"collision",type:"bool",value:!1}]},{id:686,properties:[{name:"collision",type:"bool",value:!1}]},{id:687,properties:[{name:"collision",type:"bool",value:!1}]},{id:688,properties:[{name:"collision",type:"bool",value:!1}]},{id:689,properties:[{name:"collision",type:"bool",value:!1}]},{id:690,properties:[{name:"collision",type:"bool",value:!1}]},{id:691,properties:[{name:"collision",type:"bool",value:!1}]},{id:692,properties:[{name:"collision",type:"bool",value:!1}]},{id:693,properties:[{name:"collision",type:"bool",value:!1}]},{id:694,properties:[{name:"collision",type:"bool",value:!1}]},{id:695,properties:[{name:"collision",type:"bool",value:!1}]},{id:696,properties:[{name:"collision",type:"bool",value:!1}]},{id:697,properties:[{name:"collision",type:"bool",value:!1}]},{id:698,properties:[{name:"collision",type:"bool",value:!1}]},{id:699,properties:[{name:"collision",type:"bool",value:!1}]},{id:700,properties:[{name:"collision",type:"bool",value:!1}]},{id:701,properties:[{name:"collision",type:"bool",value:!1}]},{id:702,properties:[{name:"collision",type:"bool",value:!1}]},{id:703,properties:[{name:"collision",type:"bool",value:!1}]},{id:704,properties:[{name:"collision",type:"bool",value:!1}]},{id:705,properties:[{name:"collision",type:"bool",value:!1}]},{id:706,properties:[{name:"collision",type:"bool",value:!1}]},{id:707,properties:[{name:"collision",type:"bool",value:!1}]},{id:708,properties:[{name:"collision",type:"bool",value:!1}]},{id:709,properties:[{name:"collision",type:"bool",value:!1}]},{id:710,properties:[{name:"collision",type:"bool",value:!1}]},{id:711,properties:[{name:"collision",type:"bool",value:!1}]},{id:712,properties:[{name:"collision",type:"bool",value:!1}]},{id:713,properties:[{name:"collision",type:"bool",value:!1}]},{id:714,properties:[{name:"collision",type:"bool",value:!1}]},{id:715,properties:[{name:"collision",type:"bool",value:!1}]},{id:716,properties:[{name:"collision",type:"bool",value:!1}]},{id:717,properties:[{name:"collision",type:"bool",value:!1}]},{id:718,properties:[{name:"collision",type:"bool",value:!1}]},{id:719,properties:[{name:"collision",type:"bool",value:!1}]},{id:720,properties:[{name:"collision",type:"bool",value:!1}]},{id:721,properties:[{name:"collision",type:"bool",value:!1}]},{id:722,properties:[{name:"collision",type:"bool",value:!1}]},{id:723,properties:[{name:"collision",type:"bool",value:!1}]},{id:724,properties:[{name:"collision",type:"bool",value:!1}]},{id:725,properties:[{name:"collision",type:"bool",value:!1}]},{id:726,properties:[{name:"collision",type:"bool",value:!1}]},{id:727,properties:[{name:"collision",type:"bool",value:!1}]},{id:728,properties:[{name:"collision",type:"bool",value:!1}]},{id:729,properties:[{name:"collision",type:"bool",value:!1}]},{id:730,properties:[{name:"collision",type:"bool",value:!1}]},{id:731,properties:[{name:"collision",type:"bool",value:!1}]},{id:732,properties:[{name:"collision",type:"bool",value:!1}]},{id:733,properties:[{name:"collision",type:"bool",value:!1}]},{id:734,properties:[{name:"collision",type:"bool",value:!1}]},{id:735,properties:[{name:"collision",type:"bool",value:!1}]},{id:736,properties:[{name:"collision",type:"bool",value:!1}]},{id:737,properties:[{name:"collision",type:"bool",value:!1}]},{id:738,properties:[{name:"collision",type:"bool",value:!1}]},{id:739,properties:[{name:"collision",type:"bool",value:!1}]},{id:740,properties:[{name:"collision",type:"bool",value:!1}]},{id:741,properties:[{name:"collision",type:"bool",value:!1}]},{id:742,properties:[{name:"collision",type:"bool",value:!1}]},{id:743,properties:[{name:"collision",type:"bool",value:!1}]},{id:744,properties:[{name:"collision",type:"bool",value:!1}]},{id:745,properties:[{name:"collision",type:"bool",value:!1}]},{id:746,properties:[{name:"collision",type:"bool",value:!1}]},{id:747,properties:[{name:"collision",type:"bool",value:!1}]},{id:748,properties:[{name:"collision",type:"bool",value:!1}]},{id:749,properties:[{name:"collision",type:"bool",value:!1}]},{id:750,properties:[{name:"collision",type:"bool",value:!1}]},{id:751,properties:[{name:"collision",type:"bool",value:!1}]},{id:752,properties:[{name:"collision",type:"bool",value:!1}]},{id:753,properties:[{name:"collision",type:"bool",value:!1}]},{id:754,properties:[{name:"collision",type:"bool",value:!1}]},{id:755,properties:[{name:"collision",type:"bool",value:!1}]},{id:756,properties:[{name:"collision",type:"bool",value:!1}]},{id:757,properties:[{name:"collision",type:"bool",value:!1}]},{id:758,properties:[{name:"collision",type:"bool",value:!1}]},{id:759,properties:[{name:"collision",type:"bool",value:!1}]},{id:760,properties:[{name:"collision",type:"bool",value:!1}]},{id:761,properties:[{name:"collision",type:"bool",value:!1}]},{id:762,properties:[{name:"collision",type:"bool",value:!1}]},{id:763,properties:[{name:"collision",type:"bool",value:!1}]},{id:764,properties:[{name:"collision",type:"bool",value:!1}]},{id:765,properties:[{name:"collision",type:"bool",value:!1}]},{id:766,properties:[{name:"collision",type:"bool",value:!1}]},{id:767,properties:[{name:"collision",type:"bool",value:!1}]},{id:768,properties:[{name:"collision",type:"bool",value:!1}]},{id:769,properties:[{name:"collision",type:"bool",value:!1}]},{id:770,properties:[{name:"collision",type:"bool",value:!1}]},{id:771,properties:[{name:"collision",type:"bool",value:!1}]},{id:772,properties:[{name:"collision",type:"bool",value:!1}]},{id:773,properties:[{name:"collision",type:"bool",value:!1}]},{id:774,properties:[{name:"collision",type:"bool",value:!1}]},{id:775,properties:[{name:"collision",type:"bool",value:!1}]},{id:776,properties:[{name:"collision",type:"bool",value:!1}]},{id:777,properties:[{name:"collision",type:"bool",value:!1}]},{id:778,properties:[{name:"collision",type:"bool",value:!1}]},{id:779,properties:[{name:"collision",type:"bool",value:!1}]},{id:780,properties:[{name:"collision",type:"bool",value:!1}]},{id:781,properties:[{name:"collision",type:"bool",value:!1}]},{id:782,properties:[{name:"collision",type:"bool",value:!1}]},{id:783,properties:[{name:"collision",type:"bool",value:!1}]},{id:784,properties:[{name:"collision",type:"bool",value:!1}]},{id:785,properties:[{name:"collision",type:"bool",value:!1}]},{id:786,properties:[{name:"collision",type:"bool",value:!1}]},{id:787,properties:[{name:"collision",type:"bool",value:!1}]},{id:788,properties:[{name:"collision",type:"bool",value:!1}]},{id:789,properties:[{name:"collision",type:"bool",value:!1}]},{id:790,properties:[{name:"collision",type:"bool",value:!1}]},{id:791,properties:[{name:"collision",type:"bool",value:!1}]},{id:792,properties:[{name:"collision",type:"bool",value:!1}]},{id:793,properties:[{name:"collision",type:"bool",value:!1}]},{id:794,properties:[{name:"collision",type:"bool",value:!1}]},{id:795,properties:[{name:"collision",type:"bool",value:!1}]},{id:796,properties:[{name:"collision",type:"bool",value:!1}]},{id:797,properties:[{name:"collision",type:"bool",value:!1}]},{id:798,properties:[{name:"collision",type:"bool",value:!1}]},{id:799,properties:[{name:"collision",type:"bool",value:!1}]},{id:800,properties:[{name:"collision",type:"bool",value:!1}]},{id:801,properties:[{name:"collision",type:"bool",value:!1}]},{id:802,properties:[{name:"collision",type:"bool",value:!1}]},{id:803,properties:[{name:"collision",type:"bool",value:!1}]},{id:804,properties:[{name:"collision",type:"bool",value:!1}]},{id:805,properties:[{name:"collision",type:"bool",value:!1}]},{id:806,properties:[{name:"collision",type:"bool",value:!1}]},{id:807,properties:[{name:"collision",type:"bool",value:!1}]},{id:808,properties:[{name:"collision",type:"bool",value:!1}]},{id:809,properties:[{name:"collision",type:"bool",value:!1}]},{id:810,properties:[{name:"collision",type:"bool",value:!1}]},{id:811,properties:[{name:"collision",type:"bool",value:!1}]},{id:812,properties:[{name:"collision",type:"bool",value:!1}]},{id:813,properties:[{name:"collision",type:"bool",value:!1}]},{id:814,properties:[{name:"collision",type:"bool",value:!1}]},{id:815,properties:[{name:"collision",type:"bool",value:!1}]},{id:816,properties:[{name:"collision",type:"bool",value:!1}]},{id:817,properties:[{name:"collision",type:"bool",value:!1}]},{id:818,properties:[{name:"collision",type:"bool",value:!1}]},{id:819,properties:[{name:"collision",type:"bool",value:!1}]},{id:820,properties:[{name:"collision",type:"bool",value:!1}]},{id:821,properties:[{name:"collision",type:"bool",value:!1}]},{id:822,properties:[{name:"collision",type:"bool",value:!1}]},{id:823,properties:[{name:"collision",type:"bool",value:!1}]},{id:824,properties:[{name:"collision",type:"bool",value:!1}]},{id:825,properties:[{name:"collision",type:"bool",value:!1}]},{id:826,properties:[{name:"collision",type:"bool",value:!1}]},{id:827,properties:[{name:"collision",type:"bool",value:!1}]},{id:828,properties:[{name:"collision",type:"bool",value:!1}]},{id:829,properties:[{name:"collision",type:"bool",value:!1}]},{id:830,properties:[{name:"collision",type:"bool",value:!1}]},{id:831,properties:[{name:"collision",type:"bool",value:!1}]},{id:832,properties:[{name:"collision",type:"bool",value:!1}]},{id:833,properties:[{name:"collision",type:"bool",value:!1}]},{id:834,properties:[{name:"collision",type:"bool",value:!1}]},{id:835,properties:[{name:"collision",type:"bool",value:!1}]},{id:836,properties:[{name:"collision",type:"bool",value:!1}]},{id:837,properties:[{name:"collision",type:"bool",value:!1}]},{id:838,properties:[{name:"collision",type:"bool",value:!1}]},{id:839,properties:[{name:"collision",type:"bool",value:!1}]},{id:840,properties:[{name:"collision",type:"bool",value:!1}]},{id:841,properties:[{name:"collision",type:"bool",value:!1}]},{id:842,properties:[{name:"collision",type:"bool",value:!1}]},{id:843,properties:[{name:"collision",type:"bool",value:!1}]},{id:844,properties:[{name:"collision",type:"bool",value:!1}]},{id:845,properties:[{name:"collision",type:"bool",value:!1}]},{id:846,properties:[{name:"collision",type:"bool",value:!1}]},{id:847,properties:[{name:"collision",type:"bool",value:!1}]},{id:848,properties:[{name:"collision",type:"bool",value:!1}]},{id:849,properties:[{name:"collision",type:"bool",value:!1}]},{id:850,properties:[{name:"collision",type:"bool",value:!1}]},{id:851,properties:[{name:"collision",type:"bool",value:!1}]},{id:852,properties:[{name:"collision",type:"bool",value:!1}]},{id:853,properties:[{name:"collision",type:"bool",value:!1}]},{id:854,properties:[{name:"collision",type:"bool",value:!1}]},{id:855,properties:[{name:"collision",type:"bool",value:!1}]},{id:856,properties:[{name:"collision",type:"bool",value:!1}]},{id:857,properties:[{name:"collision",type:"bool",value:!1}]},{id:858,properties:[{name:"collision",type:"bool",value:!1}]},{id:859,properties:[{name:"collision",type:"bool",value:!1}]},{id:860,properties:[{name:"collision",type:"bool",value:!1}]},{id:861,properties:[{name:"collision",type:"bool",value:!1}]},{id:862,properties:[{name:"collision",type:"bool",value:!1}]},{id:863,properties:[{name:"collision",type:"bool",value:!1}]},{id:864,properties:[{name:"collision",type:"bool",value:!1}]},{id:865,properties:[{name:"collision",type:"bool",value:!1}]},{id:866,properties:[{name:"collision",type:"bool",value:!1}]},{id:867,properties:[{name:"collision",type:"bool",value:!1}]},{id:868,properties:[{name:"collision",type:"bool",value:!1}]},{id:869,properties:[{name:"collision",type:"bool",value:!1}]},{id:870,properties:[{name:"collision",type:"bool",value:!1}]},{id:871,properties:[{name:"collision",type:"bool",value:!1}]},{id:872,properties:[{name:"collision",type:"bool",value:!1}]},{id:873,properties:[{name:"collision",type:"bool",value:!1}]},{id:874,properties:[{name:"collision",type:"bool",value:!1}]},{id:875,properties:[{name:"collision",type:"bool",value:!1}]},{id:876,properties:[{name:"collision",type:"bool",value:!1}]},{id:877,properties:[{name:"collision",type:"bool",value:!1}]},{id:878,properties:[{name:"collision",type:"bool",value:!1}]},{id:879,properties:[{name:"collision",type:"bool",value:!1}]},{id:880,properties:[{name:"collision",type:"bool",value:!1}]},{id:881,properties:[{name:"collision",type:"bool",value:!1}]},{id:882,properties:[{name:"collision",type:"bool",value:!1}]},{id:883,properties:[{name:"collision",type:"bool",value:!1}]},{id:884,properties:[{name:"collision",type:"bool",value:!1}]},{id:885,properties:[{name:"collision",type:"bool",value:!1}]},{id:886,properties:[{name:"collision",type:"bool",value:!1}]},{id:887,properties:[{name:"collision",type:"bool",value:!1}]},{id:888,properties:[{name:"collision",type:"bool",value:!1}]},{id:889,properties:[{name:"collision",type:"bool",value:!1}]},{id:890,properties:[{name:"collision",type:"bool",value:!1}]},{id:891,properties:[{name:"collision",type:"bool",value:!1}]},{id:892,properties:[{name:"collision",type:"bool",value:!1}]},{id:893,properties:[{name:"collision",type:"bool",value:!1}]},{id:894,properties:[{name:"collision",type:"bool",value:!1}]},{id:895,properties:[{name:"collision",type:"bool",value:!1}]},{id:896,properties:[{name:"collision",type:"bool",value:!1}]},{id:897,properties:[{name:"collision",type:"bool",value:!1}]},{id:898,properties:[{name:"collision",type:"bool",value:!1}]},{id:899,properties:[{name:"collision",type:"bool",value:!1}]},{id:900,properties:[{name:"collision",type:"bool",value:!1}]},{id:901,properties:[{name:"collision",type:"bool",value:!1}]},{id:902,properties:[{name:"collision",type:"bool",value:!1}]},{id:903,properties:[{name:"collision",type:"bool",value:!1}]},{id:904,properties:[{name:"collision",type:"bool",value:!1}]},{id:905,properties:[{name:"collision",type:"bool",value:!1}]},{id:906,properties:[{name:"collision",type:"bool",value:!1}]},{id:907,properties:[{name:"collision",type:"bool",value:!1}]},{id:908,properties:[{name:"collision",type:"bool",value:!1}]},{id:909,properties:[{name:"collision",type:"bool",value:!1}]},{id:910,properties:[{name:"collision",type:"bool",value:!1}]},{id:911,properties:[{name:"collision",type:"bool",value:!1}]},{id:912,properties:[{name:"collision",type:"bool",value:!1}]},{id:913,properties:[{name:"collision",type:"bool",value:!1}]},{id:914,properties:[{name:"collision",type:"bool",value:!1}]},{id:915,properties:[{name:"collision",type:"bool",value:!1}]},{id:916,properties:[{name:"collision",type:"bool",value:!1}]},{id:917,properties:[{name:"collision",type:"bool",value:!1}]},{id:918,properties:[{name:"collision",type:"bool",value:!1}]},{id:919,properties:[{name:"collision",type:"bool",value:!1}]},{id:920,properties:[{name:"collision",type:"bool",value:!1}]},{id:921,properties:[{name:"collision",type:"bool",value:!1}]},{id:922,properties:[{name:"collision",type:"bool",value:!1}]},{id:923,properties:[{name:"collision",type:"bool",value:!1}]},{id:924,properties:[{name:"collision",type:"bool",value:!1}]},{id:925,properties:[{name:"collision",type:"bool",value:!1}]},{id:926,properties:[{name:"collision",type:"bool",value:!1}]},{id:927,properties:[{name:"collision",type:"bool",value:!1}]},{id:928,properties:[{name:"collision",type:"bool",value:!1}]},{id:929,properties:[{name:"collision",type:"bool",value:!1}]},{id:930,properties:[{name:"collision",type:"bool",value:!1}]},{id:931,properties:[{name:"collision",type:"bool",value:!1}]},{id:932,properties:[{name:"collision",type:"bool",value:!1}]},{id:933,properties:[{name:"collision",type:"bool",value:!1}]},{id:934,properties:[{name:"collision",type:"bool",value:!1}]},{id:935,properties:[{name:"collision",type:"bool",value:!1}]},{id:936,properties:[{name:"collision",type:"bool",value:!1}]},{id:937,properties:[{name:"collision",type:"bool",value:!1}]},{id:938,properties:[{name:"collision",type:"bool",value:!1}]},{id:939,properties:[{name:"collision",type:"bool",value:!1}]},{id:940,properties:[{name:"collision",type:"bool",value:!1}]},{id:941,properties:[{name:"collision",type:"bool",value:!1}]},{id:942,properties:[{name:"collision",type:"bool",value:!1}]},{id:943,properties:[{name:"collision",type:"bool",value:!1}]},{id:944,properties:[{name:"collision",type:"bool",value:!1}]},{id:945,properties:[{name:"collision",type:"bool",value:!1}]},{id:946,properties:[{name:"collision",type:"bool",value:!1}]},{id:947,properties:[{name:"collision",type:"bool",value:!1}]},{id:948,properties:[{name:"collision",type:"bool",value:!1}]},{id:949,properties:[{name:"collision",type:"bool",value:!1}]},{id:950,properties:[{name:"collision",type:"bool",value:!1}]},{id:951,properties:[{name:"collision",type:"bool",value:!1}]},{id:952,properties:[{name:"collision",type:"bool",value:!1}]},{id:953,properties:[{name:"collision",type:"bool",value:!1}]},{id:954,properties:[{name:"collision",type:"bool",value:!1}]},{id:955,properties:[{name:"collision",type:"bool",value:!1}]},{id:956,properties:[{name:"collision",type:"bool",value:!1}]},{id:957,properties:[{name:"collision",type:"bool",value:!1}]},{id:958,properties:[{name:"collision",type:"bool",value:!1}]},{id:959,properties:[{name:"collision",type:"bool",value:!1}]},{id:960,properties:[{name:"collision",type:"bool",value:!1}]},{id:961,properties:[{name:"collision",type:"bool",value:!1}]},{id:962,properties:[{name:"collision",type:"bool",value:!1}]},{id:963,properties:[{name:"collision",type:"bool",value:!1}]},{id:964,properties:[{name:"collision",type:"bool",value:!1}]},{id:965,properties:[{name:"collision",type:"bool",value:!1}]},{id:966,properties:[{name:"collision",type:"bool",value:!1}]},{id:967,properties:[{name:"collision",type:"bool",value:!1}]},{id:968,properties:[{name:"collision",type:"bool",value:!1}]},{id:969,properties:[{name:"collision",type:"bool",value:!1}]},{id:970,properties:[{name:"collision",type:"bool",value:!1}]},{id:971,properties:[{name:"collision",type:"bool",value:!1}]},{id:972,properties:[{name:"collision",type:"bool",value:!1}]},{id:973,properties:[{name:"collision",type:"bool",value:!1}]},{id:974,properties:[{name:"collision",type:"bool",value:!1}]},{id:975,properties:[{name:"collision",type:"bool",value:!1}]},{id:976,properties:[{name:"collision",type:"bool",value:!1}]},{id:977,properties:[{name:"collision",type:"bool",value:!1}]},{id:978,properties:[{name:"collision",type:"bool",value:!1}]},{id:979,properties:[{name:"collision",type:"bool",value:!1}]},{id:980,properties:[{name:"collision",type:"bool",value:!1}]},{id:981,properties:[{name:"collision",type:"bool",value:!1}]},{id:982,properties:[{name:"collision",type:"bool",value:!1}]},{id:983,properties:[{name:"collision",type:"bool",value:!1}]},{id:984,properties:[{name:"collision",type:"bool",value:!1}]},{id:985,properties:[{name:"collision",type:"bool",value:!1}]},{id:986,properties:[{name:"collision",type:"bool",value:!1}]},{id:987,properties:[{name:"collision",type:"bool",value:!1}]},{id:988,properties:[{name:"collision",type:"bool",value:!1}]},{id:989,properties:[{name:"collision",type:"bool",value:!1}]},{id:990,properties:[{name:"collision",type:"bool",value:!1}]},{id:991,properties:[{name:"collision",type:"bool",value:!1}]},{id:992,properties:[{name:"collision",type:"bool",value:!1}]},{id:993,properties:[{name:"collision",type:"bool",value:!1}]},{id:994,properties:[{name:"collision",type:"bool",value:!1}]},{id:995,properties:[{name:"collision",type:"bool",value:!1}]},{id:996,properties:[{name:"collision",type:"bool",value:!1}]},{id:997,properties:[{name:"collision",type:"bool",value:!1}]},{id:998,properties:[{name:"collision",type:"bool",value:!1}]},{id:999,properties:[{name:"collision",type:"bool",value:!1}]},{id:1e3,properties:[{name:"collision",type:"bool",value:!1}]},{id:1001,properties:[{name:"collision",type:"bool",value:!1}]},{id:1002,properties:[{name:"collision",type:"bool",value:!1}]},{id:1003,properties:[{name:"collision",type:"bool",value:!1}]},{id:1004,properties:[{name:"collision",type:"bool",value:!1}]},{id:1005,properties:[{name:"collision",type:"bool",value:!1}]},{id:1006,properties:[{name:"collision",type:"bool",value:!1}]},{id:1007,properties:[{name:"collision",type:"bool",value:!1}]},{id:1008,properties:[{name:"collision",type:"bool",value:!1}]},{id:1009,properties:[{name:"collision",type:"bool",value:!1}]},{id:1010,properties:[{name:"collision",type:"bool",value:!1}]},{id:1011,properties:[{name:"collision",type:"bool",value:!1}]},{id:1012,properties:[{name:"collision",type:"bool",value:!1}]},{id:1013,properties:[{name:"collision",type:"bool",value:!1}]},{id:1014,properties:[{name:"collision",type:"bool",value:!1}]},{id:1015,properties:[{name:"collision",type:"bool",value:!1}]},{id:1016,properties:[{name:"collision",type:"bool",value:!1}]},{id:1017,properties:[{name:"collision",type:"bool",value:!1}]},{id:1018,properties:[{name:"collision",type:"bool",value:!1}]},{id:1019,properties:[{name:"collision",type:"bool",value:!1}]},{id:1020,properties:[{name:"collision",type:"bool",value:!1}]},{id:1021,properties:[{name:"collision",type:"bool",value:!1}]},{id:1022,properties:[{name:"collision",type:"bool",value:!1}]},{id:1023,properties:[{name:"collision",type:"bool",value:!1}]},{id:1024,properties:[{name:"collision",type:"bool",value:!1}]},{id:1025,properties:[{name:"collision",type:"bool",value:!1}]},{id:1026,properties:[{name:"collision",type:"bool",value:!1}]},{id:1027,properties:[{name:"collision",type:"bool",value:!1}]},{id:1028,properties:[{name:"collision",type:"bool",value:!1}]},{id:1029,properties:[{name:"collision",type:"bool",value:!1}]},{id:1030,properties:[{name:"collision",type:"bool",value:!1}]},{id:1031,properties:[{name:"collision",type:"bool",value:!1}]},{id:1032,properties:[{name:"collision",type:"bool",value:!1}]},{id:1033,properties:[{name:"collision",type:"bool",value:!1}]},{id:1034,properties:[{name:"collision",type:"bool",value:!1}]},{id:1035,properties:[{name:"collision",type:"bool",value:!1}]},{id:1036,properties:[{name:"collision",type:"bool",value:!1}]},{id:1037,properties:[{name:"collision",type:"bool",value:!1}]},{id:1038,properties:[{name:"collision",type:"bool",value:!1}]},{id:1039,properties:[{name:"collision",type:"bool",value:!1}]},{id:1040,properties:[{name:"collision",type:"bool",value:!1}]},{id:1041,properties:[{name:"collision",type:"bool",value:!1}]},{id:1042,properties:[{name:"collision",type:"bool",value:!1}]},{id:1043,properties:[{name:"collision",type:"bool",value:!1}]},{id:1044,properties:[{name:"collision",type:"bool",value:!1}]},{id:1045,properties:[{name:"collision",type:"bool",value:!1}]},{id:1046,properties:[{name:"collision",type:"bool",value:!1}]},{id:1047,properties:[{name:"collision",type:"bool",value:!1}]},{id:1048,properties:[{name:"collision",type:"bool",value:!1}]},{id:1049,properties:[{name:"collision",type:"bool",value:!1}]},{id:1050,properties:[{name:"collision",type:"bool",value:!1}]},{id:1051,properties:[{name:"collision",type:"bool",value:!1}]},{id:1052,properties:[{name:"collision",type:"bool",value:!1}]},{id:1053,properties:[{name:"collision",type:"bool",value:!1}]},{id:1054,properties:[{name:"collision",type:"bool",value:!1}]},{id:1055,properties:[{name:"collision",type:"bool",value:!1}]},{id:1056,properties:[{name:"collision",type:"bool",value:!1}]},{id:1057,properties:[{name:"collision",type:"bool",value:!1}]},{id:1058,properties:[{name:"collision",type:"bool",value:!1}]},{id:1059,properties:[{name:"collision",type:"bool",value:!1}]},{id:1060,properties:[{name:"collision",type:"bool",value:!1}]},{id:1061,properties:[{name:"collision",type:"bool",value:!1}]},{id:1062,properties:[{name:"collision",type:"bool",value:!1}]},{id:1063,properties:[{name:"collision",type:"bool",value:!1}]},{id:1064,properties:[{name:"collision",type:"bool",value:!1}]},{id:1065,properties:[{name:"collision",type:"bool",value:!1}]},{id:1066,properties:[{name:"collision",type:"bool",value:!1}]},{id:1067,properties:[{name:"collision",type:"bool",value:!1}]},{id:1068,properties:[{name:"collision",type:"bool",value:!1}]},{id:1069,properties:[{name:"collision",type:"bool",value:!1}]},{id:1070,properties:[{name:"collision",type:"bool",value:!1}]},{id:1071,properties:[{name:"collision",type:"bool",value:!1}]},{id:1072,properties:[{name:"collision",type:"bool",value:!1}]},{id:1073,properties:[{name:"collision",type:"bool",value:!1}]},{id:1074,properties:[{name:"collision",type:"bool",value:!1}]},{id:1075,properties:[{name:"collision",type:"bool",value:!1}]},{id:1076,properties:[{name:"collision",type:"bool",value:!1}]},{id:1077,properties:[{name:"collision",type:"bool",value:!1}]},{id:1078,properties:[{name:"collision",type:"bool",value:!1}]},{id:1079,properties:[{name:"collision",type:"bool",value:!1}]},{id:1080,properties:[{name:"collision",type:"bool",value:!1}]},{id:1081,properties:[{name:"collision",type:"bool",value:!1}]},{id:1082,properties:[{name:"collision",type:"bool",value:!1}]},{id:1083,properties:[{name:"collision",type:"bool",value:!1}]},{id:1084,properties:[{name:"collision",type:"bool",value:!1}]},{id:1085,properties:[{name:"collision",type:"bool",value:!1}]},{id:1086,properties:[{name:"collision",type:"bool",value:!1}]},{id:1087,properties:[{name:"collision",type:"bool",value:!1}]},{id:1088,properties:[{name:"collision",type:"bool",value:!1}]},{id:1089,properties:[{name:"collision",type:"bool",value:!1}]},{id:1090,properties:[{name:"collision",type:"bool",value:!1}]},{id:1091,properties:[{name:"collision",type:"bool",value:!1}]},{id:1092,properties:[{name:"collision",type:"bool",value:!1}]},{id:1093,properties:[{name:"collision",type:"bool",value:!1}]},{id:1094,properties:[{name:"collision",type:"bool",value:!1}]},{id:1095,properties:[{name:"collision",type:"bool",value:!1}]},{id:1096,properties:[{name:"collision",type:"bool",value:!1}]},{id:1097,properties:[{name:"collision",type:"bool",value:!1}]},{id:1098,properties:[{name:"collision",type:"bool",value:!1}]},{id:1099,properties:[{name:"collision",type:"bool",value:!1}]},{id:1100,properties:[{name:"collision",type:"bool",value:!1}]},{id:1101,properties:[{name:"collision",type:"bool",value:!1}]},{id:1102,properties:[{name:"collision",type:"bool",value:!1}]},{id:1103,properties:[{name:"collision",type:"bool",value:!1}]},{id:1104,properties:[{name:"collision",type:"bool",value:!1}]},{id:1105,properties:[{name:"collision",type:"bool",value:!1}]},{id:1106,properties:[{name:"collision",type:"bool",value:!1}]},{id:1107,properties:[{name:"collision",type:"bool",value:!1}]},{id:1108,properties:[{name:"collision",type:"bool",value:!1}]},{id:1109,properties:[{name:"collision",type:"bool",value:!1}]},{id:1110,properties:[{name:"collision",type:"bool",value:!1}]},{id:1111,properties:[{name:"collision",type:"bool",value:!1}]},{id:1112,properties:[{name:"collision",type:"bool",value:!1}]},{id:1113,properties:[{name:"collision",type:"bool",value:!1}]},{id:1114,properties:[{name:"collision",type:"bool",value:!1}]},{id:1115,properties:[{name:"collision",type:"bool",value:!1}]},{id:1116,properties:[{name:"collision",type:"bool",value:!1}]},{id:1117,properties:[{name:"collision",type:"bool",value:!1}]},{id:1118,properties:[{name:"collision",type:"bool",value:!1}]},{id:1119,properties:[{name:"collision",type:"bool",value:!1}]},{id:1120,properties:[{name:"collision",type:"bool",value:!1}]},{id:1121,properties:[{name:"collision",type:"bool",value:!1}]},{id:1122,properties:[{name:"collision",type:"bool",value:!1}]},{id:1123,properties:[{name:"collision",type:"bool",value:!1}]},{id:1124,properties:[{name:"collision",type:"bool",value:!1}]},{id:1125,properties:[{name:"collision",type:"bool",value:!1}]},{id:1126,properties:[{name:"collision",type:"bool",value:!1}]},{id:1127,properties:[{name:"collision",type:"bool",value:!1}]},{id:1128,properties:[{name:"collision",type:"bool",value:!1}]},{id:1129,properties:[{name:"collision",type:"bool",value:!1}]},{id:1130,properties:[{name:"collision",type:"bool",value:!1}]},{id:1131,properties:[{name:"collision",type:"bool",value:!1}]},{id:1132,properties:[{name:"collision",type:"bool",value:!1}]},{id:1133,properties:[{name:"collision",type:"bool",value:!1}]},{id:1134,properties:[{name:"collision",type:"bool",value:!1}]},{id:1135,properties:[{name:"collision",type:"bool",value:!1}]},{id:1136,properties:[{name:"collision",type:"bool",value:!1}]},{id:1137,properties:[{name:"collision",type:"bool",value:!1}]},{id:1138,properties:[{name:"collision",type:"bool",value:!1}]},{id:1139,properties:[{name:"collision",type:"bool",value:!1}]},{id:1140,properties:[{name:"collision",type:"bool",value:!1}]},{id:1141,properties:[{name:"collision",type:"bool",value:!1}]},{id:1142,properties:[{name:"collision",type:"bool",value:!1}]},{id:1143,properties:[{name:"collision",type:"bool",value:!1}]},{id:1144,properties:[{name:"collision",type:"bool",value:!1}]},{id:1145,properties:[{name:"collision",type:"bool",value:!1}]},{id:1146,properties:[{name:"collision",type:"bool",value:!1}]},{id:1147,properties:[{name:"collision",type:"bool",value:!1}]},{id:1148,properties:[{name:"collision",type:"bool",value:!1}]},{id:1149,properties:[{name:"collision",type:"bool",value:!1}]},{id:1150,properties:[{name:"collision",type:"bool",value:!1}]},{id:1151,properties:[{name:"collision",type:"bool",value:!1}]},{id:1152,properties:[{name:"collision",type:"bool",value:!1}]},{id:1153,properties:[{name:"collision",type:"bool",value:!1}]},{id:1154,properties:[{name:"collision",type:"bool",value:!1}]},{id:1155,properties:[{name:"collision",type:"bool",value:!1}]},{id:1156,properties:[{name:"collision",type:"bool",value:!1}]},{id:1157,properties:[{name:"collision",type:"bool",value:!1}]},{id:1158,properties:[{name:"collision",type:"bool",value:!1}]},{id:1159,properties:[{name:"collision",type:"bool",value:!1}]},{id:1160,properties:[{name:"collision",type:"bool",value:!1}]},{id:1161,properties:[{name:"collision",type:"bool",value:!1}]},{id:1162,properties:[{name:"collision",type:"bool",value:!1}]},{id:1163,properties:[{name:"collision",type:"bool",value:!1}]},{id:1164,properties:[{name:"collision",type:"bool",value:!1}]},{id:1165,properties:[{name:"collision",type:"bool",value:!1}]},{id:1166,properties:[{name:"collision",type:"bool",value:!1}]},{id:1167,properties:[{name:"collision",type:"bool",value:!1}]},{id:1168,properties:[{name:"collision",type:"bool",value:!1}]},{id:1169,properties:[{name:"collision",type:"bool",value:!1}]},{id:1170,properties:[{name:"collision",type:"bool",value:!1}]},{id:1171,properties:[{name:"collision",type:"bool",value:!1}]},{id:1172,properties:[{name:"collision",type:"bool",value:!1}]},{id:1173,properties:[{name:"collision",type:"bool",value:!1}]},{id:1174,properties:[{name:"collision",type:"bool",value:!1}]},{id:1175,properties:[{name:"collision",type:"bool",value:!1}]},{id:1176,properties:[{name:"collision",type:"bool",value:!1}]},{id:1177,properties:[{name:"collision",type:"bool",value:!1}]},{id:1178,properties:[{name:"collision",type:"bool",value:!1}]},{id:1179,properties:[{name:"collision",type:"bool",value:!1}]},{id:1180,properties:[{name:"collision",type:"bool",value:!1}]},{id:1181,properties:[{name:"collision",type:"bool",value:!1}]},{id:1182,properties:[{name:"collision",type:"bool",value:!1}]},{id:1183,properties:[{name:"collision",type:"bool",value:!1}]},{id:1184,properties:[{name:"collision",type:"bool",value:!1}]},{id:1185,properties:[{name:"collision",type:"bool",value:!1}]},{id:1186,properties:[{name:"collision",type:"bool",value:!1}]},{id:1187,properties:[{name:"collision",type:"bool",value:!1}]},{id:1188,properties:[{name:"collision",type:"bool",value:!1}]},{id:1189,properties:[{name:"collision",type:"bool",value:!1}]},{id:1190,properties:[{name:"collision",type:"bool",value:!1}]},{id:1191,properties:[{name:"collision",type:"bool",value:!1}]},{id:1192,properties:[{name:"collision",type:"bool",value:!1}]},{id:1193,properties:[{name:"collision",type:"bool",value:!1}]},{id:1194,properties:[{name:"collision",type:"bool",value:!1}]},{id:1195,properties:[{name:"collision",type:"bool",value:!1}]},{id:1196,properties:[{name:"collision",type:"bool",value:!1}]},{id:1197,properties:[{name:"collision",type:"bool",value:!1}]},{id:1198,properties:[{name:"collision",type:"bool",value:!1}]},{id:1199,properties:[{name:"collision",type:"bool",value:!1}]},{id:1200,properties:[{name:"collision",type:"bool",value:!1}]},{id:1201,properties:[{name:"collision",type:"bool",value:!1}]},{id:1202,properties:[{name:"collision",type:"bool",value:!1}]},{id:1203,properties:[{name:"collision",type:"bool",value:!1}]},{id:1204,properties:[{name:"collision",type:"bool",value:!1}]},{id:1205,properties:[{name:"collision",type:"bool",value:!1}]},{id:1206,properties:[{name:"collision",type:"bool",value:!1}]},{id:1207,properties:[{name:"collision",type:"bool",value:!1}]},{id:1208,properties:[{name:"collision",type:"bool",value:!1}]},{id:1209,properties:[{name:"collision",type:"bool",value:!1}]},{id:1210,properties:[{name:"collision",type:"bool",value:!1}]},{id:1211,properties:[{name:"collision",type:"bool",value:!1}]},{id:1212,properties:[{name:"collision",type:"bool",value:!1}]},{id:1213,properties:[{name:"collision",type:"bool",value:!1}]},{id:1214,properties:[{name:"collision",type:"bool",value:!1}]},{id:1215,properties:[{name:"collision",type:"bool",value:!1}]},{id:1216,properties:[{name:"collision",type:"bool",value:!1}]},{id:1217,properties:[{name:"collision",type:"bool",value:!1}]},{id:1218,properties:[{name:"collision",type:"bool",value:!1}]},{id:1219,properties:[{name:"collision",type:"bool",value:!1}]},{id:1220,properties:[{name:"collision",type:"bool",value:!1}]},{id:1221,properties:[{name:"collision",type:"bool",value:!1}]},{id:1222,properties:[{name:"collision",type:"bool",value:!1}]},{id:1223,properties:[{name:"collision",type:"bool",value:!1}]},{id:1224,properties:[{name:"collision",type:"bool",value:!1}]},{id:1225,properties:[{name:"collision",type:"bool",value:!1}]},{id:1226,properties:[{name:"collision",type:"bool",value:!1}]},{id:1227,properties:[{name:"collision",type:"bool",value:!1}]},{id:1228,properties:[{name:"collision",type:"bool",value:!1}]},{id:1229,properties:[{name:"collision",type:"bool",value:!1}]},{id:1230,properties:[{name:"collision",type:"bool",value:!1}]},{id:1231,properties:[{name:"collision",type:"bool",value:!1}]},{id:1232,properties:[{name:"collision",type:"bool",value:!1}]},{id:1233,properties:[{name:"collision",type:"bool",value:!1}]},{id:1234,properties:[{name:"collision",type:"bool",value:!1}]},{id:1235,properties:[{name:"collision",type:"bool",value:!1}]},{id:1236,properties:[{name:"collision",type:"bool",value:!1}]},{id:1237,properties:[{name:"collision",type:"bool",value:!1}]},{id:1238,properties:[{name:"collision",type:"bool",value:!1}]},{id:1239,properties:[{name:"collision",type:"bool",value:!1}]},{id:1240,properties:[{name:"collision",type:"bool",value:!1}]},{id:1241,properties:[{name:"collision",type:"bool",value:!1}]},{id:1242,properties:[{name:"collision",type:"bool",value:!1}]},{id:1243,properties:[{name:"collision",type:"bool",value:!1}]},{id:1244,properties:[{name:"collision",type:"bool",value:!1}]},{id:1245,properties:[{name:"collision",type:"bool",value:!1}]},{id:1246,properties:[{name:"collision",type:"bool",value:!1}]},{id:1247,properties:[{name:"collision",type:"bool",value:!1}]},{id:1248,properties:[{name:"collision",type:"bool",value:!1}]},{id:1249,properties:[{name:"collision",type:"bool",value:!1}]},{id:1250,properties:[{name:"collision",type:"bool",value:!1}]},{id:1251,properties:[{name:"collision",type:"bool",value:!1}]},{id:1252,properties:[{name:"collision",type:"bool",value:!1}]},{id:1253,properties:[{name:"collision",type:"bool",value:!1}]},{id:1254,properties:[{name:"collision",type:"bool",value:!1}]},{id:1255,properties:[{name:"collision",type:"bool",value:!1}]},{id:1256,properties:[{name:"collision",type:"bool",value:!1}]},{id:1257,properties:[{name:"collision",type:"bool",value:!1}]},{id:1258,properties:[{name:"collision",type:"bool",value:!1}]},{id:1259,properties:[{name:"collision",type:"bool",value:!1}]},{id:1260,properties:[{name:"collision",type:"bool",value:!1}]},{id:1261,properties:[{name:"collision",type:"bool",value:!1}]},{id:1262,properties:[{name:"collision",type:"bool",value:!1}]},{id:1263,properties:[{name:"collision",type:"bool",value:!1}]},{id:1264,properties:[{name:"collision",type:"bool",value:!1}]},{id:1265,properties:[{name:"collision",type:"bool",value:!1}]},{id:1266,properties:[{name:"collision",type:"bool",value:!1}]},{id:1267,properties:[{name:"collision",type:"bool",value:!1}]},{id:1268,properties:[{name:"collision",type:"bool",value:!1}]},{id:1269,properties:[{name:"collision",type:"bool",value:!1}]},{id:1270,properties:[{name:"collision",type:"bool",value:!1}]},{id:1271,properties:[{name:"collision",type:"bool",value:!1}]},{id:1272,properties:[{name:"collision",type:"bool",value:!1}]},{id:1273,properties:[{name:"collision",type:"bool",value:!1}]},{id:1274,properties:[{name:"collision",type:"bool",value:!1}]},{id:1275,properties:[{name:"collision",type:"bool",value:!1}]},{id:1276,properties:[{name:"collision",type:"bool",value:!1}]},{id:1277,properties:[{name:"collision",type:"bool",value:!1}]},{id:1278,properties:[{name:"collision",type:"bool",value:!1}]},{id:1279,properties:[{name:"collision",type:"bool",value:!1}]},{id:1280,properties:[{name:"collision",type:"bool",value:!1}]},{id:1281,properties:[{name:"collision",type:"bool",value:!1}]},{id:1282,properties:[{name:"collision",type:"bool",value:!1}]},{id:1283,properties:[{name:"collision",type:"bool",value:!1}]},{id:1284,properties:[{name:"collision",type:"bool",value:!1}]},{id:1285,properties:[{name:"collision",type:"bool",value:!1}]},{id:1286,properties:[{name:"collision",type:"bool",value:!1}]},{id:1287,properties:[{name:"collision",type:"bool",value:!1}]},{id:1288,properties:[{name:"collision",type:"bool",value:!1}]},{id:1289,properties:[{name:"collision",type:"bool",value:!1}]},{id:1290,properties:[{name:"collision",type:"bool",value:!1}]},{id:1291,properties:[{name:"collision",type:"bool",value:!1}]},{id:1292,properties:[{name:"collision",type:"bool",value:!1}]},{id:1293,properties:[{name:"collision",type:"bool",value:!1}]},{id:1294,properties:[{name:"collision",type:"bool",value:!1}]},{id:1295,properties:[{name:"collision",type:"bool",value:!1}]},{id:1296,properties:[{name:"collision",type:"bool",value:!1}]},{id:1297,properties:[{name:"collision",type:"bool",value:!1}]},{id:1298,properties:[{name:"collision",type:"bool",value:!1}]},{id:1299,properties:[{name:"collision",type:"bool",value:!1}]},{id:1300,properties:[{name:"collision",type:"bool",value:!1}]},{id:1301,properties:[{name:"collision",type:"bool",value:!1}]},{id:1302,properties:[{name:"collision",type:"bool",value:!1}]},{id:1303,properties:[{name:"collision",type:"bool",value:!1}]},{id:1304,properties:[{name:"collision",type:"bool",value:!1}]},{id:1305,properties:[{name:"collision",type:"bool",value:!1}]},{id:1306,properties:[{name:"collision",type:"bool",value:!1}]},{id:1307,properties:[{name:"collision",type:"bool",value:!1}]},{id:1308,properties:[{name:"collision",type:"bool",value:!1}]},{id:1309,properties:[{name:"collision",type:"bool",value:!1}]},{id:1310,properties:[{name:"collision",type:"bool",value:!1}]},{id:1311,properties:[{name:"collision",type:"bool",value:!1}]},{id:1312,properties:[{name:"collision",type:"bool",value:!1}]},{id:1313,properties:[{name:"collision",type:"bool",value:!1}]},{id:1314,properties:[{name:"collision",type:"bool",value:!1}]},{id:1315,properties:[{name:"collision",type:"bool",value:!1}]},{id:1316,properties:[{name:"collision",type:"bool",value:!1}]},{id:1317,properties:[{name:"collision",type:"bool",value:!1}]},{id:1318,properties:[{name:"collision",type:"bool",value:!1}]},{id:1319,properties:[{name:"collision",type:"bool",value:!1}]}],tilewidth:16,type:"tileset",version:"1.6"}});var fc=R(Yi=>{"use strict";var pc=Yi&&Yi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yi,"__esModule",{value:!0});var k1=pc(uc()),H1=pc(hc()),Na=new Map;Na.set("test",k1.default);Na.set("wall",H1.default);Yi.default=Na});var Fa=R(Wi=>{"use strict";var So=Wi&&Wi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wi,"__esModule",{value:!0});var X1=So(ti()),j1=So(wo()),V1=So(Ca()),q1=So(fc()),Ma=class extends X1.default{constructor(i){super(i);this.tiledTileset=null,this.image=new j1.default(`tilesheets/${this.slug}`);let t=q1.default.get(i);typeof t!="undefined"&&(this.tiledTileset=t)}getImage(){return this.image}getTileX(i){let t=this.getWidth();return t!==null?i%t:null}getTileY(i){let t=this.getWidth();return t!==null?Math.floor(i/t):null}hasCollisionAtTile(i){if(this.tiledTileset!==null){let t=this.tiledTileset.tiles[i].properties;if(typeof t!="undefined"){let r=t.find(o=>o.name==="collision");if(typeof r!="undefined"&&r.value===!0)return!0}}return!1}getWidth(){return this.tiledTileset!==null?this.tiledTileset.imagewidth/V1.default:null}};h(Ma,"Tileset");Wi.default=Ma});var ut=R(Ua=>{"use strict";Object.defineProperty(Ua,"__esModule",{value:!0});var Y1=352;Ua.default=Y1});var ii=R(La=>{"use strict";Object.defineProperty(La,"__esModule",{value:!0});var W1=480;La.default=W1});var Fe=R(Da=>{"use strict";Object.defineProperty(Da,"__esModule",{value:!0});var z1={app:null,heldKeys:[],mouseHeldAt:null,mouseX:null,mouseY:null,now:performance.now(),player:null,updatedAt:0};Da.default=z1});var Ga=R(zi=>{"use strict";var Ba=zi&&zi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(zi,"__esModule",{value:!0});var K1=ae(),Z1=_e(),$1=St(),cc=Ba(ut()),dc=Ba(ii()),vc=Ba(Fe()),J1=h((e,i,t,r,o,n,s,a,l,u)=>{if(n+a>0&&n<dc.default&&s+l>0&&s<cc.default&&e.getIsLoaded()&&vc.default.app!==null){let p=e.getBaseTexture();if(p!==null){let f=Math.max(n*-1,0),c=Math.max(s*-1,0),d=Math.max(n,0),v=Math.max(s,0),m=Math.min(a-f,dc.default-d),y=Math.min(l-c,cc.default-v),g=f+i,T=c+t,x=Math.min(r-f,m),I=Math.min(o-c,y),b=new $1.Sprite(new K1.Texture(p,new Z1.Rectangle(g,T,x,I)));b.x=Math.round(d),b.y=Math.round(v),b.width=m,b.height=y,b.zIndex=u,vc.default.app.stage.addChild(b)}}},"drawImage");zi.default=J1});var Oo=R(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});var Q1=h(()=>0,"getCameraX");ka.default=Q1});var Mo=R(Ki=>{"use strict";var Co=Ki&&Ki.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ki,"__esModule",{value:!0});var eT=Co(ri()),tT=Co(lt()),iT=Co(ut()),No=Co(Fe()),rT=h(()=>{let e=tT.default.get("Tilemap");if(No.default.player!==null&&typeof e!="undefined"){let i=No.default.player.getMap(),t=e.get(i);if(t instanceof eT.default){let r=t.getTiledTilemap();if(r!==null)return Math.min((r.height-22)*16,Math.round(No.default.player.getY())+No.default.player.getHeight()/2-iT.default/2)}}return 0},"getCameraY");Ki.default=rT});var mc=R(Ha=>{"use strict";Object.defineProperty(Ha,"__esModule",{value:!0});var oT=h((e,i,t,r,o,n,s,a)=>{let l=e+t<o,u=e>o+s,p=i>n+a,f=i+r<n;return!(l||u||p||f)},"rectanglesOverlap");Ha.default=oT});var yc=R(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});var nT=16;Xa.default=nT});var _c=R((iE,sT)=>{sT.exports={compressionlevel:-1,height:44,infinite:!0,layers:[{id:3,layers:[{chunks:[{data:[52,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,52,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,52,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,52,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,52,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,52,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,52,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,52,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,52,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,52,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,52,374,375,376,377,378,379,380,381,382,383,384,385,386,387,388,52,404,405,406,407,408,409,410,411,412,413,414,415,416,417,418,52,434,435,436,437,438,439,440,441,442,443,444,445,446,447,448,52,464,465,466,467,468,469,470,471,472,473,474,475,476,477,478,52,494,495,496,497,498,499,500,501,502,503,504,505,506,507,508,52,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538],height:16,width:16,x:0,y:0},{data:[89,90,91,92,93,94,95,96,97,98,99,100,101,52,0,0,119,120,121,122,123,124,125,126,127,128,129,130,131,52,0,0,149,150,151,152,153,154,155,156,157,158,159,160,161,52,0,0,179,180,181,182,183,184,185,186,187,188,189,190,191,52,0,0,209,210,211,212,213,214,215,216,217,218,219,220,221,52,0,0,239,240,241,242,243,244,245,246,247,248,249,250,251,52,0,0,269,270,271,272,273,274,275,276,277,278,279,280,281,52,0,0,299,300,301,302,303,304,305,306,307,308,309,310,311,52,0,0,329,330,331,332,333,334,335,336,337,338,339,340,341,52,0,0,359,360,361,362,363,364,365,366,367,368,369,370,371,52,0,0,389,390,391,392,393,394,395,396,397,398,399,400,401,52,0,0,419,420,421,422,423,424,425,426,427,428,429,430,431,52,0,0,449,450,451,452,453,454,455,456,457,458,459,460,461,52,0,0,479,480,481,482,483,484,485,486,487,488,489,490,491,52,0,0,509,510,511,512,513,514,515,516,517,518,519,520,521,52,0,0,539,540,541,542,543,544,545,546,547,548,549,550,551,52,0,0],height:16,width:16,x:16,y:0},{data:[52,554,555,556,557,558,559,560,561,562,563,564,565,566,567,568,52,584,585,586,587,588,589,590,591,592,593,594,595,596,597,598,52,614,615,616,617,618,619,620,621,622,623,624,625,626,627,628,52,644,645,646,647,648,649,650,651,652,653,654,655,656,657,658,52,674,675,676,677,678,679,680,681,682,683,684,685,686,687,688,52,704,705,706,707,708,709,710,711,712,713,714,715,716,717,718,52,734,735,736,737,738,739,740,741,742,743,744,745,746,747,748,52,764,765,766,767,768,769,770,771,772,773,774,775,776,777,778,52,794,795,796,797,798,799,800,801,802,803,804,805,806,807,808,52,824,825,826,827,828,829,830,831,832,833,834,835,836,837,838,52,854,855,856,857,858,859,860,861,862,863,864,865,866,867,868,52,884,885,886,887,888,889,890,891,892,893,894,895,896,897,898,52,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,52,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,52,974,975,976,977,978,979,980,981,982,983,984,985,986,987,988,52,1004,1005,1006,1007,1008,1009,1010,1011,1012,1013,1014,1015,1016,1017,1018],height:16,width:16,x:0,y:16},{data:[569,570,571,572,573,574,575,576,577,578,579,580,581,52,0,0,599,600,601,602,603,604,605,606,607,608,609,610,611,52,0,0,629,630,631,632,633,634,635,636,637,638,639,640,641,52,0,0,659,660,661,662,663,664,665,666,667,668,669,670,671,52,0,0,689,690,691,692,693,694,695,696,697,698,699,700,701,52,0,0,719,720,721,722,723,724,725,726,727,728,729,730,731,52,0,0,749,750,751,752,753,754,755,756,757,758,759,760,761,52,0,0,779,780,781,782,783,784,785,786,787,788,789,790,791,52,0,0,809,810,811,812,813,814,815,816,817,818,819,820,821,52,0,0,839,840,841,842,843,844,845,846,847,848,849,850,851,52,0,0,869,870,871,872,873,874,875,876,877,878,879,880,881,52,0,0,899,900,901,902,903,904,905,906,907,908,909,910,911,52,0,0,929,930,931,932,933,934,935,936,937,938,939,940,941,52,0,0,959,960,961,962,963,964,965,966,967,968,969,970,971,52,0,0,989,990,991,992,993,994,995,996,997,998,999,1e3,1001,52,0,0,1019,1020,1021,1022,1023,1024,1025,1026,1027,1028,1029,1030,1031,52,0,0],height:16,width:16,x:16,y:16},{data:[52,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,52,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,52,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,52,1124,1125,1126,1127,1128,1129,1130,1131,1132,1133,1134,1135,1136,1137,1138,52,1154,1155,1156,1157,1158,1159,1160,1161,1162,1163,1164,1165,1166,1167,1168,52,1184,1185,1186,1187,1188,1189,1190,1191,1192,1193,1194,1195,1196,1197,1198,52,1214,1215,1216,1217,1218,1219,1220,1221,1222,1223,1224,1225,1226,1227,1228,52,1244,1245,1246,1247,1248,1249,1250,1251,1252,1253,1254,1255,1256,1257,1258,52,1274,1275,1276,1277,1278,1279,1280,1281,1282,1283,1284,1285,1286,1287,1288,52,1304,1305,1306,1307,1308,1309,1310,1311,1312,1313,1314,1315,1316,1317,1318,52,1334,1335,1336,1337,1338,1339,1340,1341,1342,1343,1344,1345,1346,1347,1348,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:16,width:16,x:0,y:32},{data:[1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,52,0,0,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,52,0,0,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1120,1121,52,0,0,1139,1140,1141,1142,1143,1144,1145,1146,1147,1148,1149,1150,1151,52,0,0,1169,1170,1171,1172,1173,1174,1175,1176,1177,1178,1179,1180,1181,52,0,0,1199,1200,1201,1202,1203,1204,1205,1206,1207,1208,1209,1210,1211,52,0,0,1229,1230,1231,1232,1233,1234,1235,1236,1237,1238,1239,1240,1241,52,0,0,1259,1260,1261,1262,1263,1264,1265,1266,1267,1268,1269,1270,1271,52,0,0,1289,1290,1291,1292,1293,1294,1295,1296,1297,1298,1299,1300,1301,52,0,0,1319,1320,1321,1322,1323,1324,1325,1326,1327,1328,1329,1330,1331,52,0,0,1349,1350,1351,1352,1353,1354,1355,1356,1357,1358,1359,1360,1361,52,0,0,52,52,52,52,52,52,52,52,52,52,52,52,52,52,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:16,width:16,x:16,y:32}],height:48,id:1,name:"Tile Layer 1",opacity:1,startx:0,starty:0,type:"tilelayer",visible:!0,width:32,x:0,y:0},{chunks:[{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2],height:16,width:16,x:0,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:16,width:16,x:16,y:0},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:16,width:16,x:0,y:16},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:16,width:16,x:16,y:16},{data:[0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:16,width:16,x:0,y:32},{data:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],height:16,width:16,x:16,y:32}],height:48,id:4,name:"Tile Layer 2",opacity:1,startx:0,starty:0,type:"tilelayer",visible:!0,width:32,x:0,y:0}],name:"below",opacity:1,type:"group",visible:!0,x:0,y:0},{id:2,layers:[],name:"above",opacity:1,type:"group",visible:!0,x:0,y:0}],nextlayerid:5,nextobjectid:1,orientation:"orthogonal",renderorder:"right-down",tiledversion:"1.7.2",tileheight:16,tilesets:[{firstgid:1,source:"../tilesets/test.json"},{firstgid:73,source:"../tilesets/wall.json"}],tilewidth:16,type:"map",version:"1.6",width:30}});var gc=R(Zi=>{"use strict";var aT=Zi&&Zi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Zi,"__esModule",{value:!0});var lT=aT(_c()),bc=new Map;bc.set("main",lT.default);Zi.default=bc});var ri=R($i=>{"use strict";var Xe=$i&&$i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($i,"__esModule",{value:!0});var uT=Xe(ti()),Tc=Xe(Fa()),xc=Xe(lt()),hT=Xe(Ga()),pT=Xe(Oo()),fT=Xe(Mo()),cT=Xe(mc()),Ec=Xe(Fe()),oi=Xe(yc()),ni=Xe(Ca()),dT=Xe(gc()),ja=class extends uT.default{constructor(i){super(i);this.tiledTilemap=null;let t=dT.default.get(i);typeof t!="undefined"&&(this.tiledTilemap=t)}getTiledTilemap(){return this.tiledTilemap}hasCollisionInRectangle(i,t,r,o){if(this.tiledTilemap!==null)for(let n of this.tiledTilemap.layers)switch(n.name){case"below":if(typeof n.layers!="undefined"){for(let s of n.layers)if(typeof s.chunks!="undefined")for(let a of s.chunks){let l=0;for(let u of a.data){let p=[...this.tiledTilemap.tilesets].reverse().find(f=>f.firstgid<=u);if(typeof p!="undefined"){let f=u-p.firstgid,c=xc.default.get("Tileset");if(typeof c!="undefined"){let d=c.get(p.source.substring(12,p.source.lastIndexOf(".json")));if(d instanceof Tc.default){let v=(a.x+l%a.width)*ni.default,m=(a.y+Math.floor(l/a.width))*oi.default;if(d.hasCollisionAtTile(f)&&(0,cT.default)(v,m,ni.default,oi.default,i,t,r,o))return!0}}}l++}}}break}return!1}render(){this.tiledTilemap!==null&&Ec.default.player!==null&&Ec.default.player.isOnMap(this.slug)&&this.tiledTilemap.layers.forEach(i=>{switch(i.name){case"below":typeof i.layers!="undefined"&&i.layers.forEach(t=>{typeof t.chunks!="undefined"&&t.chunks.forEach(r=>{r.data.forEach((o,n)=>{if(this.tiledTilemap!==null){let s=[...this.tiledTilemap.tilesets].reverse().find(a=>a.firstgid<=o);if(typeof s!="undefined"){let a=o-s.firstgid,l=xc.default.get("Tileset");if(typeof l!="undefined"){let u=l.get(s.source.substring(12,s.source.lastIndexOf(".json")));if(u instanceof Tc.default){let p=(r.x+n%r.width)*ni.default,f=(r.y+Math.floor(n/r.width))*oi.default,c=u.getTileX(a),d=u.getTileY(a);c!==null&&d!==null&&(0,hT.default)(u.getImage(),c*ni.default,d*oi.default,ni.default,oi.default,p-(0,pT.default)(),f-(0,fT.default)(),ni.default,oi.default,2)}}}}})})});break}})}};h(ja,"Tilemap");$i.default=ja});var Fo=R(Ji=>{"use strict";var vT=Ji&&Ji.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ji,"__esModule",{value:!0});var mT=Po(),Rc=vT(Fe()),yT=h((e,i,t,r,o,n)=>{if(Rc.default.app!==null){let s=new mT.Graphics;s.beginFill(Number(`0x${e.substring(1)}`)),s.lineStyle(0,Number(`0x${e.substring(1)}`)),s.drawRect(Math.round(i),Math.round(t),r,o),s.zIndex=n,Rc.default.app.stage.addChild(s)}},"drawRectangle");Ji.default=yT});var qa=R(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});var _T=h(e=>e.reduce((i,t)=>i+t,0),"getSumOfNumbers");Va.default=_T});var Ic,Ac=Rl(()=>{Ic="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict"});var Ya={};ld(Ya,{customAlphabet:()=>bT,customRandom:()=>wc,nanoid:()=>gT,random:()=>Pc,urlAlphabet:()=>Ic});var Pc,wc,bT,gT,Wa=Rl(()=>{Ac();Pc=h(e=>crypto.getRandomValues(new Uint8Array(e)),"random"),wc=h((e,i,t)=>{let r=(2<<Math.log(e.length-1)/Math.LN2)-1,o=-~(1.6*r*i/e.length);return()=>{let n="";for(;;){let s=t(o),a=o;for(;a--;)if(n+=e[s[a]&r]||"",n.length===i)return n}}},"customRandom"),bT=h((e,i)=>wc(e,i,Pc),"customAlphabet"),gT=h((e=21)=>{let i="",t=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let r=t[e]&63;r<36?i+=r.toString(36):r<62?i+=(r-26).toString(36).toUpperCase():r<63?i+="_":i+="-"}return i},"nanoid")});var Sc=R(za=>{"use strict";Object.defineProperty(za,"__esModule",{value:!0});var TT=500;za.default=TT});var Lo=R(Qi=>{"use strict";var tt=Qi&&Qi.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Qi,"__esModule",{value:!0});var xT=tt(ti()),ET=tt(ri()),RT=tt(lt()),IT=tt(Fo()),AT=tt(Oo()),PT=tt(Mo()),Uo=tt(qa()),wT=(Wa(),Ya),ST=tt(Sc()),ze=tt(Fe()),Ka=class extends xT.default{constructor(i,t,r,o,n,s,a){super((0,wT.nanoid)());this.height=4,this.spawnedAt=ze.default.now,this.width=4,this.player=i,this.x=t-this.width/2,this.y=r-this.height/2,this.xDirection=o,this.yDirection=n,this.xVelocity=s,this.yVelocity=a}getHeight(){return this.height}getWidth(){return this.width}getX(){return this.x}getY(){return this.y}render(){(0,IT.default)("#ffffff",this.x-(0,AT.default)(),this.y-(0,PT.default)(),this.width,this.height,4)}update(){if(ze.default.now-this.spawnedAt>ST.default&&this.player.canTeleport())this.list.delete(this.slug),this.player.teleport();else{switch(this.xDirection){case"left":this.hasCollisionOnLeft()?this.xDirection="right":this.x-=this.getLeftMovableWidth();break;case"right":this.hasCollisionOnRight()?this.xDirection="left":this.x+=this.getRightMovableWidth();break}switch(this.yDirection){case"up":this.hasCollisionOnTop()?this.yDirection="down":this.y-=this.getTopMovableHeight();break;case"down":this.hasCollisionOnBottom()?this.yDirection="up":this.y+=this.getBottomMovableHeight();break}}}getBottomMovableHeight(){let i=ze.default.now-ze.default.updatedAt,t=[];for(let r=0;;r++){if(r>=i*this.yVelocity/1e3)return i*this.yVelocity/1e3;if(this.hasCollisionInRectangle(Math.round(this.x+1),Math.round(this.y+this.height+r),this.width-2,0))return(0,Uo.default)(t);t.push(1)}}getLeftMovableWidth(){let i=ze.default.now-ze.default.updatedAt,t=[];for(let r=0;;r++){if(r>=i*this.xVelocity/1e3)return i*this.xVelocity/1e3;if(this.hasCollisionInRectangle(Math.round(this.x-r),Math.round(this.y+1),0,this.height-2))return(0,Uo.default)(t);t.push(1)}}getRightMovableWidth(){let i=ze.default.now-ze.default.updatedAt,t=[];for(let r=0;;r++){if(r>=i*this.xVelocity/1e3)return i*this.xVelocity/1e3;if(this.hasCollisionInRectangle(Math.round(this.x+this.width+r),Math.round(this.y+1),0,this.height-2))return(0,Uo.default)(t);t.push(1)}}getTopMovableHeight(){let i=ze.default.now-ze.default.updatedAt,t=[];for(let r=0;;r++){if(r>=i*this.yVelocity/1e3)return i*this.yVelocity/1e3;if(this.hasCollisionInRectangle(Math.round(this.x+1),Math.round(this.y-r),this.width-2,0))return(0,Uo.default)(t);t.push(1)}}hasCollisionInRectangle(i,t,r,o){let n=RT.default.get("Tilemap");if(typeof n!="undefined"){let s=n.get(this.player.getMap());if(s instanceof ET.default)return s.hasCollisionInRectangle(i,t,r,o)}return!1}hasCollisionOnBottom(){return this.hasCollisionInRectangle(Math.round(this.x)+1,Math.round(this.y+this.height),this.width-2,0)}hasCollisionOnLeft(){return this.hasCollisionInRectangle(Math.round(this.x),Math.round(this.y+1),0,this.height-2)}hasCollisionOnRight(){return this.hasCollisionInRectangle(Math.round(this.x+this.width),Math.round(this.y+1),0,this.height-2)}hasCollisionOnTop(){return this.hasCollisionInRectangle(Math.round(this.x)+1,Math.round(this.y),this.width-2,0)}};h(Ka,"Projectile");Qi.default=Ka});var Oc=R(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});var OT=128;Za.default=OT});var Cc=R($a=>{"use strict";Object.defineProperty($a,"__esModule",{value:!0});var CT=175;$a.default=CT});var Nc=R(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});var NT=3500;Ja.default=NT});var Mc=R(Qa=>{"use strict";Object.defineProperty(Qa,"__esModule",{value:!0});var MT=192;Qa.default=MT});var Fc=R(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});var FT=384;el.default=FT});var Uc=R(tl=>{"use strict";Object.defineProperty(tl,"__esModule",{value:!0});var UT=640;tl.default=UT});var Lc=R(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});var LT=64;il.default=LT});var Dc=R(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});var DT=128;rl.default=DT});var Bc=R(ol=>{"use strict";Object.defineProperty(ol,"__esModule",{value:!0});var BT=500;ol.default=BT});var Gc=R(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});var GT=175;nl.default=GT});var Do=R(tr=>{"use strict";var fe=tr&&tr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(tr,"__esModule",{value:!0});var kT=fe(ti()),HT=fe(wo()),XT=fe(Lo()),kc=fe(ri()),sl=fe(Oc()),jT=fe(Cc()),Hc=fe(Nc()),al=fe(lt()),VT=fe(Ga()),Xc=fe(Fo()),qT=fe(Mc()),ll=fe(Oo()),er=fe(Mo()),ul=fe(qa()),hl=fe(Fc()),YT=fe(Uc()),jc=fe(Lc()),WT=fe(Dc()),zT=(Wa(),Ya),Vc=fe(Bc()),qc=fe(ut()),q=fe(Fe()),Yc=fe(Gc()),pl=class extends kT.default{constructor(){super((0,zT.nanoid)());this.blinkedAt=q.default.now,this.direction="right",this.fallVelocity=sl.default,this.height=32,this.map="main",this.movementVelocity=0,this.projectile=null,this.width=32,this.walkedAt=null,this.x=224,this.y=656}blink(){this.blinkedAt=q.default.now}canTeleport(){if(this.projectile!==null){let i=this.projectile.getX()+this.projectile.getWidth()/2-this.width/2,t=this.projectile.getY()+this.projectile.getHeight()/2-this.height/2,r=al.default.get("Tilemap");if(typeof r!="undefined"){let o=r.get(this.map);if(o instanceof kc.default)return o.hasCollisionInRectangle(i,t,this.width,this.height)===!1}}return!1}getHeight(){return this.height}getMap(){return this.map}getX(){return this.x}getY(){return this.y}isOnMap(i){return this.map===i}render(){let i=al.default.get("ImageSource");if(typeof i!="undefined"){let t=i.get("player");t instanceof HT.default&&(0,VT.default)(t,this.getSourceX(),this.getSourceY(),this.width,this.height,this.x-(0,ll.default)(),this.y-(0,er.default)(),this.width,this.height,3)}if(q.default.mouseHeldAt!==null){let t=q.default.now-q.default.mouseHeldAt,r=Math.min(t/Vc.default,1),o=4,n=80,s=24;this.hasCollisionOnBottom()&&this.projectile===null&&((0,Xc.default)("#343434",o,qc.default-o-s,n,s,5),(0,Xc.default)("#e03c28",o,qc.default-o-s,r*n,s,5))}}shoot(){if(this.hasCollisionOnBottom()&&this.projectile===null&&q.default.mouseX!==null&&q.default.mouseY!==null&&q.default.mouseHeldAt!==null){let i=YT.default-jc.default,t=q.default.now-q.default.mouseHeldAt,r=Math.min(t/Vc.default,1),o=jc.default+i*r,n=q.default.mouseX+(0,ll.default)(),s=q.default.mouseY+(0,er.default)(),a=this.x+this.width/2,l=this.y+this.height/2,u=Math.abs(n-a),p=Math.abs(s-l),f=Math.atan2(p,u),c=Math.cos(f),d=Math.sin(f);this.projectile=new XT.default(this,a,l,this.isAimingLeft()?"left":"right",this.isAimingUp()?"up":"down",c*o,d*o)}}teleport(){this.projectile!==null&&(this.x=this.projectile.getX()+this.projectile.getWidth()/2-this.width/2,this.y=this.projectile.getY()+this.projectile.getHeight()/2-this.height/2,this.movementVelocity=0,this.fallVelocity=sl.default,this.projectile=null)}update(){let i=q.default.now-q.default.updatedAt;if(q.default.now>jT.default+Hc.default+this.blinkedAt&&this.blink(),this.hasCollisionOnBottom()){let t=[...q.default.heldKeys].reverse().find(r=>["a","d","arrowleft","arrowright"].includes(r));if(q.default.mouseHeldAt!==null||typeof t=="undefined")this.movementVelocity=0,this.walkedAt=null;else switch(this.blink(),this.walkedAt===null&&(this.walkedAt=q.default.now),this.movementVelocity=WT.default,t){case"a":case"arrowleft":this.direction="left";break;case"d":case"arrowright":this.direction="right";break}}switch(this.direction){case"left":if(this.hasCollisionOnLeft()===!1){let t=this.getLeftMovableWidth()*(this.hasCollisionOnBottom()?1:.5);t>0&&(this.blink(),this.x-=t)}break;case"right":if(this.hasCollisionOnRight()===!1){let t=this.getRightMovableWidth()*(this.hasCollisionOnBottom()?1:.5);t>0&&(this.blink(),this.x+=t)}break}if(this.hasCollisionOnBottom())this.fallVelocity=sl.default;else{let t=this.getFallableHeight();t>0&&(this.blink(),this.y+=t),this.fallVelocity<hl.default?this.fallVelocity=Math.min(this.fallVelocity+i*qT.default/1e3,hl.default):this.fallVelocity=hl.default}}getFallableHeight(){let i=q.default.now-q.default.updatedAt,t=[];for(let r=0;;r++){if(r>=i*this.fallVelocity/1e3)return i*this.fallVelocity/1e3;if(this.hasCollisionInRectangle(Math.round(this.x+1),Math.round(this.y+this.height+r),this.width-2,0))return(0,ul.default)(t);t.push(1)}}getLeftMovableWidth(){let i=q.default.now-q.default.updatedAt,t=[];for(let r=0;;r++){if(r>=i*this.movementVelocity/1e3)return i*this.movementVelocity/1e3;if(this.hasCollisionInRectangle(Math.round(this.x-r),Math.round(this.y+1),0,this.height-2))return(0,ul.default)(t);t.push(1)}}getRightMovableWidth(){let i=q.default.now-q.default.updatedAt,t=[];for(let r=0;;r++){if(r>=i*this.movementVelocity/1e3)return i*this.movementVelocity/1e3;if(this.hasCollisionInRectangle(Math.round(this.x+this.width+r),Math.round(this.y+1),0,this.height-2))return(0,ul.default)(t);t.push(1)}}getSourceX(){if(this.hasCollisionOnBottom()===!1)return 0;if(this.walkedAt!==null){let i=Yc.default*5,t=q.default.now-this.walkedAt;return Math.floor(t%i/Yc.default)*this.width}return this.projectile===null&&q.default.mouseHeldAt!==null&&q.default.mouseY!==null?q.default.mouseY<this.y-(0,er.default)()?this.width:q.default.mouseY>this.y-(0,er.default)()+this.height?this.width*2:0:q.default.now>this.blinkedAt+Hc.default?this.width:0}getSourceY(){if(this.hasCollisionOnBottom()===!1)switch(this.direction){case"left":return this.height*7;case"right":return this.height*3}if(this.walkedAt!==null)switch(this.direction){case"left":return this.height*5;case"right":return this.height}if(this.projectile===null&&q.default.mouseHeldAt!==null&&q.default.mouseX!==null)return this.isAimingLeft()?this.height*6:this.height*2;switch(this.direction){case"left":return this.height*4;case"right":return 0}return 0}hasCollisionInRectangle(i,t,r,o){let n=al.default.get("Tilemap");if(typeof n!="undefined"){let s=n.get(this.map);if(s instanceof kc.default)return s.hasCollisionInRectangle(i,t,r,o)}return!1}hasCollisionOnBottom(){return this.hasCollisionInRectangle(Math.round(this.x)+1,Math.round(this.y+this.height),this.width-2,0)}hasCollisionOnLeft(){return this.hasCollisionInRectangle(Math.round(this.x),Math.round(this.y+1),0,this.height-2)}hasCollisionOnRight(){return this.hasCollisionInRectangle(Math.round(this.x+this.width),Math.round(this.y+1),0,this.height-2)}isAimingLeft(){return q.default.mouseX!==null?q.default.mouseX<this.x+this.width/2-(0,ll.default)():!1}isAimingUp(){return q.default.mouseY!==null?q.default.mouseY<this.y+this.height/2-(0,er.default)():!1}};h(pl,"Player");tr.default=pl});var Wc=R(ir=>{"use strict";var KT=ir&&ir.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ir,"__esModule",{value:!0});var ZT=KT(wo()),$T=h(()=>{new ZT.default("player")},"defineImageSources");ir.default=$T});var zc=R(rr=>{"use strict";var JT=rr&&rr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rr,"__esModule",{value:!0});var QT=JT(ri()),ex=h(()=>{new QT.default("main")},"defineTilemaps");rr.default=ex});var Zc=R(or=>{"use strict";var tx=or&&or.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(or,"__esModule",{value:!0});var Kc=tx(Fa()),ix=h(()=>{new Kc.default("test"),new Kc.default("wall")},"defineTilesets");or.default=ix});var $c=R(nr=>{"use strict";var fl=nr&&nr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nr,"__esModule",{value:!0});var rx=fl(Wc()),ox=fl(zc()),nx=fl(Zc()),sx=h(()=>{(0,rx.default)(),(0,ox.default)(),(0,nx.default)()},"define");nr.default=sx});var Qc=R(sr=>{"use strict";var ax=sr&&sr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(sr,"__esModule",{value:!0});var Jc=ax(Fe()),lx=h(()=>{Jc.default.app!==null&&Jc.default.app.renderer.view.focus()},"focusScreen");sr.default=lx});var dl=R(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var ux=document.getElementById("screen");cl.default=ux});var yl=R(ar=>{"use strict";var vl=ar&&ar.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ar,"__esModule",{value:!0});var ml=vl(dl()),hx=vl(ut()),px=vl(ii()),fx=h(()=>{ml.default!==null&&(ml.default.style.width=`${px.default*2}px`,ml.default.style.height=`${hx.default*2}px`)},"sizeScreen");ar.default=fx});var ed=R(lr=>{"use strict";var Bo=lr&&lr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lr,"__esModule",{value:!0});var cx=Bo(ut()),dx=Bo(ii()),vx=Bo(yl()),te=Bo(Fe()),mx=h(()=>{addEventListener("beforeunload",e=>{document.body.classList.contains("playing")&&(e.preventDefault(),e.returnValue=!1)}),addEventListener("resize",()=>{(0,vx.default)()}),te.default.app!==null&&(te.default.app.renderer.view.addEventListener("contextmenu",e=>{e.preventDefault()}),te.default.app.renderer.view.addEventListener("keydown",e=>{let i=e.key.toLowerCase();switch(i){case"tab":e.preventDefault();break}te.default.heldKeys.includes(i)===!1&&te.default.heldKeys.push(i)}),te.default.app.renderer.view.addEventListener("keyup",e=>{let i=e.key.toLowerCase();te.default.heldKeys.includes(i)&&te.default.heldKeys.splice(te.default.heldKeys.indexOf(i),1)}),te.default.app.renderer.view.addEventListener("focusout",()=>{te.default.heldKeys=[],te.default.mouseHeldAt=null}),te.default.app.renderer.view.addEventListener("selectstart",e=>{e.preventDefault()}),te.default.app.renderer.view.addEventListener("mousedown",e=>{e.target instanceof HTMLCanvasElement&&(te.default.player!==null&&te.default.player.blink(),te.default.mouseHeldAt=te.default.now)}),addEventListener("mouseup",e=>{e.preventDefault(),te.default.app!==null&&te.default.app.renderer.view instanceof HTMLCanvasElement&&(te.default.player!==null&&(te.default.player.blink(),te.default.player.shoot()),te.default.mouseHeldAt=null)}),te.default.app.renderer.view.addEventListener("mousemove",e=>{e.target instanceof HTMLCanvasElement&&(te.default.mouseX=e.offsetX/e.target.offsetWidth*dx.default,te.default.mouseY=e.offsetY/e.target.offsetHeight*cx.default)}))},"listenToDOM");lr.default=mx});var td=R(ur=>{"use strict";var ht=ur&&ur.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ur,"__esModule",{value:!0});var yx=ht(Do()),_x=ht(Lo()),bx=ht(ri()),_l=ht(lt()),gx=ht(Fo()),Tx=ht(ut()),xx=ht(ii()),Go=ht(Fe()),Ex=h(()=>{let e=_l.default.get("Player"),i=_l.default.get("Projectile"),t=_l.default.get("Tilemap");Go.default.app!==null&&(Go.default.app.stage.removeChildren(),(0,gx.default)("#000000",0,0,xx.default,Tx.default,1),typeof t!="undefined"&&t.forEach(r=>{r instanceof bx.default&&r.render()}),typeof e!="undefined"&&e.forEach(r=>{r instanceof yx.default&&r.render()}),typeof i!="undefined"&&i.forEach(r=>{r instanceof _x.default&&r.render()}),Go.default.app.stage.sortChildren(),Go.default.app.render())},"render");ur.default=Ex});var id=R(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});var Rx=60;bl.default=Rx});var od=R(hr=>{"use strict";var ko=hr&&hr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hr,"__esModule",{value:!0});var Ix=ko(Do()),Ax=ko(Lo()),rd=ko(lt()),gl=ko(Fe()),Px=h(()=>{gl.default.now=performance.now();let e=rd.default.get("Player"),i=rd.default.get("Projectile");typeof e!="undefined"&&e.forEach(t=>{t instanceof Ix.default&&t.update()}),typeof i!="undefined"&&i.forEach(t=>{t instanceof Ax.default&&t.update()}),gl.default.updatedAt=gl.default.now},"update");hr.default=Px});var sd=R(fr=>{"use strict";var Ue=fr&&fr.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fr,"__esModule",{value:!0});var pr=Po(),wx=Ue(Do()),Sx=Ue($c()),Ox=Ue(Qc()),Cx=Ue(ed()),Nx=Ue(td()),nd=Ue(dl()),Mx=Ue(ut()),Fx=Ue(ii()),Ux=Ue(yl()),pt=Ue(Fe()),Lx=Ue(id()),Dx=Ue(od()),Bx=h(()=>{console.log("running Foddian"),(0,Sx.default)(),pr.settings.ROUND_PIXELS=!0,pr.settings.SCALE_MODE=pr.SCALE_MODES.NEAREST,pr.utils.skipHello(),pt.default.app=new pr.Application({backgroundAlpha:0,height:Mx.default,width:Fx.default}),pt.default.app.renderer.view.style.display="block",pt.default.app.renderer.view.style.height="100%",pt.default.app.renderer.view.style.width="100%",pt.default.app.renderer.view.tabIndex=0,nd.default!==null&&nd.default.appendChild(pt.default.app.view),(0,Ux.default)(),(0,Cx.default)(),pt.default.player=new wx.default,setInterval(()=>{(0,Dx.default)()},1e3/Lx.default),pt.default.app.ticker.add(Nx.default),(0,Ox.default)()},"run");fr.default=Bx});var Hx=R(Ho=>{"use strict";var Gx=Ho&&Ho.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ho,"__esModule",{value:!0});var kx=Gx(sd());document.onreadystatechange=()=>{document.readyState==="complete"&&(0,kx.default)()}});Hx();})();
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/
/*!
 * @pixi/accessibility - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/accessibility is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/app - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/app is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/compressed-textures - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/compressed-textures is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/constants - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/constants is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/core - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/core is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/display - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/display is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/extract - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/extract is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-alpha - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/filter-alpha is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-blur - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/filter-blur is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-color-matrix - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/filter-color-matrix is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-displacement - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/filter-displacement is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-fxaa - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/filter-fxaa is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/filter-noise - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/filter-noise is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/graphics - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/graphics is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/interaction - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/interaction is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/loaders - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/loaders is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/math - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/math is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mesh - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/mesh is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mesh-extras - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/mesh-extras is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-cache-as-bitmap - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/mixin-cache-as-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-get-child-by-name - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/mixin-get-child-by-name is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/mixin-get-global-position - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/mixin-get-global-position is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/particle-container - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/particle-container is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/polyfill - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/polyfill is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/prepare - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/prepare is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/runner - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/runner is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/settings - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/settings is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/sprite is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite-animated - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/sprite-animated is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/sprite-tiling - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/sprite-tiling is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/spritesheet - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/spritesheet is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/text - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/text is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/text-bitmap - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/text-bitmap is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/ticker - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/ticker is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * @pixi/utils - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * @pixi/utils is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*!
 * pixi.js - v6.1.3
 * Compiled Mon, 13 Sep 2021 15:29:31 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
/*! https://mths.be/punycode v1.3.2 by @mathias */
